<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 데이터 입력 | R과 통계분석</title>
  <meta name="description" content="null" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 데이터 입력 | R과 통계분석" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="null" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 데이터 입력 | R과 통계분석" />
  
  <meta name="twitter:description" content="null" />
  

<meta name="author" content="박동련" />


<meta name="date" content="2022-02-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-structure.html"/>
<link rel="next" href="dplyr에-의한-데이터-다듬기.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>소개하기</a></li>
<li class="chapter" data-level="1" data-path="r-시작하기.html"><a href="r-시작하기.html"><i class="fa fa-check"></i><b>1</b> R 시작하기</a>
<ul>
<li class="chapter" data-level="1.1" data-path="r-시작하기.html"><a href="r-시작하기.html#r의-소개"><i class="fa fa-check"></i><b>1.1</b> R의 소개</a></li>
<li class="chapter" data-level="1.2" data-path="r-시작하기.html"><a href="r-시작하기.html#r의-설치"><i class="fa fa-check"></i><b>1.2</b> R의 설치</a></li>
<li class="chapter" data-level="1.3" data-path="r-시작하기.html"><a href="r-시작하기.html#rstudio의-설치-및-r의-실행"><i class="fa fa-check"></i><b>1.3</b> RStudio의 설치 및 R의 실행</a></li>
<li class="chapter" data-level="1.4" data-path="r-시작하기.html"><a href="r-시작하기.html#작업공간"><i class="fa fa-check"></i><b>1.4</b> 작업공간</a></li>
<li class="chapter" data-level="1.5" data-path="r-시작하기.html"><a href="r-시작하기.html#스크립트-파일의-활용"><i class="fa fa-check"></i><b>1.5</b> 스크립트 파일의 활용</a></li>
<li class="chapter" data-level="1.6" data-path="r-시작하기.html"><a href="r-시작하기.html#section-batch"><i class="fa fa-check"></i><b>1.6</b> 일괄처리</a></li>
<li class="chapter" data-level="1.7" data-path="r-시작하기.html"><a href="r-시작하기.html#section-package"><i class="fa fa-check"></i><b>1.7</b> R의 확장: 패키지</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="r-시작하기.html"><a href="r-시작하기.html#패키지의-종류"><i class="fa fa-check"></i><b>1.7.1</b> 패키지의 종류</a></li>
<li class="chapter" data-level="1.7.2" data-path="r-시작하기.html"><a href="r-시작하기.html#패키지의-설치-및-사용"><i class="fa fa-check"></i><b>1.7.2</b> 패키지의 설치 및 사용</a></li>
<li class="chapter" data-level="1.7.3" data-path="r-시작하기.html"><a href="r-시작하기.html#패키지-tidyverse의-소개"><i class="fa fa-check"></i><b>1.7.3</b> 패키지 tidyverse의 소개</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-structure.html"><a href="data-structure.html"><i class="fa fa-check"></i><b>2</b> R 데이터 구조</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-structure.html"><a href="data-structure.html#벡터"><i class="fa fa-check"></i><b>2.1</b> 벡터</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data-structure.html"><a href="data-structure.html#벡터의-기본-특성"><i class="fa fa-check"></i><b>2.1.1</b> 벡터의 기본 특성</a></li>
<li class="chapter" data-level="2.1.2" data-path="data-structure.html"><a href="data-structure.html#다양한-형태를-갖는-벡터의-생성"><i class="fa fa-check"></i><b>2.1.2</b> 다양한 형태를 갖는 벡터의 생성</a></li>
<li class="chapter" data-level="2.1.3" data-path="data-structure.html"><a href="data-structure.html#문자열을-위한-함수"><i class="fa fa-check"></i><b>2.1.3</b> 문자열을 위한 함수</a></li>
<li class="chapter" data-level="2.1.4" data-path="data-structure.html"><a href="data-structure.html#벡터의-연산"><i class="fa fa-check"></i><b>2.1.4</b> 벡터의 연산</a></li>
<li class="chapter" data-level="2.1.5" data-path="data-structure.html"><a href="data-structure.html#벡터의-비교"><i class="fa fa-check"></i><b>2.1.5</b> 벡터의 비교</a></li>
<li class="chapter" data-level="2.1.6" data-path="data-structure.html"><a href="data-structure.html#벡터의-인덱싱"><i class="fa fa-check"></i><b>2.1.6</b> 벡터의 인덱싱</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-structure.html"><a href="data-structure.html#요인"><i class="fa fa-check"></i><b>2.2</b> 요인</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data-structure.html"><a href="data-structure.html#요인의-기본-특성"><i class="fa fa-check"></i><b>2.2.1</b> 요인의 기본 특성</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-structure.html"><a href="data-structure.html#숫자형-벡터를-요인으로-변환"><i class="fa fa-check"></i><b>2.2.2</b> 숫자형 벡터를 요인으로 변환</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-structure.html"><a href="data-structure.html#날짜"><i class="fa fa-check"></i><b>2.3</b> 날짜</a></li>
<li class="chapter" data-level="2.4" data-path="data-structure.html"><a href="data-structure.html#행렬-및-배열"><i class="fa fa-check"></i><b>2.4</b> 행렬 및 배열</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="data-structure.html"><a href="data-structure.html#행렬과-배열의-기본-특성"><i class="fa fa-check"></i><b>2.4.1</b> 행렬과 배열의 기본 특성</a></li>
<li class="chapter" data-level="2.4.2" data-path="data-structure.html"><a href="data-structure.html#행렬의-연산"><i class="fa fa-check"></i><b>2.4.2</b> 행렬의 연산</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="data-structure.html"><a href="data-structure.html#데이터-프레임"><i class="fa fa-check"></i><b>2.5</b> 데이터 프레임</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="data-structure.html"><a href="data-structure.html#데이터-프레임의-생성"><i class="fa fa-check"></i><b>2.5.1</b> 데이터 프레임의 생성</a></li>
<li class="chapter" data-level="2.5.2" data-path="data-structure.html"><a href="data-structure.html#데이터-프레임의-인덱싱"><i class="fa fa-check"></i><b>2.5.2</b> 데이터 프레임의 인덱싱</a></li>
<li class="chapter" data-level="2.5.3" data-path="data-structure.html"><a href="data-structure.html#함수-with"><i class="fa fa-check"></i><b>2.5.3</b> 함수 <code>with()</code></a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="data-structure.html"><a href="data-structure.html#tibble-개선된-형태의-데이터-프레임"><i class="fa fa-check"></i><b>2.6</b> Tibble: 개선된 형태의 데이터 프레임</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="data-structure.html"><a href="data-structure.html#tibble-생성"><i class="fa fa-check"></i><b>2.6.1</b> Tibble 생성</a></li>
<li class="chapter" data-level="2.6.2" data-path="data-structure.html"><a href="data-structure.html#tibble과-전통적인-데이터-프레임의-차이"><i class="fa fa-check"></i><b>2.6.2</b> Tibble과 전통적인 데이터 프레임의 차이</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="data-structure.html"><a href="data-structure.html#section-list"><i class="fa fa-check"></i><b>2.7</b> 리스트</a></li>
<li class="chapter" data-level="2.8" data-path="data-structure.html"><a href="data-structure.html#연습문제"><i class="fa fa-check"></i><b>2.8</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="데이터-입력.html"><a href="데이터-입력.html"><i class="fa fa-check"></i><b>3</b> 데이터 입력</a>
<ul>
<li class="chapter" data-level="3.1" data-path="데이터-입력.html"><a href="데이터-입력.html#텍스트-파일-불러오기-패키지-readr-함수의-활용"><i class="fa fa-check"></i><b>3.1</b> 텍스트 파일 불러오기: 패키지 <code>readr</code> 함수의 활용</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="데이터-입력.html"><a href="데이터-입력.html#함수-read_table로-데이터-파일-불러오기"><i class="fa fa-check"></i><b>3.1.1</b> 함수 <code>read_table()</code>로 데이터 파일 불러오기</a></li>
<li class="chapter" data-level="3.1.2" data-path="데이터-입력.html"><a href="데이터-입력.html#함수-read_csv로-csv-데이터-파일-불러오기"><i class="fa fa-check"></i><b>3.1.2</b> 함수 <code>read_csv()</code>로 CSV 데이터 파일 불러오기</a></li>
<li class="chapter" data-level="3.1.3" data-path="데이터-입력.html"><a href="데이터-입력.html#함수-read_fwf로-고정-포맷-구조를-갖는-데이터-파일-불러오기"><i class="fa fa-check"></i><b>3.1.3</b> 함수 <code>read_fwf()</code>로 고정 포맷 구조를 갖는 데이터 파일 불러오기</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="데이터-입력.html"><a href="데이터-입력.html#excel-파일-불러오기"><i class="fa fa-check"></i><b>3.2</b> Excel 파일 불러오기</a></li>
<li class="chapter" data-level="3.3" data-path="데이터-입력.html"><a href="데이터-입력.html#sas-데이터-파일-불러오기"><i class="fa fa-check"></i><b>3.3</b> SAS 데이터 파일 불러오기</a></li>
<li class="chapter" data-level="3.4" data-path="데이터-입력.html"><a href="데이터-입력.html#html-테이블-불러오기"><i class="fa fa-check"></i><b>3.4</b> HTML 테이블 불러오기</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html"><i class="fa fa-check"></i><b>4</b> <code>dplyr</code>에 의한 데이터 다듬기</a>
<ul>
<li class="chapter" data-level="4.1" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#행을-작업-대상으로-하는-함수"><i class="fa fa-check"></i><b>4.1</b> 행을 작업 대상으로 하는 함수</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#조건에-의한-행-선택-filter"><i class="fa fa-check"></i><b>4.1.1</b> 조건에 의한 행 선택: <code>filter()</code></a></li>
<li class="chapter" data-level="4.1.2" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#위치에-의한-행-선택-slice-및-그와-관련된-함수"><i class="fa fa-check"></i><b>4.1.2</b> 위치에 의한 행 선택: <code>slice()</code> 및 그와 관련된 함수</a></li>
<li class="chapter" data-level="4.1.3" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#행의-정렬-arrange"><i class="fa fa-check"></i><b>4.1.3</b> 행의 정렬: <code>arrange()</code></a></li>
<li class="chapter" data-level="4.1.4" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#중복된-행의-제거-distinct"><i class="fa fa-check"></i><b>4.1.4</b> 중복된 행의 제거: <code>distinct()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#열을-작업-대상으로-하는-함수"><i class="fa fa-check"></i><b>4.2</b> 열을 작업 대상으로 하는 함수</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#열의-선택-select"><i class="fa fa-check"></i><b>4.2.1</b> 열의 선택: <code>select()</code></a></li>
<li class="chapter" data-level="4.2.2" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#열-이름-변경-rename과-rename_with"><i class="fa fa-check"></i><b>4.2.2</b> 열 이름 변경: <code>rename()</code>과 <code>rename_with()</code></a></li>
<li class="chapter" data-level="4.2.3" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#열의-위치-변경-relocate"><i class="fa fa-check"></i><b>4.2.3</b> 열의 위치 변경: <code>relocate()</code></a></li>
<li class="chapter" data-level="4.2.4" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#새로운-열의-추가-mutate와-transmute"><i class="fa fa-check"></i><b>4.2.4</b> 새로운 열의 추가: <code>mutate()</code>와 <code>transmute()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#여러-행-자료의-요약-summarise"><i class="fa fa-check"></i><b>4.3</b> 여러 행 자료의 요약: <code>summarise()</code></a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R과 통계분석</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="데이터-입력" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> 데이터 입력</h1>
<p><a href="data-structure.html#data-structure">2</a>장에서는 다양한 R 데이터 객체에 대해 살펴보았다.
지금부터는 모든 통계분석 및 그래프 작성의 첫 단계라고 할 수 있는 데이터
입력 방법에 대해 살펴보자. R은 텍스트 파일, 다른 통계 소프트웨어 전용
데이터 파일, Excel 파일 및 HTML 테이블 등 다양한 유형의 데이터 파일을
비교적 간단하게 불러올 수 있다.</p>
<div id="텍스트-파일-불러오기-패키지-readr-함수의-활용" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> 텍스트 파일 불러오기: 패키지 <code>readr</code> 함수의 활용</h2>
<p>많은 경우에 데이터 파일은 텍스트 파일의 형태로 저장되어 있다. 통계
데이터 세트는 행과 열의 2차원 형태로 구성되는데, 입력 형식은 매우 다양할
수 있다. 즉, 각각의 자료들이 빈칸으로 구분된 경우, 콤마로 구분된 경우,
고정 포맷 구조로 구성된 경우 등이 있게 된다. 따라서 이렇게 각기 다른
구성 형식의 텍스트 파일을 불러오는데 적합한 함수가 필요한 것이다.</p>
<p>외부 텍스트 파일을 불러오는 작업은 base R 함수인 read.table() 또는
read.csv()로도 할 수 있으나, 크기가 큰 텍스트 파일을 불러와야 하는
경우에는 시간이 많이 걸린다는 문제가 있다. 이 절에서는 <code>tidyverse</code>에
속한 패키지 <code>readr</code>의 함수를 사용하여 효율적으로 텍스트 파일을 불러오는
방법을 살펴보겠다. 패키지 <code>readr</code>에는 텍스트 파일의 구성 형식 에 맞추어
사용할 수 있는 다양한 함수가 마련되어 있다. 각각의 자료들이 하나 이상의
빈 칸으로 구분된 경우에는 <code>read_table()</code>, 콤마로 구분된 경우에는 함수
<code>read_csv()</code>, 탭으로 구분된 경우에는 함수 <code>read_tsv()</code>, 그 외 다른
형태의 구분자로 구분된 경우는 함수 <code>read_delim()</code>을 사용할 수 있으며,
고정된 포맷 구조를 갖는 경우에는 함수 <code>read_fwf</code>()을 사용하여 자료를
불러올 수 있다.</p>
<p>이 함수들은 불러올 파일의 경로를 포함한 파일 이름이 첫 번째 입력 요소가
된다. 파일 이름이 <code>.gz</code> 또는 <code>.zip</code> 등으로 끝나는 압축 파일은 자동으로
압축을 해제하고 자료를 불러온다. 또한 <code>http://</code>, <code>https://</code>, <code>ftp://</code>,
<code>ftps://</code>로 시작되는 웹 서버에 있는 텍스트 파일도 불러올 수 있다.</p>
<div id="함수-read_table로-데이터-파일-불러오기" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> 함수 <code>read_table()</code>로 데이터 파일 불러오기</h3>
<p>자료들이 하나 이상의 빈칸으로 구분된 경우에는 read_table()를 사용하여
파일을 불러올 수 있다.</p>
<ol style="list-style-type: decimal">
<li>데이터 파일의 첫 줄에 변수 이름이 입력되어 있는 경우</li>
</ol>
<p>예를 들어 <code>Data</code> 폴더에 있는 파일 <code>data2_1.txt</code>에 세 변수의 자료가
다음과 같이 있다고 하자. 이런 경우에는 함수 <code>read_table()</code>에 파일의
위치와 함께 파일의 이름만 입력하면 된다.</p>
<div class="figure"><span style="display:block;" id="fig:data2-1"></span>
<img src="Figure/data2_1.png" alt="data2_1.txt" width="98" />
<p class="caption">
Figure 3.1: data2_1.txt
</p>
</div>
<div class="sourceCode" id="cb555"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb555-1"><a href="데이터-입력.html#cb555-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(tidyverse)</span></code></pre></div>
<div class="sourceCode" id="cb556"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb556-1"><a href="데이터-입력.html#cb556-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">read_table</span>(<span class="st">&quot;Data/data2_1.txt&quot;</span>)</span></code></pre></div>
<pre><code>
-- Column specification --------------------------------------------------------
cols(
  age = col_double(),
  gender = col_character(),
  income = col_double()
)</code></pre>
<pre><code># A tibble: 4 x 3
    age gender income
  &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;
1    24 M        2000
2    35 F        3100
3    28 F        3800
4    21 F        2800</code></pre>
<p>패키지 <code>readr</code>에 속한 함수들은 각 변수의 유형을 스스로 파악한다. 각
변수마다 처음 1000개의 자료를 읽고 정해진 규칙에 의하여 문자형, 정수형,
숫자형, 논리형 등으로 유형을 결정한다. 스스로 자료의 유형을 파악한
경우에는 각 변수별로 파악된 결과를 출력한다.</p>
<p>각 변수의 유형은 사용자가 직접 선언할 수도 있는데, 가장 간단한 방법은
입력 요소 <code>col_types</code>에 변수의 유형을 나타내는 문자를 변수가 입력된
순서대로 나열하여 지정하는 것이다. 자료의 유형을 나타내는 문자에는
<code>c</code>(문자형), <code>i</code>(정수형), <code>d</code>(실수형), <code>n</code>(숫자형), <code>l</code> (논리형),
<code>f</code>(요인), <code>D</code>(날짜) 등이 있다. 예를 들어 파일 data2_1.txt의 경우에는
다음과 같이 자료의 유형을 선언하여 자료를 불러올 수 있다.</p>
<div class="sourceCode" id="cb559"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb559-1"><a href="데이터-입력.html#cb559-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">read_table</span>(<span class="st">&quot;Data/data2_1.txt&quot;</span>, </span>
<span id="cb559-2"><a href="데이터-입력.html#cb559-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>            <span class="at">col_types =</span> <span class="st">&quot;dcd&quot;</span>)</span></code></pre></div>
<pre><code># A tibble: 4 x 3
    age gender income
  &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;
1    24 M        2000
2    35 F        3100
3    28 F        3800
4    21 F        2800</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>데이터만 파일에 입력되어 있는 경우</li>
</ol>
<p>첫 줄에 변수 이름이 입력되어 있지 않은 데이터 파일도 많이 있다. 예를
들어 <code>Data</code> 폴더에 있는 파일 <code>data2_2.txt</code>에 세 변수에 대한 데이터가
다음과 같이 있다고 하자.</p>
<div class="figure"><span style="display:block;" id="fig:data2-2"></span>
<img src="Figure/data2_2.png" alt="data2_2.txt" width="100" />
<p class="caption">
Figure 3.2: data2_2.txt
</p>
</div>
<p>이런 경우에는 입력 요소 <code>col_names</code>에 <code>FALSE</code>를 지정하거나 변수 이름을
나타내는 문자형 벡터를 지정해야 한다. 아무것도 지정하지 않으면 데이터
파일의 첫 줄에 입력된 자료가 각 변수의 이름으로 사용되는 오류가
발생한다. <code>FALSE</code>를 지정한 경우에 변수 이름은 <code>X1</code>, <code>X2</code>, <code>X3</code> 등이
된다.</p>
<div class="sourceCode" id="cb561"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb561-1"><a href="데이터-입력.html#cb561-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">read_table</span>(<span class="st">&quot;Data/data2_2.txt&quot;</span>, </span>
<span id="cb561-2"><a href="데이터-입력.html#cb561-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>            <span class="at">col_names =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>
-- Column specification --------------------------------------------------------
cols(
  X1 = col_double(),
  X2 = col_character(),
  X3 = col_double()
)</code></pre>
<pre><code># A tibble: 4 x 3
     X1 X2       X3
  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;
1    24 M      2000
2    35 F      3100
3    28 F      3800
4    21 F      2800</code></pre>
<div class="sourceCode" id="cb564"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb564-1"><a href="데이터-입력.html#cb564-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">read_table</span>(<span class="st">&quot;Data/data2_2.txt&quot;</span>, </span>
<span id="cb564-2"><a href="데이터-입력.html#cb564-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>            <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;income&quot;</span>))</span></code></pre></div>
<pre><code>
-- Column specification --------------------------------------------------------
cols(
  age = col_double(),
  gender = col_character(),
  income = col_double()
)</code></pre>
<pre><code># A tibble: 4 x 3
    age gender income
  &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;
1    24 M        2000
2    35 F        3100
3    28 F        3800
4    21 F        2800</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>데이터 파일에 주석이 입력된 경우</li>
</ol>
<p>데이터 파일에 주석이 있는 경우, 해당 행을 무시하기 위해서는 주석이
시작됨을 나타내는 기호를 입력 요소 <code>comment</code>에 지정하면 된다. 만일 기호
<code>#</code>을 주석 기호로 사용했다면 <code>comment="#"</code>을 입력하면 된다. 또한 만일
주석이 데이터 파일의 처음 몇 개 행에 입력되어 있다면, 입력 요소 <code>skip</code>을
사용하여 해당되는 처음 몇 개 행을 읽지 않고 그냥 넘기는 방법을 사용할
수도 있다. 예를 들어 <code>Data</code> 폴더에 있는 파일 <code>data2_3.txt</code>의 처음 세
줄이 다음과 같이 <code>#</code> 기호로 시작되는 주석이 입력되어 있다고 하자. 이
파일을 두 가지 방법을 각각 사용하여 불러와 보자.</p>
<div class="figure"><span style="display:block;" id="fig:data2-3"></span>
<img src="Figure/data2_3.png" alt="data2_3.txt" width="116" />
<p class="caption">
Figure 3.3: data2_3.txt
</p>
</div>
<div class="sourceCode" id="cb567"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb567-1"><a href="데이터-입력.html#cb567-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">read_table</span>(<span class="st">&quot;Data/data2_3.txt&quot;</span>,</span>
<span id="cb567-2"><a href="데이터-입력.html#cb567-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>            <span class="at">comment =</span> <span class="st">&quot;#&quot;</span>)</span></code></pre></div>
<pre><code>
-- Column specification --------------------------------------------------------
cols(
  x1 = col_double(),
  x2 = col_double(),
  x3 = col_double()
)</code></pre>
<pre><code># A tibble: 4 x 3
     x1    x2    x3
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1    24     1  2000
2    35     0  3100
3    28     0  3800
4    21     0  2800</code></pre>
<div class="sourceCode" id="cb570"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb570-1"><a href="데이터-입력.html#cb570-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">read_table</span>(<span class="st">&quot;Data/data2_3.txt&quot;</span>, </span>
<span id="cb570-2"><a href="데이터-입력.html#cb570-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>            <span class="at">skip =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>
-- Column specification --------------------------------------------------------
cols(
  x1 = col_double(),
  x2 = col_double(),
  x3 = col_double()
)</code></pre>
<pre><code># A tibble: 4 x 3
     x1    x2    x3
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1    24     1  2000
2    35     0  3100
3    28     0  3800
4    21     0  2800</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>데이터 파일에 결측값이 <code>NA</code>가 아닌 다른 기호로 입력된 경우</li>
</ol>
<p>데이터에 결측값이 있는 것은 당연한 것으로 봐야 한다. R에서는 결측값을
<code>NA</code>로 표시하기 때문에 데이터에 결측값이 있다면 해당되는 자리에 <code>NA</code>를
입력해야 한다. 그러나 경우에 따라서 결측값이 다른 숫자나 문자 혹은
기호로 데이터 파일에 입력될 수도 있는데, 예를 들어 SAS의 경우 결측값은
점(.)으로 표시한다. 이렇듯 다른 기호로 결측값이 입력된 경우 에는 옵션
<code>na</code>에 해당 기호를 지정해 주어야 한다. 만일 결측값이 점(.)으로만
입력되어 있 다면 <code>na = "."</code>으로 지정하면 되지만 <code>NA</code>와 점(.)이 모두
결측값을 나타내는 기호로 사용되었 다면 <code>na = c(".", "NA")</code>로 두 기호를
모두 지정해야 한다. 예를 들어 <code>Data</code> 폴더에 있는 data2_4.txt에 다음과
같이 <code>NA</code>와 점(.)이 모두 결측값을 나타내는 기호로 사용되어 있다고 하자.
이 파일을 옵션 <code>na</code>를 사용해서 불러와 보자.</p>
<div class="figure"><span style="display:block;" id="fig:data2-4"></span>
<img src="Figure/data2_4.png" alt="data2_4.txt" width="98" />
<p class="caption">
Figure 3.4: data2_4.txt
</p>
</div>
<div class="sourceCode" id="cb573"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb573-1"><a href="데이터-입력.html#cb573-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">read_table</span>(<span class="st">&quot;Data/data2_4.txt&quot;</span>, </span>
<span id="cb573-2"><a href="데이터-입력.html#cb573-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>            <span class="at">na =</span> <span class="st">&quot;.&quot;</span>)</span></code></pre></div>
<pre><code>
-- Column specification --------------------------------------------------------
cols(
  age = col_double(),
  gender = col_character(),
  income = col_character()
)</code></pre>
<pre><code># A tibble: 4 x 3
    age gender income
  &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; 
1    24 M      2000  
2    NA F      3100  
3    28 &lt;NA&gt;   3800  
4    21 F      NA    </code></pre>
<div class="sourceCode" id="cb576"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb576-1"><a href="데이터-입력.html#cb576-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">read_table</span>(<span class="st">&quot;Data/data2_4.txt&quot;</span>, </span>
<span id="cb576-2"><a href="데이터-입력.html#cb576-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>            <span class="at">na =</span> <span class="fu">c</span>(<span class="st">&quot;.&quot;</span>, <span class="st">&quot;NA&quot;</span>))</span></code></pre></div>
<pre><code>
-- Column specification --------------------------------------------------------
cols(
  age = col_double(),
  gender = col_character(),
  income = col_double()
)</code></pre>
<pre><code># A tibble: 4 x 3
    age gender income
  &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;
1    24 M        2000
2    NA F        3100
3    28 &lt;NA&gt;     3800
4    21 F          NA</code></pre>
<ul>
<li>함수 <code>file.choose()</code></li>
</ul>
<p>외부 파일을 R로 불러오는 과정에서 파일이 저장되어 있는 폴더의 정확한
위치를 잊는 경우가 가끔 있다. 혹은 정확하다고 생각되는 파일의 경로를
입력했는데도 파일을 열 수 없다는 오류가 발생하는 경우도 있다. 이런 경우
굳이 윈도우 파일 탐색기를 이용하여 파일의 위치를 다시 확인하지 않고도
파일에 접근할 수 있는 방법이 있는데 그것은 <code>file.choose()</code>를 이용하는
것이다. 예를 들어 함수 <code>read_table()</code> 등에 파일의 위치와 더불어 파일
이름을 입력하는 대신 <code>read_table(file.choose())</code>를 실행하면 탐색기 창이
나타나서 접근하고자 하는 파일을 쉽게 찾을 수 있다.</p>
</div>
<div id="함수-read_csv로-csv-데이터-파일-불러오기" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> 함수 <code>read_csv()</code>로 CSV 데이터 파일 불러오기</h3>
<p>CSV(Comma Separated Values) 파일이란 각 자료들이 콤마로 구분된 형식의
데이터 파일을 의미한다. Excel을 포함하는 많은 소프트웨어들이 CSV 형식의
데이터 파일을 읽어 올 수도 있고 작업결과를 CSV 형식으로 저장할 수도 있기
때문에 자주 사용되는 형식의 데이터 파일이라고 하겠다. 예들 들어 <code>Data</code>
폴더에 있는 파일 data3_1.txt에 자료들이 다음과 같이 콤마로 구분되어
있고, 첫 줄에는 변수 이름이 입력되어 있다고 하자. 이 경우에는
<code>read_csv()</code>에 파일의 위치를 포함한 이름을 입력하면 파일을 불러올 수
있다.</p>
<div class="figure"><span style="display:block;" id="fig:data3-1"></span>
<img src="Figure/data3_1.png" alt="data3_1.txt" width="101" />
<p class="caption">
Figure 3.5: data3_1.txt
</p>
</div>
<div class="sourceCode" id="cb579"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb579-1"><a href="데이터-입력.html#cb579-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/data3_1.txt&quot;</span>)</span></code></pre></div>
<pre><code>Rows: 4 Columns: 3</code></pre>
<pre><code>-- Column specification --------------------------------------------------------
Delimiter: &quot;,&quot;
chr (1): var 2
dbl (2): var 1, var 3</code></pre>
<pre><code>
i Use `spec()` to retrieve the full column specification for this data.
i Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre><code># A tibble: 4 x 3
  `var 1` `var 2` `var 3`
    &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;
1      24 M          2000
2      35 F          3100
3      28 F          3800
4      21 F          2800</code></pre>
<p>함수 <code>read_csv()</code>로 생성된 tibble의 변수 이름이 var 1과 같이
backtick(`) 기호로 감싸져 있다. 이것은 문자로 시작하지 않거나 중간에
빈칸이 있는 등 R의 전통적인 변수 이름 규칙에 어긋나 변수 이름으로 사용할
수 없는 문자열을, tibble에서는 backtick 기호로 감싸서 정상적인 변수
이름으로 사용하고 있음을 보여주는 것이다. Backtick 기호는 키보드에서 tab
키 바로 위에 있는 것으로 인용부호와는 다른 기호이다.</p>
<p>함수 <code>read_table()</code>에서 살펴보았던 <code>col_types</code>, <code>col_names</code>, <code>na</code>,
<code>comment</code>, <code>skip</code>은 <code>read_csv()</code>에서도 동일하게 작동되는 요소들이다.
예를 들어 <code>Data</code> 폴더에 있는 data3_2.txt에 다음과 같이 자료가 입력되어
있다고 하자. 첫 줄에 주석이 있고, 결측값이 기호 <code>NA</code>와 점(.)으로
표시되어 있으며, 변수 이름은 입력되지 않았다.</p>
<div class="figure"><span style="display:block;" id="fig:data3-2"></span>
<img src="Figure/data3_2.png" alt="data3_2.txt" width="86" />
<p class="caption">
Figure 3.6: data3_2.txt
</p>
</div>
<p>이제 각 변수의 유형을 스스로 파악하게 해 보자.</p>
<div class="sourceCode" id="cb584"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb584-1"><a href="데이터-입력.html#cb584-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/data3_2.txt&quot;</span>, </span>
<span id="cb584-2"><a href="데이터-입력.html#cb584-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>          <span class="at">col_names =</span> <span class="cn">FALSE</span>, </span>
<span id="cb584-3"><a href="데이터-입력.html#cb584-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>          <span class="at">comment =</span> <span class="st">&quot;#&quot;</span>, </span>
<span id="cb584-4"><a href="데이터-입력.html#cb584-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>          <span class="at">na =</span> <span class="fu">c</span>(<span class="st">&quot;.&quot;</span>, <span class="st">&quot;NA&quot;</span>))</span></code></pre></div>
<pre><code>Warning: One or more parsing issues, see `problems()` for details</code></pre>
<pre><code>Rows: 4 Columns: 3</code></pre>
<pre><code>-- Column specification --------------------------------------------------------
Delimiter: &quot;,&quot;
dbl (2): X1, X3
lgl (1): X2</code></pre>
<pre><code>
i Use `spec()` to retrieve the full column specification for this data.
i Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre><code># A tibble: 4 x 3
     X1 X2       X3
  &lt;dbl&gt; &lt;lgl&gt; &lt;dbl&gt;
1    24 NA     2000
2    35 FALSE  3100
3    NA FALSE  3800
4    21 FALSE    NA</code></pre>
<p>위 실행결과에서 자세하게 살펴볼 두 가지 중요한 사항이 있다. 첫 번째
사항은 CSV 파일에서는 자료를 입력하지 않고 빈칸으로 남겨두면 결측값으로
자동 처리된다는 것이다. 이것은 빈칸으로 남겨져 있는 변수 X1의 세 번째
자료가 NA로 처리된 것으로 알 수 있다. 각 자료가 콤마로 구분되어 있다는
것은 곧 각 자료의 입력 영역이 확보되어 있다는 것을 의미하기 때문에
빈칸으로 남겨진 영역을 결측값으로 자연스럽게 처리할 수 있는 것이다.</p>
<p>두 번째 사항은 변수 유형 파악에 오류가 발생할 수도 있으니 반드시 결과를
확인해야 한다는 것이다. 위 실행 결과에서 문자형 변수 <code>X2</code>의 유형이
논리형으로 파악된 현상이 발생했는데, 이것은 변수 <code>X2</code>의 자료가 <code>NA</code>와
<code>F</code>로만 이루어져 있어서 <code>F</code>를 <code>FALSE</code>로 인식했기 때문이다. 이런 경우에는
변수 유형을 사용자가 직접 지정해야 한다.</p>
<div class="sourceCode" id="cb590"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb590-1"><a href="데이터-입력.html#cb590-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/data3_2.txt&quot;</span>, </span>
<span id="cb590-2"><a href="데이터-입력.html#cb590-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>          <span class="at">col_names =</span> <span class="cn">FALSE</span>, </span>
<span id="cb590-3"><a href="데이터-입력.html#cb590-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>          <span class="at">col_types =</span> <span class="st">&quot;dcd&quot;</span>, </span>
<span id="cb590-4"><a href="데이터-입력.html#cb590-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>          <span class="at">comment =</span> <span class="st">&quot;#&quot;</span>, </span>
<span id="cb590-5"><a href="데이터-입력.html#cb590-5" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>          <span class="at">na =</span> <span class="fu">c</span>(<span class="st">&quot;.&quot;</span>, <span class="st">&quot;NA&quot;</span>))</span></code></pre></div>
<pre><code>Warning: One or more parsing issues, see `problems()` for details</code></pre>
<pre><code># A tibble: 4 x 3
     X1 X2       X3
  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;
1    24 &lt;NA&gt;   2000
2    35 F      3100
3    NA F      3800
4    21 F        NA</code></pre>
</div>
<div id="함수-read_fwf로-고정-포맷-구조를-갖는-데이터-파일-불러오기" class="section level3" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> 함수 <code>read_fwf()</code>로 고정 포맷 구조를 갖는 데이터 파일 불러오기</h3>
<p>데이터 파일 중에는 각 자료의 입력 위치가 고정되어 있는 경우가 있다. 예를
들어 <code>Data</code> 폴더에 있는 파일 data4.txt에 다음과 같은 형식으로 세 변수의
데이터가 입력되어 있다고 하자.</p>
<div class="figure"><span style="display:block;" id="fig:data4"></span>
<img src="Figure/data4.png" alt="data4.txt" width="68" />
<p class="caption">
Figure 3.7: data4.txt
</p>
</div>
<p>변수 <code>age</code>는 1-2열, <code>gender</code>는 3열, <code>income</code>은 4-7열에 각각 입력되어
있다. 이러한 경우 각 자료들이 빈칸이나 콤마 등으로 구분되어 있어야만
사용할 수 있는 함수 <code>read_table()</code> 또는 <code>read_csv()</code> 등은 그야말로
무용지물이 된다. 이러한 형식의 파일을 읽기 위해서는 각 자료의 고정된
위치를 지정할 수 있어야 하는데, 함수 <code>read_fwf()</code>에 바로 그러한 기능이
있다. 고정된 위치 지정은 입력 요소 <code>col_positions</code>에 함수 <code>fwf_widths</code>()
또는 <code>fwf_positions()</code>를 연결하는 것이다. 각 변수의 자료가 입력되는
영역의 폭으로 위치를 지정하는 것은 <code>fwf_widths(widths, col_names)</code>로
하면 되고, 각 변수의 시작 열과 끝 열을 지정해서 자료의 위치를 나타내기
위해서는 <code>fwf_positions(start, end, col_names)</code>로 하면 된다. 옵션
<code>col_names</code>를 생략하면 변수 이름은 <code>X1</code>, <code>X2</code>, <code>X3</code> 등으로 지정된다.</p>
<p>이제 data4.txt를 읽어보자. <code>fwf_widths()</code>에 <code>widths=c(2,1,4)</code>를 지정하면
첫 번째 변수 <code>age</code>는 두 개의 열, 두 번째 변수 <code>gender</code>는 한 개의 열,
마지막 변수 <code>income</code>은 네 개의 열을 차지하고 있다는 것이다.</p>
<div class="sourceCode" id="cb593"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb593-1"><a href="데이터-입력.html#cb593-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">read_fwf</span>(<span class="st">&quot;Data/data4.txt&quot;</span>, </span>
<span id="cb593-2"><a href="데이터-입력.html#cb593-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>          <span class="at">col_positions =</span> <span class="fu">fwf_widths</span>(<span class="at">widths =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">4</span>), </span>
<span id="cb593-3"><a href="데이터-입력.html#cb593-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>                                     <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;income&quot;</span>)))</span></code></pre></div>
<pre><code>Rows: 4 Columns: 3</code></pre>
<pre><code>-- Column specification --------------------------------------------------------

chr (1): gender
dbl (2): age, income</code></pre>
<pre><code>
i Use `spec()` to retrieve the full column specification for this data.
i Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre><code># A tibble: 4 x 3
    age gender income
  &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;
1    24 M        2000
2    35 F        3100
3    28 F        3800
4    21 F        2800</code></pre>
<p><code>fwf_positions()</code>에 <code>start=c(1,3,4)</code>와 <code>end=c(2,3,7)</code>을 지정하면 첫 번째
변수 <code>age</code>는 1~2열에, 두 번째 변수 <code>gender</code>는 3열에, 마지막 변수
<code>income</code>은 4~7열에 입력되어 있다는 것을 나타낸다.</p>
<div class="sourceCode" id="cb598"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb598-1"><a href="데이터-입력.html#cb598-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">read_fwf</span>(<span class="st">&quot;Data/data4.txt&quot;</span>, </span>
<span id="cb598-2"><a href="데이터-입력.html#cb598-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>          <span class="at">col_positions =</span> <span class="fu">fwf_positions</span>(<span class="at">start =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>),</span>
<span id="cb598-3"><a href="데이터-입력.html#cb598-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>                                        <span class="at">end =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">7</span>),</span>
<span id="cb598-4"><a href="데이터-입력.html#cb598-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>                                        <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;income&quot;</span>)))</span></code></pre></div>
<pre><code>Rows: 4 Columns: 3</code></pre>
<pre><code>-- Column specification --------------------------------------------------------

chr (1): gender
dbl (2): age, income</code></pre>
<pre><code>
i Use `spec()` to retrieve the full column specification for this data.
i Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre><code># A tibble: 4 x 3
    age gender income
  &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;
1    24 M        2000
2    35 F        3100
3    28 F        3800
4    21 F        2800</code></pre>
<ul>
<li>웹 서버에 저장된 2차원 형태의 데이터 파일 직접 불러오기</li>
</ul>
<p>웹 서버에 저장된 텍스트 파일은 함수 <code>read_table()</code> 또는 <code>read_csv()</code>
등에 <code>http://</code> 또는 <code>https://</code>로 시작하는 URL을 지정해서 불러올 수 있다.
예를 들어 <a href="https://archive.ics.uci.edu/ml/index.php">UCI Machine Learning
Repository</a>라는 사이트가
있는데, 여기에는 Machine Learning으로 분석 가능한 대략 500개 이상의
데이터 세트가 있다. 그 중 <code>Iris</code>라는 데이터 세트를 R로 직접 불러와보자.
웹에 있는 데이터를 불러오기 위해서는 데이터 파일의 URL과 자료의 저장
형태를 파악해야 한다. <code>Iris</code> 데이터 세트의 URL은
<code>https://archive. ics.uci.edu/ml/machine-learning-databases/iris/iris.data</code>이며,
파일 형태는 자료들이 콤마로 구분된 CSV 파일이고, 변수 이름이 입력되어
있지 않은 상태이다. 이제 파악된 URL을 함수 <code>read_csv()</code>에 입력하여 웹
데이터를 직접 불러보자.</p>
<div class="sourceCode" id="cb603"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb603-1"><a href="데이터-입력.html#cb603-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> iris.url <span class="ot">&lt;-</span> <span class="st">&quot;https://archive.ics.uci.edu/ml/machine-learning-databases/iris/iris.data&quot;</span></span>
<span id="cb603-2"><a href="데이터-입력.html#cb603-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">read_csv</span>(iris.url,</span>
<span id="cb603-3"><a href="데이터-입력.html#cb603-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>          <span class="at">col_names=</span><span class="fu">c</span>(<span class="st">&quot;S.length&quot;</span>,<span class="st">&quot;S.width&quot;</span>,<span class="st">&quot;P.length&quot;</span>,<span class="st">&quot;P.width&quot;</span>,<span class="st">&quot;Species&quot;</span>))</span></code></pre></div>
<pre><code>Rows: 150 Columns: 5</code></pre>
<pre><code>-- Column specification --------------------------------------------------------
Delimiter: &quot;,&quot;
chr (1): Species
dbl (4): S.length, S.width, P.length, P.width</code></pre>
<pre><code>
i Use `spec()` to retrieve the full column specification for this data.
i Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre><code># A tibble: 150 x 5
   S.length S.width P.length P.width Species    
      &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;      
 1      5.1     3.5      1.4     0.2 Iris-setosa
 2      4.9     3        1.4     0.2 Iris-setosa
 3      4.7     3.2      1.3     0.2 Iris-setosa
 4      4.6     3.1      1.5     0.2 Iris-setosa
 5      5       3.6      1.4     0.2 Iris-setosa
 6      5.4     3.9      1.7     0.4 Iris-setosa
 7      4.6     3.4      1.4     0.3 Iris-setosa
 8      5       3.4      1.5     0.2 Iris-setosa
 9      4.4     2.9      1.4     0.2 Iris-setosa
10      4.9     3.1      1.5     0.1 Iris-setosa
# ... with 140 more rows</code></pre>
<ul>
<li>RStudio 메뉴에서 불러오기</li>
</ul>
<p>외부 텍스트 파일을 불러오는 작업은 RStudio의 메뉴를 이용해서도 할 수
있다. 메인 메뉴 에서 <code>File &gt; Import Dataset &gt; From Text (readr)…</code> 을
선택하면 나타나는 별도의 창에서 필요한 사항을 선택하면 <code>read_table()</code>
혹은 <code>read_csv()</code> 등을 사용하여 파일을 불러오게 된다. 만일 base R 함수인
<code>read.table()</code> 혹은 <code>read.csv()</code> 등을 이용하고자 한다면
<code>File &gt; Import Dataset &gt; From Text (base)…</code>을 선택해서 불러올 수 있다.
또한 다음 절에서 살펴볼 Excel 파일이나, SAS 데이터 파일 등을 불러오는
작업도 <code>File &gt; Import Dataset</code>의 하부 메뉴를 이용해서 할 수 있다.</p>
<ul>
<li>데이터 프레임을 외부 텍스트 파일로 저장하기</li>
</ul>
<p>R에서 생성되고 수정된 데이터 프레임을 외부 텍스트 파일로 저장시켜 다른
소프트웨어에서도 사용할 수 있도록 하는 것도 중요한 작업이다. 데이터
프레임을 외부 텍스트 파일로 저장하는 작업은 자료들을 어떤 기호로 구분할
것인지에 따라 패키지 <code>readr</code>의 함수 <code>write_delim()</code>, <code>write_csv()</code> 또는
<code>write_tsv()</code> 등을 사용할 수 있다. 자료들을 빈칸으로 구분하려면
<code>write_delim()</code>, 콤마로 구분하려면 <code>write_csv()</code>, 탭으로 구분하려면
<code>write_tsv()</code>를 사용하면 된다. 데이터 프레임을 외부 텍스트 파일로
저장하는 작업은 <code>write.csv()</code>와 같은 base R 함수로도 할 수 있다. Base
R의 함수들은 데이터 프레임의 행 이름을 텍스트 파일의 첫 번째 열에
배치하고, 모든 문자 및 변수 이름에 인용부호를 붙이는 것이 디폴트인
반면에 패키지 <code>readr</code>의 함수들은 데이터 프레임의 행 이름을 절대 저장하지
않으며 인용 부호는 필요한 경우에만 사용된다. 또한 패키지 <code>readr</code>의
함수들의 실행 속도가 2배 정도 빠른 것으로 되어 있다.</p>
<p>Base 패키지인 <code>datasets</code>에 있는 데이터 프레임 <code>women</code>은 30대 미국 여성
15명의 몸무게와 키가 측정되어 있는 데이터 세트이다. 키는 인치 단위,
몸무게는 파운드 단위로 측정되었다. 데이터 프레임 <code>women</code>을 <code>Data</code> 폴더에
텍스트 파일로 저장하기 위해 다음 프로그램을 각각 실행해 보고 생성되는
텍스트 파일을 확인하기 바란다.</p>
<div class="sourceCode" id="cb608"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb608-1"><a href="데이터-입력.html#cb608-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">write_delim</span>(women, <span class="st">&quot;Data/women.txt&quot;</span>)</span>
<span id="cb608-2"><a href="데이터-입력.html#cb608-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">write_csv</span>(women, <span class="st">&quot;Data/women.csv&quot;</span>)</span>
<span id="cb608-3"><a href="데이터-입력.html#cb608-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">write_tsv</span>(women, <span class="st">&quot;Data/women.tsv&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="excel-파일-불러오기" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Excel 파일 불러오기</h2>
<p>Excel에서 데이터를 만들고 가공하는 경우가 많기 때문에 Excel
스프레드시트에 있는 데이터를 R로 불러오는 것은 상당히 중요한 작업이
된다. 이 절에서는 패키지 <code>xlsx</code>의 함수 <code>read.xlsx()</code>와 패키지 <code>readxl</code>의
함수 <code>read_excel()</code>을 사용하여, Excel 파일을 R로 불러오는 방법에 대하여
알아볼 것이다 예제 데이터로 <code>Data</code> 폴더에 있는 data5.xlsx에 다음과 같이
자료가 입력되어 있다고 하자. 자료는 첫 번째 시트에 입력되어 있다.</p>
<div class="figure"><span style="display:block;" id="fig:data5"></span>
<img src="Figure/data5.png" alt="data5.xlsx" width="94" />
<p class="caption">
Figure 3.8: data5.xlsx
</p>
</div>
<ul>
<li>패키지 <code>xlsx</code>의 함수 <code>read.xlsx()</code>로 Excel 파일 불러오기</li>
</ul>
<p>함수 <code>read.xlsx()</code>에는 입력할 데이터가 있는 시트의 번호를 <code>sheetIndex</code>에
지정해야 한다.</p>
<div class="sourceCode" id="cb609"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb609-1"><a href="데이터-입력.html#cb609-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(xlsx)</span>
<span id="cb609-2"><a href="데이터-입력.html#cb609-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">read.xlsx</span>(<span class="st">&quot;Data/data5.xlsx&quot;</span>, <span class="at">sheetIndex =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>  age gender income
1  24      M   2000
2  35      F   3100
3  28      F   3800
4  21      F   2800
5  31      M   3500</code></pre>
<p>함수 <code>read.xlsx()</code>는 tidyverse에 속한 함수가 아니어서, 이 함수로 생성된
객체는 전통적인 데이터 프레임이 됨을 알 수 있다. 만일 전체 스프레드시트
중 일부분만을 입력하고자 한다면 <code>rowIndex</code>와 <code>colIndex</code>에 입력할 행과
열의 번호를 지정하면 된다.</p>
<div class="sourceCode" id="cb611"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb611-1"><a href="데이터-입력.html#cb611-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">read.xlsx</span>(<span class="st">&quot;Data/data5.xlsx&quot;</span>, <span class="at">sheetIndex =</span> <span class="dv">1</span>,</span>
<span id="cb611-2"><a href="데이터-입력.html#cb611-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>           <span class="at">rowIndex =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">colIndex =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>  age gender
1  24      M
2  35      F
3  28      F
4  21      F</code></pre>
<ul>
<li>패키지 <code>readxl</code>의 함수 <code>read_excel()</code>로 Excel 파일 불러오기</li>
</ul>
<p>함수 <code>read_excel()</code>은 Excel 2003 이하 버전의 파일 형식인 xls 파일과
Excel 2007 이상 버전의 파일 형식인 xlsx 파일을 모두 불러올 수 있다. 또한
입력할 데이터가 있는 시트 번호를 지정하지 않으면, 디폴트로 첫 번째
시트의 데이터를 입력한다. 만일 다른 시트의 데이터를 입력하고자 한다면,
옵션 <code>sheet</code>에 시트 번호를 지정하면 된다.</p>
<div class="sourceCode" id="cb613"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb613-1"><a href="데이터-입력.html#cb613-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(readxl)</span>
<span id="cb613-2"><a href="데이터-입력.html#cb613-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">read_excel</span>(<span class="st">&quot;Data/data5.xlsx&quot;</span>)</span></code></pre></div>
<pre><code># A tibble: 5 x 3
    age gender income
  &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;
1    24 M        2000
2    35 F        3100
3    28 F        3800
4    21 F        2800
5    31 M        3500</code></pre>
<p>시트의 전체 데이터 중 일부분만을 입력하고자 한다면, 옵션 <code>range</code>에
입력하고자 하는 데이터 범위 사각형의 왼쪽 위 모서리와 오른쪽 아래
모서리의 셀 번호를 지정하면 된다.</p>
<div class="sourceCode" id="cb615"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb615-1"><a href="데이터-입력.html#cb615-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">read_excel</span>(<span class="st">&quot;Data/data5.xlsx&quot;</span>, <span class="at">range =</span> <span class="st">&quot;A1:B5&quot;</span>)</span></code></pre></div>
<pre><code># A tibble: 4 x 2
    age gender
  &lt;dbl&gt; &lt;chr&gt; 
1    24 M     
2    35 F     
3    28 F     
4    21 F     </code></pre>
<ul>
<li>Excel 파일을 CSV 파일로 전환한 후 불러오기</li>
</ul>
<p>앞에서 소개한 두 함수 중 어떤 함수를 사용하든지 Excel 파일을 R로
불러오는 데에는 큰 문제가 없겠지만, 어떤 이유로 해서 Excel 파일을 직접
R로 불러올 수 없는 경우에 대안으로 사용할 수 있는 방법이다. Excel 파일을
CSV 파일로 전환하여 저장하는 방법은 Excel의 메인 메뉴에서
<code>파일 &gt; 다른 이름으로 저장</code>을 선택한 후 CSV 파일 형식으로 저장하면 된다.
저장된 CSV 파일은 함수 <code>read_csv()</code>로 불러올 수 있다.</p>
<ul>
<li>함수 <code>write.xlsx()</code>를 사용하여 데이터 프레임을 Excel 파일로 저장하기</li>
</ul>
<p>데이터 프레임을 Excel 파일로 저장하는 것은 패키지 <code>xlsx</code>에 있는 함수
<code>write.xlsx()</code>를 사용하면 된다. 예를 들어 데이터 프레임 <code>women</code>을 <code>Data</code>
폴더에 women.xlsx로 저장해보자.</p>
<div class="sourceCode" id="cb617"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb617-1"><a href="데이터-입력.html#cb617-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(xlsx)</span>
<span id="cb617-2"><a href="데이터-입력.html#cb617-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">write.xlsx</span>(women, <span class="st">&quot;Data/women.xlsx&quot;</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="sas-데이터-파일-불러오기" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> SAS 데이터 파일 불러오기</h2>
<p>SAS는 범용 통계 소프트웨어로서 매우 두터운 사용자 층을 형성하고 있다.
따라서 SAS 전용 데이터 파일을 R로 불러오는 것도 중요한 작업이다. SAS
전용 데이터 파일을 R로 직접 불러오는 방법을 알아보자.</p>
<ul>
<li>패키지 <code>haven</code>의 함수 <code>read_sas()</code>로 SAS 전용 데이터 파일 불러오기</li>
</ul>
<p>예를 들어 <code>Data</code> 폴더에 다음의 SAS 명령문으로 생성된 데이터 파일
data6.sas7bdat가 있다고 하자.</p>
<pre class="sas"><code>LIBNAME mysas &#39;D:\Data&#39;;

DATA mysas.data6;
INPUT age gender $ income;
CARDS;
24 M 2000
35 F 3100
28 F 3800
21 F 3500
31 M 3500
RUN;</code></pre>
<p>패키지 <code>haven</code>도 tidyverse 계열에 속하는 패키지이므로, 함수
<code>read_sas()</code>은 tibble을 생성한다.</p>
<div class="sourceCode" id="cb619"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb619-1"><a href="데이터-입력.html#cb619-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(haven)</span>
<span id="cb619-2"><a href="데이터-입력.html#cb619-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">read_sas</span>(<span class="st">&quot;Data/data6.sas7bdat&quot;</span>)</span></code></pre></div>
<pre><code># A tibble: 5 x 3
    age gender income
  &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;
1    24 M        2000
2    35 F        3100
3    28 F        3800
4    21 F        3500
5    31 M        3500</code></pre>
<ul>
<li>SAS 전용 데이터 파일을 CSV 파일로 전환한 후 불러오기</li>
</ul>
<p>SAS 전용 데이터 파일은 SAS의 PROC EXPORT를 사용하여 CSV 파일로 전환하여
저장할 수 있다. Excel의 경우처럼 R로 직접 불러오는 방법에 대한 대안으로
사용할 수 있다. SAS 전용 데이터 파일인 data6.sas7bdat을 CSV 파일인
data6.csv로 출력하는 SAS 명령문은 다음과 같다.</p>
<pre class="sas"><code>LIBNAME mysas &#39;D:\Data&#39;;

PROC EXPORT DATA=mysas.data6
      OUTFILE=&#39;D:\Data\data6.csv&#39;
      DBMS=CSV;
RUN;</code></pre>
<p>패키지 <code>haven</code>에는 SPSS 데이터 파일과 Stata 데이터 파일을 불러올 수 있는
함수도 있다. SPSS 데이터 파일은 <code>read_spss()</code>, Stata DTA 파일은
<code>read_stata()</code>를 사용하면 어렵지 않게 불러올 수 있다.</p>
</div>
<div id="html-테이블-불러오기" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> HTML 테이블 불러오기</h2>
<p>웹 페이지를 보다 보면 중요한 정보가 있는 HTML 테이블을 자주 만나게
되는데, 이 테이 블에 있는 데이터를 R로 바로 불러들일 수 있다면 분석
과정에 큰 도움이 될 것이다. 문제 는 웹 페이지에 있는 HTML 테이블이라는
것이 사람들에게 시각적으로 보여지는 측면이 강조되는 대상이어서 거기에
있는 정보를 ‘긁어모아’ 컴퓨터에 입력하는 것이 조금 복잡한 작업이 될 수
있다는 점이다. 그러나 패키지 <code>rvest</code>를 이용하면 비교적 간편하게 HTML
테이블의 데이터를 긁어모아 R에 입력시킬 수 있다.</p>
<p>패키지 <code>rvest</code>에서 HTML 테이블을 불러오는데 필요한 함수는
<code>read_html()</code>과 <code>html_nodes()</code>, <code>html_table()</code>이다. 함수 <code>read_html()</code>은
원하는 HTML 테이블이 있는 웹 페이지를 읽어오는 데 사용된다. HTML
테이블의 내용은 <code>&lt;table&gt;</code> 태그 사이에 존재하 기 때문에 <code>&lt;table&gt;</code>
노드(node)를 찾는 것이 다음 순서인데, 이 작업은 함수 <code>html_nodes()</code>로 할
수 있다. 이어서 선택된 노드의 HTML 테이블 데이터를 R로 불러오는 작업은
함수 <code>html_table()</code>로 하게 된다.</p>
<ul>
<li>예제 1: Wikipedia 웹 페이지에 있는 HTML 테이블 데이터 불러오기</li>
</ul>
<p>Figure <a href="데이터-입력.html#fig:wiki">3.9</a>은 <a href="https://en.wikipedia.org/wiki">Wikipedia</a>에서
“World population”을 검색하면 열리는 웹 페이지에 있는 “10 most densely
populated countries”라는 제목의 HTML 테이블을 보여주고 있다. 검색은
2022년 2월 9일에 실시된 것을 바탕으로 하고 있으며, 차후에 HTML 테이블의
배치가 변경되면 아래 예제 프로그램도 적절히 변경해야 할 것이다.</p>
<div class="figure"><span style="display:block;" id="fig:wiki"></span>
<img src="Figure/wiki_22_02_09_1.PNG" alt="예제 1에서 사용된 HTML 테이블" width="222" />
<p class="caption">
Figure 3.9: 예제 1에서 사용된 HTML 테이블
</p>
</div>
<p>원하는 웹 페이지의 URL을 함수 <code>read_html()</code>에 입력하여 얻은 결과에서 <code>table</code> 노드를
함수 <code>html_nodes()</code>로 찾아보자. 함수 <code>html_nodes()</code>는 결과를 리스트 형태로 출력한다.
모두 26개의 <code>table</code> 노드가 발견되었고, 그 중 처음 6개의 내용을 출력해 보자.</p>
<div class="sourceCode" id="cb622"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb622-1"><a href="데이터-입력.html#cb622-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(rvest)</span></code></pre></div>
<pre><code>
다음의 패키지를 부착합니다: &#39;rvest&#39;</code></pre>
<pre><code>The following object is masked from &#39;package:readr&#39;:

    guess_encoding</code></pre>
<div class="sourceCode" id="cb625"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb625-1"><a href="데이터-입력.html#cb625-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> URL <span class="ot">&lt;-</span> <span class="st">&quot;https://en.wikipedia.org/wiki/World_population&quot;</span></span>
<span id="cb625-2"><a href="데이터-입력.html#cb625-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> web <span class="ot">&lt;-</span> <span class="fu">read_html</span>(URL)</span>
<span id="cb625-3"><a href="데이터-입력.html#cb625-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> tbl <span class="ot">&lt;-</span> <span class="fu">html_nodes</span>(web, <span class="st">&quot;table&quot;</span>)</span>
<span id="cb625-4"><a href="데이터-입력.html#cb625-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">length</span>(tbl)</span></code></pre></div>
<pre><code>[1] 26</code></pre>
<div class="sourceCode" id="cb627"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb627-1"><a href="데이터-입력.html#cb627-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">head</span>(tbl)</span></code></pre></div>
<pre><code>{xml_nodeset (6)}
[1] &lt;table class=&quot;infobox&quot; style=&quot;float: right; font-size:90%&quot;&gt;&lt;tbody&gt;\n&lt;tr&gt;&lt; ...
[2] &lt;table class=&quot;wikitable sortable&quot;&gt;\n&lt;caption&gt;Population by region (2020 e ...
[3] &lt;table class=&quot;wikitable&quot; style=&quot;text-align:center; float:right; clear:rig ...
[4] &lt;table width=&quot;100%&quot;&gt;&lt;tbody&gt;&lt;tr&gt;\n&lt;td valign=&quot;top&quot;&gt; &lt;style data-mw-dedupli ...
[5] &lt;table class=&quot;wikitable sortable plainrowheaders&quot; style=&quot;text-align:right ...
[6] &lt;table class=&quot;wikitable sortable&quot; style=&quot;text-align:right&quot;&gt;\n&lt;caption&gt;10  ...</code></pre>
<p>함수 <code>html_nodes()</code>의 결과로 생성된 리스트 객체인 tbl의 26개 구성요소 중 우리가 원하는 HTML 테이블에 해당되는 노드를 찾아서 함수 <code>html_table()</code>에 입력하면, 해당 테이블 데이터가 R로 입력된다.
문제는 몇 번째 노드가 우리가 원하는 테이블에 관한 것인지 알기가 어렵다는 점이다.
시행착오를 거치면, 원하는 테이블이 6번째 노드에 있다는 것을 알 수 있고, 따라서 <code>html_table(tbl[6])</code>을 실행하면 테이블의 데이터를 불러올 수 있다. 그러나 HTML 테이블이 많은 웹 페이지에서는 다른 체계적인 방법이 필요할 것이다.</p>
<div class="sourceCode" id="cb629"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb629-1"><a href="데이터-입력.html#cb629-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">html_table</span>(tbl[<span class="dv">6</span>])</span></code></pre></div>
<pre><code>[[1]]
# A tibble: 10 x 5
    Rank Country     Population  `Area(km2)` `Density(pop/km2)`
   &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;             
 1     1 Singapore   5,704,000   710         8,033             
 2     2 Bangladesh  172,180,000 143,998     1,196             
 3     3 Palestine   5,266,785   6,020       847               
 4     4 Lebanon     6,856,000   10,452      656               
 5     5 Taiwan      23,604,000  36,193      652               
 6     6 South Korea 51,781,000  99,538      520               
 7     7 Rwanda      12,374,000  26,338      470               
 8     8 Haiti       11,578,000  27,065      428               
 9     9 Netherlands 17,690,000  41,526      426               
10    10 Israel      9,470,000   22,072      429               </code></pre>
<p>웹 페이지에서 HTML 테이블을 체계적으로 찾는 방법 중 하나는 해당 테이블 노드의
XPath를 알아내는 것이다. XPath는 웹 문서에서 원하는 태그나 속성 등을 쉽게 찾기 위해
개발된 것으로 윈도우의 파일 경로와 비슷한 개념이라고 하겠다.</p>
<p>크롬 웹 브라우저를 대상으로 웹 페이지에서 원하는 HTML 테이블의 XPath를 알아내는 방법은 다음과 같다.</p>
<ol style="list-style-type: decimal">
<li>원하는 웹 페이지로 이동</li>
<li>F12 키를 눌러서(또는 <code>마우스 오른쪽 버튼 클릭 &gt; 검사 클릭</code>) 개발자 도구 실행. 창이 분리되며 오른쪽 창에 html 코드가 나타남.</li>
<li>Ctrl + F 키를 눌러서 나타난 찾기 창에 <code>&lt;table</code>을 입력하고 찾기 실행</li>
<li>원하는 테이블에 해당되는 노드를 찾게 되면 Figure <a href="데이터-입력.html#fig:wiki2">3.10</a>에서와 같이 테이블이 하이라이트가 된다. 이어서 마우스 오른쪽 버튼을 클릭</li>
<li>나타난 별도 메뉴에서 <code>Copy &gt; Copy XPath</code>를 클릭</li>
</ol>
<div class="figure"><span style="display:block;" id="fig:wiki2"></span>
<img src="Figure/wiki_22_02_09_2.png" alt="예제 1의 HTML 테이블 XPath 복사" width="576" />
<p class="caption">
Figure 3.10: 예제 1의 HTML 테이블 XPath 복사
</p>
</div>
<p>원하는 HTML 테이블의 XPath의 값은 <code>//*[@id="mw-content-text"]/div[1]/table[5]</code>이 되
며, 이것을 함수 <code>html_nodes()</code>안에 옵션 <code>xpath</code>에 지정하면 된다.</p>
<div class="sourceCode" id="cb631"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb631-1"><a href="데이터-입력.html#cb631-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> X_path <span class="ot">&lt;-</span> <span class="st">&#39;//*[@id=&quot;mw-content-text&quot;]/div[1]/table[5]&#39;</span></span>
<span id="cb631-2"><a href="데이터-입력.html#cb631-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> node_1 <span class="ot">&lt;-</span> <span class="fu">html_nodes</span>(web, <span class="at">xpath =</span> X_path)</span>
<span id="cb631-3"><a href="데이터-입력.html#cb631-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> tbl_1 <span class="ot">&lt;-</span> <span class="fu">html_table</span>(node_1)</span>
<span id="cb631-4"><a href="데이터-입력.html#cb631-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> tbl_1</span></code></pre></div>
<pre><code>[[1]]
# A tibble: 10 x 5
    Rank Country     Population  `Area(km2)` `Density(pop/km2)`
   &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;             
 1     1 Singapore   5,704,000   710         8,033             
 2     2 Bangladesh  172,180,000 143,998     1,196             
 3     3 Palestine   5,266,785   6,020       847               
 4     4 Lebanon     6,856,000   10,452      656               
 5     5 Taiwan      23,604,000  36,193      652               
 6     6 South Korea 51,781,000  99,538      520               
 7     7 Rwanda      12,374,000  26,338      470               
 8     8 Haiti       11,578,000  27,065      428               
 9     9 Netherlands 17,690,000  41,526      426               
10    10 Israel      9,470,000   22,072      429               </code></pre>
<p>함수 <code>html_table()</code>로 생성된 객체 <code>tbl_1</code>은 하나의 데이터 프레임으로 구성된 리스트이다.
변수 이름을 수정하고 입력된 자료를 출력해 보자..</p>
<div class="sourceCode" id="cb633"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb633-1"><a href="데이터-입력.html#cb633-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> top_pop <span class="ot">&lt;-</span> tbl_1[[<span class="dv">1</span>]]</span>
<span id="cb633-2"><a href="데이터-입력.html#cb633-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">names</span>(top_pop) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;rank&quot;</span>, <span class="st">&quot;country&quot;</span>, <span class="st">&quot;pop&quot;</span>, <span class="st">&quot;area&quot;</span>, <span class="st">&quot;density&quot;</span>)</span>
<span id="cb633-3"><a href="데이터-입력.html#cb633-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> top_pop</span></code></pre></div>
<pre><code># A tibble: 10 x 5
    rank country     pop         area    density
   &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt;  
 1     1 Singapore   5,704,000   710     8,033  
 2     2 Bangladesh  172,180,000 143,998 1,196  
 3     3 Palestine   5,266,785   6,020   847    
 4     4 Lebanon     6,856,000   10,452  656    
 5     5 Taiwan      23,604,000  36,193  652    
 6     6 South Korea 51,781,000  99,538  520    
 7     7 Rwanda      12,374,000  26,338  470    
 8     8 Haiti       11,578,000  27,065  428    
 9     9 Netherlands 17,690,000  41,526  426    
10    10 Israel      9,470,000   22,072  429    </code></pre>
<p>변수 <code>pop</code>, <code>area</code>, <code>density</code>이 숫자가 아닌 문자형 벡터로 입력되었음을 알 수 있다. 이것은
숫자에 콤마가 함께 입력되어 있기 때문인데, 이제 변수 <code>pop</code>을 숫자형으로 변환하여
평균을 구해 보자. 숫자형으로 변환하는 방법은 <code>pop</code>에 포함된 콤마를 함수 <code>gsub()</code>를
사용하여 제거하고, 이어서 함수 <code>as.numeric()</code>을 사용하여 유형을 숫자형으로 변환하면
된다.</p>
<div class="sourceCode" id="cb635"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb635-1"><a href="데이터-입력.html#cb635-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> pop <span class="ot">&lt;-</span> top_pop<span class="sc">$</span>pop</span>
<span id="cb635-2"><a href="데이터-입력.html#cb635-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> pop <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;,&quot;</span>, <span class="st">&quot;&quot;</span>, pop)</span>
<span id="cb635-3"><a href="데이터-입력.html#cb635-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">mean</span>(<span class="fu">as.numeric</span>(pop))</span></code></pre></div>
<pre><code>[1] 31650379</code></pre>
<ul>
<li>예제 2: KBO 홈페이지 기록실에 있는 자료 불러오기</li>
</ul>
<p><a href="https://www.koreabaseball.com/Record/Team/Hitter/Basic1.aspx">KBO 홈페이지의 기록실</a>에 있는 자료를 불러와 보자. 자료를 불러온 시점은 2022년 2월이며, 내용은 2021년 KBO 정규
시즌 중 타자들의 팀 기록이다. 불러오고자 하는 HTML 테이블은 Figure <a href="데이터-입력.html#fig:KBO">3.11</a>에서 볼 수 있다. 해당 웹 페이지에는 하나의 HTML 테이블만이 있기 때문에 굳이 XPath를 복사해야
할 필요는 없다. 문제는 한글이 포함된 HTML 테이블을 불러올 때 종종 오류가 발생할 수
있다는 점이다. 이러한 오류를 어떻게 해결할 수 있는지 살펴보자.</p>
<div class="figure"><span style="display:block;" id="fig:KBO"></span>
<img src="Figure/KBO.PNG" alt="예제 2에서 사용된 HTML 테이블" width="566" />
<p class="caption">
Figure 3.11: 예제 2에서 사용된 HTML 테이블
</p>
</div>
<div class="sourceCode" id="cb637"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb637-1"><a href="데이터-입력.html#cb637-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> URL_2 <span class="ot">&lt;-</span> <span class="st">&quot;https://www.koreabaseball.com/Record/Team/Hitter/Basic1.aspx&quot;</span></span>
<span id="cb637-2"><a href="데이터-입력.html#cb637-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> web_2 <span class="ot">&lt;-</span> <span class="fu">read_html</span>(URL_2)</span>
<span id="cb637-3"><a href="데이터-입력.html#cb637-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> node_2 <span class="ot">&lt;-</span> <span class="fu">html_nodes</span>(web_2, <span class="st">&quot;table&quot;</span>)</span>
<span id="cb637-4"><a href="데이터-입력.html#cb637-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> tbl_2 <span class="ot">&lt;-</span> <span class="fu">html_table</span>(node_2)[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>Error in type.convert.default(x, as.is = TRUE, dec = dec, na.strings = na.strings): &#39;&lt;ed&gt;&lt;95&gt;&lt;a9&gt;怨&lt;84&gt;&#39;에서 유효하지 않은 멀티바이트 문자열이 있습니다</code></pre>
<p>함수 <code>html_table()</code>에서 발생한 오류는 한글/영문의 locale로 인한 것이다. 우선 locale을
영문으로 바꾸고, 다시 함수 <code>html_table()</code>을 실행시켜 보자.</p>
<div class="sourceCode" id="cb639"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb639-1"><a href="데이터-입력.html#cb639-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">Sys.setlocale</span>(<span class="st">&quot;LC_ALL&quot;</span>, <span class="st">&quot;English&quot;</span>)</span></code></pre></div>
<pre><code>[1] &quot;LC_COLLATE=English_United States.1252;LC_CTYPE=English_United States.1252;LC_MONETARY=English_United States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252&quot;</code></pre>
<div class="sourceCode" id="cb641"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb641-1"><a href="데이터-입력.html#cb641-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> tbl_2 <span class="ot">&lt;-</span> <span class="fu">html_table</span>(node_2)[[<span class="dv">1</span>]]</span>
<span id="cb641-2"><a href="데이터-입력.html#cb641-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">head</span>(tbl_2)</span></code></pre></div>
<pre><code># A tibble: 6 x 15
  `&lt;U+C21C&gt;&lt;U+C704&gt;` `&lt;U+D300&gt;&lt;U+BA85&gt;`   AVG     G    PA    AB     R     H  `2B`  `3B`    HR    TB
  &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
1 1      &lt;U+B86F&gt;&lt;U+B370&gt;   0.278   144  5726  5009   727  1393   266    10   107  2000
2 2      &lt;U+B450&gt;&lt;U+C0B0&gt;   0.268   144  5645  4900   738  1314   235    17   110  1913
3 3      &lt;U+C0BC&gt;&lt;U+C131&gt;   0.267   144  5552  4836   712  1292   204    18   133  1931
4 4      KT     0.265   144  5627  4810   719  1276   219    11   106  1835
5 5      SSG    0.261   144  5736  4899   755  1278   204    13   185  2063
6 6      NC     0.261   144  5532  4808   702  1254   203    17   170  2001
# ... with 3 more variables: RBI &lt;int&gt;, SAC &lt;int&gt;, SF &lt;int&gt;</code></pre>
<p>오류문제는 해결되었으나, 불러온 데이터에 이상한 문자가 포함되어 있음을 알 수 있다.
이것을 정상적인 한글로 보이게 하려면, 다시 locale을 한글로 바꾸면 된다.
이어서 합계가 들어간 마지막 행을 삭제하고, 결과를 출력해 보자.</p>
<div class="sourceCode" id="cb643"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb643-1"><a href="데이터-입력.html#cb643-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">Sys.setlocale</span>(<span class="st">&quot;LC_ALL&quot;</span>, <span class="st">&quot;Korean&quot;</span>)</span></code></pre></div>
<pre><code>[1] &quot;LC_COLLATE=Korean_Korea.949;LC_CTYPE=Korean_Korea.949;LC_MONETARY=Korean_Korea.949;LC_NUMERIC=C;LC_TIME=Korean_Korea.949&quot;</code></pre>
<div class="sourceCode" id="cb645"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb645-1"><a href="데이터-입력.html#cb645-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> tbl_2 <span class="ot">&lt;-</span> tbl_2[<span class="sc">-</span><span class="dv">11</span>,]</span>
<span id="cb645-2"><a href="데이터-입력.html#cb645-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> tbl_2</span></code></pre></div>
<pre><code># A tibble: 10 x 15
   순위  팀명    AVG     G    PA    AB     R     H  `2B`  `3B`    HR    TB   RBI
   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
 1 1     롯데  0.278   144  5726  5009   727  1393   266    10   107  2000   697
 2 2     두산  0.268   144  5645  4900   738  1314   235    17   110  1913   698
 3 3     삼성  0.267   144  5552  4836   712  1292   204    18   133  1931   669
 4 4     KT    0.265   144  5627  4810   719  1276   219    11   106  1835   673
 5 5     SSG   0.261   144  5736  4899   755  1278   204    13   185  2063   712
 6 6     NC    0.261   144  5532  4808   702  1254   203    17   170  2001   670
 7 7     키움  0.259   144  5653  4874   722  1262   244    28    91  1835   671
 8 8     LG    0.25    144  5533  4750   654  1188   210    11   110  1750   621
 9 9     KIA   0.248   144  5577  4831   568  1198   183    21    66  1621   546
10 10    한화  0.237   144  5495  4685   599  1111   213    17    80  1598   554
# ... with 2 more variables: SAC &lt;int&gt;, SF &lt;int&gt;</code></pre>
<p>일반적으로 웹 페이지에 있는 HTML 테이블을 R로 불러온 후에도 실제 분석 데이터로
사용하기 위해서는 많은 추가 작업이 필요하게 된다.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-structure.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="dplyr에-의한-데이터-다듬기.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
