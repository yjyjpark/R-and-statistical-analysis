<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Tidyverse를 활용한 데이터 다루기 | R과 통계분석</title>
  <meta name="description" content="Chapter 6 Tidyverse를 활용한 데이터 다루기 | R과 통계분석" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Tidyverse를 활용한 데이터 다루기 | R과 통계분석" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Tidyverse를 활용한 데이터 다루기 | R과 통계분석" />
  
  
  

<meta name="author" content="박동련" />


<meta name="date" content="2022-07-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="chapter-ggplot2.html"/>
<link rel="next" href="chapter-programming.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>소개하기</a></li>
<li class="chapter" data-level="1" data-path="r-시작하기.html"><a href="r-시작하기.html"><i class="fa fa-check"></i><b>1</b> R 시작하기</a>
<ul>
<li class="chapter" data-level="1.1" data-path="r-시작하기.html"><a href="r-시작하기.html#r의-소개"><i class="fa fa-check"></i><b>1.1</b> R의 소개</a></li>
<li class="chapter" data-level="1.2" data-path="r-시작하기.html"><a href="r-시작하기.html#r의-설치"><i class="fa fa-check"></i><b>1.2</b> R의 설치</a></li>
<li class="chapter" data-level="1.3" data-path="r-시작하기.html"><a href="r-시작하기.html#rstudio의-설치-및-r의-실행"><i class="fa fa-check"></i><b>1.3</b> RStudio의 설치 및 R의 실행</a></li>
<li class="chapter" data-level="1.4" data-path="r-시작하기.html"><a href="r-시작하기.html#작업공간"><i class="fa fa-check"></i><b>1.4</b> 작업공간</a></li>
<li class="chapter" data-level="1.5" data-path="r-시작하기.html"><a href="r-시작하기.html#스크립트-파일의-활용"><i class="fa fa-check"></i><b>1.5</b> 스크립트 파일의 활용</a></li>
<li class="chapter" data-level="1.6" data-path="r-시작하기.html"><a href="r-시작하기.html#section-batch"><i class="fa fa-check"></i><b>1.6</b> 일괄처리</a></li>
<li class="chapter" data-level="1.7" data-path="r-시작하기.html"><a href="r-시작하기.html#section-package"><i class="fa fa-check"></i><b>1.7</b> R의 확장: 패키지</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="r-시작하기.html"><a href="r-시작하기.html#패키지의-종류"><i class="fa fa-check"></i><b>1.7.1</b> 패키지의 종류</a></li>
<li class="chapter" data-level="1.7.2" data-path="r-시작하기.html"><a href="r-시작하기.html#패키지의-설치-및-사용"><i class="fa fa-check"></i><b>1.7.2</b> 패키지의 설치 및 사용</a></li>
<li class="chapter" data-level="1.7.3" data-path="r-시작하기.html"><a href="r-시작하기.html#패키지-tidyverse의-소개"><i class="fa fa-check"></i><b>1.7.3</b> 패키지 <code>tidyverse</code>의 소개</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-structure.html"><a href="data-structure.html"><i class="fa fa-check"></i><b>2</b> R 데이터 구조</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-structure.html"><a href="data-structure.html#벡터"><i class="fa fa-check"></i><b>2.1</b> 벡터</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data-structure.html"><a href="data-structure.html#벡터의-기본-특성"><i class="fa fa-check"></i><b>2.1.1</b> 벡터의 기본 특성</a></li>
<li class="chapter" data-level="2.1.2" data-path="data-structure.html"><a href="data-structure.html#다양한-형태를-갖는-벡터의-생성"><i class="fa fa-check"></i><b>2.1.2</b> 다양한 형태를 갖는 벡터의 생성</a></li>
<li class="chapter" data-level="2.1.3" data-path="data-structure.html"><a href="data-structure.html#문자열을-위한-함수"><i class="fa fa-check"></i><b>2.1.3</b> 문자열을 위한 함수</a></li>
<li class="chapter" data-level="2.1.4" data-path="data-structure.html"><a href="data-structure.html#벡터의-연산"><i class="fa fa-check"></i><b>2.1.4</b> 벡터의 연산</a></li>
<li class="chapter" data-level="2.1.5" data-path="data-structure.html"><a href="data-structure.html#vector-compare"><i class="fa fa-check"></i><b>2.1.5</b> 벡터의 비교</a></li>
<li class="chapter" data-level="2.1.6" data-path="data-structure.html"><a href="data-structure.html#벡터의-인덱싱"><i class="fa fa-check"></i><b>2.1.6</b> 벡터의 인덱싱</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-structure.html"><a href="data-structure.html#요인"><i class="fa fa-check"></i><b>2.2</b> 요인</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data-structure.html"><a href="data-structure.html#요인의-기본-특성"><i class="fa fa-check"></i><b>2.2.1</b> 요인의 기본 특성</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-structure.html"><a href="data-structure.html#숫자형-벡터를-요인으로-변환"><i class="fa fa-check"></i><b>2.2.2</b> 숫자형 벡터를 요인으로 변환</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-structure.html"><a href="data-structure.html#날짜"><i class="fa fa-check"></i><b>2.3</b> 날짜</a></li>
<li class="chapter" data-level="2.4" data-path="data-structure.html"><a href="data-structure.html#행렬-및-배열"><i class="fa fa-check"></i><b>2.4</b> 행렬 및 배열</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="data-structure.html"><a href="data-structure.html#행렬과-배열의-기본-특성"><i class="fa fa-check"></i><b>2.4.1</b> 행렬과 배열의 기본 특성</a></li>
<li class="chapter" data-level="2.4.2" data-path="data-structure.html"><a href="data-structure.html#행렬의-연산"><i class="fa fa-check"></i><b>2.4.2</b> 행렬의 연산</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="data-structure.html"><a href="data-structure.html#section-dataframe"><i class="fa fa-check"></i><b>2.5</b> 데이터 프레임</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="data-structure.html"><a href="data-structure.html#데이터-프레임의-생성"><i class="fa fa-check"></i><b>2.5.1</b> 데이터 프레임의 생성</a></li>
<li class="chapter" data-level="2.5.2" data-path="data-structure.html"><a href="data-structure.html#데이터-프레임의-인덱싱"><i class="fa fa-check"></i><b>2.5.2</b> 데이터 프레임의 인덱싱</a></li>
<li class="chapter" data-level="2.5.3" data-path="data-structure.html"><a href="data-structure.html#함수-with"><i class="fa fa-check"></i><b>2.5.3</b> 함수 <code>with()</code></a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="data-structure.html"><a href="data-structure.html#tibble-개선된-형태의-데이터-프레임"><i class="fa fa-check"></i><b>2.6</b> Tibble: 개선된 형태의 데이터 프레임</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="data-structure.html"><a href="data-structure.html#tibble-생성"><i class="fa fa-check"></i><b>2.6.1</b> Tibble 생성</a></li>
<li class="chapter" data-level="2.6.2" data-path="data-structure.html"><a href="data-structure.html#tibble과-전통적인-데이터-프레임의-차이"><i class="fa fa-check"></i><b>2.6.2</b> Tibble과 전통적인 데이터 프레임의 차이</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="data-structure.html"><a href="data-structure.html#section-list"><i class="fa fa-check"></i><b>2.7</b> 리스트</a></li>
<li class="chapter" data-level="2.8" data-path="data-structure.html"><a href="data-structure.html#연습문제"><i class="fa fa-check"></i><b>2.8</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="데이터-입력.html"><a href="데이터-입력.html"><i class="fa fa-check"></i><b>3</b> 데이터 입력</a>
<ul>
<li class="chapter" data-level="3.1" data-path="데이터-입력.html"><a href="데이터-입력.html#텍스트-파일-불러오기-패키지-readr-함수의-활용"><i class="fa fa-check"></i><b>3.1</b> 텍스트 파일 불러오기: 패키지 <code>readr</code> 함수의 활용</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="데이터-입력.html"><a href="데이터-입력.html#함수-read_table로-데이터-파일-불러오기"><i class="fa fa-check"></i><b>3.1.1</b> 함수 <code>read_table()</code>로 데이터 파일 불러오기</a></li>
<li class="chapter" data-level="3.1.2" data-path="데이터-입력.html"><a href="데이터-입력.html#함수-read_csv로-csv-데이터-파일-불러오기"><i class="fa fa-check"></i><b>3.1.2</b> 함수 <code>read_csv()</code>로 CSV 데이터 파일 불러오기</a></li>
<li class="chapter" data-level="3.1.3" data-path="데이터-입력.html"><a href="데이터-입력.html#함수-read_fwf로-고정-포맷-구조를-갖는-데이터-파일-불러오기"><i class="fa fa-check"></i><b>3.1.3</b> 함수 <code>read_fwf()</code>로 고정 포맷 구조를 갖는 데이터 파일 불러오기</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="데이터-입력.html"><a href="데이터-입력.html#excel-파일-불러오기"><i class="fa fa-check"></i><b>3.2</b> Excel 파일 불러오기</a></li>
<li class="chapter" data-level="3.3" data-path="데이터-입력.html"><a href="데이터-입력.html#sas-데이터-파일-불러오기"><i class="fa fa-check"></i><b>3.3</b> SAS 데이터 파일 불러오기</a></li>
<li class="chapter" data-level="3.4" data-path="데이터-입력.html"><a href="데이터-입력.html#html-테이블-불러오기"><i class="fa fa-check"></i><b>3.4</b> HTML 테이블 불러오기</a></li>
<li class="chapter" data-level="3.5" data-path="데이터-입력.html"><a href="데이터-입력.html#연습문제-1"><i class="fa fa-check"></i><b>3.5</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html"><i class="fa fa-check"></i><b>4</b> <code>dplyr</code>에 의한 데이터 다듬기</a>
<ul>
<li class="chapter" data-level="4.1" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#행을-작업-대상으로-하는-함수"><i class="fa fa-check"></i><b>4.1</b> 행을 작업 대상으로 하는 함수</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#조건에-의한-행-선택-filter"><i class="fa fa-check"></i><b>4.1.1</b> 조건에 의한 행 선택: <code>filter()</code></a></li>
<li class="chapter" data-level="4.1.2" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#위치에-의한-행-선택-slice-및-그와-관련된-함수"><i class="fa fa-check"></i><b>4.1.2</b> 위치에 의한 행 선택: <code>slice()</code> 및 그와 관련된 함수</a></li>
<li class="chapter" data-level="4.1.3" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#행의-정렬-arrange"><i class="fa fa-check"></i><b>4.1.3</b> 행의 정렬: <code>arrange()</code></a></li>
<li class="chapter" data-level="4.1.4" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#중복된-행의-제거-distinct"><i class="fa fa-check"></i><b>4.1.4</b> 중복된 행의 제거: <code>distinct()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#열을-작업-대상으로-하는-함수"><i class="fa fa-check"></i><b>4.2</b> 열을 작업 대상으로 하는 함수</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#열의-선택-select"><i class="fa fa-check"></i><b>4.2.1</b> 열의 선택: <code>select()</code></a></li>
<li class="chapter" data-level="4.2.2" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#열-이름-변경-rename과-rename_with"><i class="fa fa-check"></i><b>4.2.2</b> 열 이름 변경: <code>rename()</code>과 <code>rename_with()</code></a></li>
<li class="chapter" data-level="4.2.3" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#열의-위치-변경-relocate"><i class="fa fa-check"></i><b>4.2.3</b> 열의 위치 변경: <code>relocate()</code></a></li>
<li class="chapter" data-level="4.2.4" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#새로운-열의-추가-mutate와-transmute"><i class="fa fa-check"></i><b>4.2.4</b> 새로운 열의 추가: <code>mutate()</code>와 <code>transmute()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#여러-행-자료의-요약-summarise"><i class="fa fa-check"></i><b>4.3</b> 여러 행 자료의 요약: <code>summarise()</code></a></li>
<li class="chapter" data-level="4.4" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#그룹-데이터-프레임"><i class="fa fa-check"></i><b>4.4</b> 그룹 데이터 프레임</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#그룹-데이터-프레임의-생성-group_by"><i class="fa fa-check"></i><b>4.4.1</b> 그룹 데이터 프레임의 생성: <code>group_by()</code></a></li>
<li class="chapter" data-level="4.4.2" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#그룹-데이터-프레임에서-기본-함수들의-작동-방식"><i class="fa fa-check"></i><b>4.4.2</b> 그룹 데이터 프레임에서 기본 함수들의 작동 방식</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#다수의-열을-대상으로-하는-작업-across"><i class="fa fa-check"></i><b>4.5</b> 다수의 열을 대상으로 하는 작업: <code>across()</code></a></li>
<li class="chapter" data-level="4.6" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#행-단위-작업-rowwise"><i class="fa fa-check"></i><b>4.6</b> 행 단위 작업: <code>rowwise()</code></a></li>
<li class="chapter" data-level="4.7" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#연습문제-2"><i class="fa fa-check"></i><b>4.7</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="chapter-ggplot2.html"><a href="chapter-ggplot2.html"><i class="fa fa-check"></i><b>5</b> <code>ggplot2</code>에 의한 자료 시각화</a>
<ul>
<li class="chapter" data-level="5.1" data-path="chapter-ggplot2.html"><a href="chapter-ggplot2.html#ggplot2-시작하기"><i class="fa fa-check"></i><b>5.1</b> <code>ggplot2</code> 시작하기</a></li>
<li class="chapter" data-level="5.2" data-path="chapter-ggplot2.html"><a href="chapter-ggplot2.html#시각적-요소와의-연결-mapping"><i class="fa fa-check"></i><b>5.2</b> 시각적 요소와의 연결: Mapping</a></li>
<li class="chapter" data-level="5.3" data-path="chapter-ggplot2.html"><a href="chapter-ggplot2.html#그룹별-그래프-작성-facet"><i class="fa fa-check"></i><b>5.3</b> 그룹별 그래프 작성: Facet</a></li>
<li class="chapter" data-level="5.4" data-path="chapter-ggplot2.html"><a href="chapter-ggplot2.html#기하-객체-geometric-object"><i class="fa fa-check"></i><b>5.4</b> 기하 객체: Geometric object</a></li>
<li class="chapter" data-level="5.5" data-path="chapter-ggplot2.html"><a href="chapter-ggplot2.html#통계적-변환-statistical-transformation"><i class="fa fa-check"></i><b>5.5</b> 통계적 변환: Statistical transformation</a></li>
<li class="chapter" data-level="5.6" data-path="chapter-ggplot2.html"><a href="chapter-ggplot2.html#위치-조정-position-adjustments"><i class="fa fa-check"></i><b>5.6</b> 위치 조정: Position adjustments</a></li>
<li class="chapter" data-level="5.7" data-path="chapter-ggplot2.html"><a href="chapter-ggplot2.html#좌표계-coordinate-system"><i class="fa fa-check"></i><b>5.7</b> 좌표계: Coordinate system</a></li>
<li class="chapter" data-level="5.8" data-path="chapter-ggplot2.html"><a href="chapter-ggplot2.html#연습문제-3"><i class="fa fa-check"></i><b>5.8</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="ch6.html"><a href="ch6.html"><i class="fa fa-check"></i><b>6</b> Tidyverse를 활용한 데이터 다루기</a>
<ul>
<li class="chapter" data-level="6.1" data-path="ch6.html"><a href="ch6.html#tidyr로-tidy-데이터-만들기"><i class="fa fa-check"></i><b>6.1</b> <code>tidyr</code>로 tidy 데이터 만들기</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="ch6.html"><a href="ch6.html#데이터-피벗-pivot_longer와-pivot_wider"><i class="fa fa-check"></i><b>6.1.1</b> 데이터 피벗: <code>pivot_longer()</code>와 <code>pivot_wider()</code></a></li>
<li class="chapter" data-level="6.1.2" data-path="ch6.html"><a href="ch6.html#문자형-열의-결합과-분리-separate와-unite"><i class="fa fa-check"></i><b>6.1.2</b> 문자형 열의 결합과 분리: <code>separate()</code>와 <code>unite()</code></a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="ch6.html"><a href="ch6.html#dplyr에-의한-데이터-결합"><i class="fa fa-check"></i><b>6.2</b> <code>dplyr</code>에 의한 데이터 결합</a></li>
<li class="chapter" data-level="6.3" data-path="ch6.html"><a href="ch6.html#stringr에-의한-문자-다루기"><i class="fa fa-check"></i><b>6.3</b> <code>stringr</code>에 의한 문자 다루기</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="ch6.html"><a href="ch6.html#stringr의-함수"><i class="fa fa-check"></i><b>6.3.1</b> <code>stringr</code>의 함수</a></li>
<li class="chapter" data-level="6.3.2" data-path="ch6.html"><a href="ch6.html#정규-표현식과-stringr의-함수"><i class="fa fa-check"></i><b>6.3.2</b> 정규 표현식과 <code>stringr</code>의 함수</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="chapter-programming.html"><a href="chapter-programming.html"><i class="fa fa-check"></i><b>7</b> R에서의 프로그래밍</a>
<ul>
<li class="chapter" data-level="7.1" data-path="chapter-programming.html"><a href="chapter-programming.html#사용자-정의-함수"><i class="fa fa-check"></i><b>7.1</b> 사용자 정의 함수</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="chapter-programming.html"><a href="chapter-programming.html#함수의-정의"><i class="fa fa-check"></i><b>7.1.1</b> 함수의 정의</a></li>
<li class="chapter" data-level="7.1.2" data-path="chapter-programming.html"><a href="chapter-programming.html#변수"><i class="fa fa-check"></i><b>7.1.2</b> 변수</a></li>
<li class="chapter" data-level="7.1.3" data-path="chapter-programming.html"><a href="chapter-programming.html#변수-지정"><i class="fa fa-check"></i><b>7.1.3</b> 변수 지정</a></li>
<li class="chapter" data-level="7.1.4" data-path="chapter-programming.html"><a href="chapter-programming.html#결과의-출력"><i class="fa fa-check"></i><b>7.1.4</b> 결과의 출력</a></li>
<li class="chapter" data-level="7.1.5" data-path="chapter-programming.html"><a href="chapter-programming.html#유효-범위"><i class="fa fa-check"></i><b>7.1.5</b> 유효 범위</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="chapter-programming.html"><a href="chapter-programming.html#조건-연산"><i class="fa fa-check"></i><b>7.2</b> 조건 연산</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="chapter-programming.html"><a href="chapter-programming.html#함수-if에-의한-조건-연산"><i class="fa fa-check"></i><b>7.2.1</b> 함수 <code>if()</code>에 의한 조건 연산</a></li>
<li class="chapter" data-level="7.2.2" data-path="chapter-programming.html"><a href="chapter-programming.html#함수-ifelse에-의한-조건-연산"><i class="fa fa-check"></i><b>7.2.2</b> 함수 <code>ifelse()</code>에 의한 조건 연산</a></li>
<li class="chapter" data-level="7.2.3" data-path="chapter-programming.html"><a href="chapter-programming.html#함수-switch에-의한-조건-연산"><i class="fa fa-check"></i><b>7.2.3</b> 함수 <code>switch()</code>에 의한 조건 연산</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="chapter-programming.html"><a href="chapter-programming.html#루프-연산"><i class="fa fa-check"></i><b>7.3</b> 루프 연산</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="chapter-programming.html"><a href="chapter-programming.html#for-루프"><i class="fa fa-check"></i><b>7.3.1</b> for 루프</a></li>
<li class="chapter" data-level="7.3.2" data-path="chapter-programming.html"><a href="chapter-programming.html#while-루프"><i class="fa fa-check"></i><b>7.3.2</b> while 루프</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="chapter-programming.html"><a href="chapter-programming.html#함수형-프로그래밍"><i class="fa fa-check"></i><b>7.4</b> 함수형 프로그래밍</a></li>
<li class="chapter" data-level="7.5" data-path="chapter-programming.html"><a href="chapter-programming.html#함수형-프로그래밍으로-행렬과-데이터-프레임-다루기"><i class="fa fa-check"></i><b>7.5</b> 함수형 프로그래밍으로 행렬과 데이터 프레임 다루기</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="chapter-programming.html"><a href="chapter-programming.html#행렬에-함수형-프로그래밍-적용하기"><i class="fa fa-check"></i><b>7.5.1</b> 행렬에 함수형 프로그래밍 적용하기</a></li>
<li class="chapter" data-level="7.5.2" data-path="chapter-programming.html"><a href="chapter-programming.html#데이터-프레임에-함수형-프로그래밍-적용하기"><i class="fa fa-check"></i><b>7.5.2</b> 데이터 프레임에 함수형 프로그래밍 적용하기</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="chapter-programming.html"><a href="chapter-programming.html#purrr에-의한-프로그래밍"><i class="fa fa-check"></i><b>7.6</b> <code>purrr</code>에 의한 프로그래밍</a></li>
<li class="chapter" data-level="7.7" data-path="chapter-programming.html"><a href="chapter-programming.html#연습문제-4"><i class="fa fa-check"></i><b>7.7</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="chapter-distribution.html"><a href="chapter-distribution.html"><i class="fa fa-check"></i><b>8</b> 확률분포</a>
<ul>
<li class="chapter" data-level="8.1" data-path="chapter-distribution.html"><a href="chapter-distribution.html#r에서의-확률분포-이름"><i class="fa fa-check"></i><b>8.1</b> R에서의 확률분포 이름</a></li>
<li class="chapter" data-level="8.2" data-path="chapter-distribution.html"><a href="chapter-distribution.html#연속형-확률분포"><i class="fa fa-check"></i><b>8.2</b> 연속형 확률분포</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="chapter-distribution.html"><a href="chapter-distribution.html#정규분포"><i class="fa fa-check"></i><b>8.2.1</b> 정규분포</a></li>
<li class="chapter" data-level="8.2.2" data-path="chapter-distribution.html"><a href="chapter-distribution.html#지수분포"><i class="fa fa-check"></i><b>8.2.2</b> 지수분포</a></li>
<li class="chapter" data-level="8.2.3" data-path="chapter-distribution.html"><a href="chapter-distribution.html#균등분포"><i class="fa fa-check"></i><b>8.2.3</b> 균등분포</a></li>
<li class="chapter" data-level="8.2.4" data-path="chapter-distribution.html"><a href="chapter-distribution.html#t-분포"><i class="fa fa-check"></i><b>8.2.4</b> t-분포</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="chapter-distribution.html"><a href="chapter-distribution.html#이산형-분포"><i class="fa fa-check"></i><b>8.3</b> 이산형 분포</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="chapter-distribution.html"><a href="chapter-distribution.html#베르누이-분포와-이항분포"><i class="fa fa-check"></i><b>8.3.1</b> 베르누이 분포와 이항분포</a></li>
<li class="chapter" data-level="8.3.2" data-path="chapter-distribution.html"><a href="chapter-distribution.html#포아송-분포"><i class="fa fa-check"></i><b>8.3.2</b> 포아송 분포</a></li>
<li class="chapter" data-level="8.3.3" data-path="chapter-distribution.html"><a href="chapter-distribution.html#초기하분포"><i class="fa fa-check"></i><b>8.3.3</b> 초기하분포</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="chapter-distribution.html"><a href="chapter-distribution.html#모의실험"><i class="fa fa-check"></i><b>8.4</b> 모의실험</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="chapter-EDA.html"><a href="chapter-EDA.html"><i class="fa fa-check"></i><b>9</b> 자료 탐색</a>
<ul>
<li class="chapter" data-level="9.1" data-path="chapter-EDA.html"><a href="chapter-EDA.html#일변량-범주형-자료-탐색"><i class="fa fa-check"></i><b>9.1</b> 일변량 범주형 자료 탐색</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="chapter-EDA.html"><a href="chapter-EDA.html#막대그래프"><i class="fa fa-check"></i><b>9.1.1</b> 막대그래프</a></li>
<li class="chapter" data-level="9.1.2" data-path="chapter-EDA.html"><a href="chapter-EDA.html#파이그래프"><i class="fa fa-check"></i><b>9.1.2</b> 파이그래프</a></li>
<li class="chapter" data-level="9.1.3" data-path="chapter-EDA.html"><a href="chapter-EDA.html#cleveland의-점그래프"><i class="fa fa-check"></i><b>9.1.3</b> Cleveland의 점그래프</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="chapter-EDA.html"><a href="chapter-EDA.html#이변량-및-다변량-범주형-자료-탐색"><i class="fa fa-check"></i><b>9.2</b> 이변량 및 다변량 범주형 자료 탐색</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="chapter-EDA.html"><a href="chapter-EDA.html#분할표-작성"><i class="fa fa-check"></i><b>9.2.1</b> 분할표 작성</a></li>
<li class="chapter" data-level="9.2.2" data-path="chapter-EDA.html"><a href="chapter-EDA.html#이변량-및-다변량-범주형-자료를-위한-그래프"><i class="fa fa-check"></i><b>9.2.2</b> 이변량 및 다변량 범주형 자료를 위한 그래프</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="chapter-EDA.html"><a href="chapter-EDA.html#일변량-연속형-자료-탐색"><i class="fa fa-check"></i><b>9.3</b> 일변량 연속형 자료 탐색</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="chapter-EDA.html"><a href="chapter-EDA.html#줄기-잎-그림"><i class="fa fa-check"></i><b>9.3.1</b> 줄기-잎 그림</a></li>
<li class="chapter" data-level="9.3.2" data-path="chapter-EDA.html"><a href="chapter-EDA.html#section-boxplot"><i class="fa fa-check"></i><b>9.3.2</b> 상자그림</a></li>
<li class="chapter" data-level="9.3.3" data-path="chapter-EDA.html"><a href="chapter-EDA.html#히스토그램"><i class="fa fa-check"></i><b>9.3.3</b> 히스토그램</a></li>
<li class="chapter" data-level="9.3.4" data-path="chapter-EDA.html"><a href="chapter-EDA.html#section-prob-density"><i class="fa fa-check"></i><b>9.3.4</b> 확률밀도함수 그래프</a></li>
<li class="chapter" data-level="9.3.5" data-path="chapter-EDA.html"><a href="chapter-EDA.html#기타-유용한-그래프"><i class="fa fa-check"></i><b>9.3.5</b> 기타 유용한 그래프</a></li>
<li class="chapter" data-level="9.3.6" data-path="chapter-EDA.html"><a href="chapter-EDA.html#일변량-연속형-자료의-요약통계"><i class="fa fa-check"></i><b>9.3.6</b> 일변량 연속형 자료의 요약통계</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="chapter-EDA.html"><a href="chapter-EDA.html#이변량-연속형-자료-탐색"><i class="fa fa-check"></i><b>9.4</b> 이변량 연속형 자료 탐색</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="chapter-EDA.html"><a href="chapter-EDA.html#연속형-변수의-분포를-비교하기-위한-그래프"><i class="fa fa-check"></i><b>9.4.1</b> 연속형 변수의 분포를 비교하기 위한 그래프</a></li>
<li class="chapter" data-level="9.4.2" data-path="chapter-EDA.html"><a href="chapter-EDA.html#연속형-변수의-관계-탐색을-위한-그래프"><i class="fa fa-check"></i><b>9.4.2</b> 연속형 변수의 관계 탐색을 위한 그래프</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="chapter-EDA.html"><a href="chapter-EDA.html#연습문제-5"><i class="fa fa-check"></i><b>9.5</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="참고-문헌.html"><a href="참고-문헌.html"><i class="fa fa-check"></i>참고 문헌</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R과 통계분석</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ch6" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Chapter 6</span> Tidyverse를 활용한 데이터 다루기<a href="ch6.html#ch6" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>R의 모습은 tidyverse 이전과 이후로 완전히 구분된다고 할 수 있다. 데이터 다루기와 그래프 성능이 비교할 수 없을 만큼 향상되었고, 복잡한 분석 과정이 대폭 단순화되어 매우 효율적인 분석이 가능해졌다. 이러한 발전으로 인하여 Data science를 위한 최적의 프로그램으로 자리매김을 확고하게 했다고 할 수 있다. 이 장에서는 core tidyverse에 속한 패키지 중 자료의 형태를 통계분석이 가능하도록 다듬는 작업에 사용되는 <code>tidyr</code>, 문자 다루기에 유용한 <code>stringr</code>, 그리고 자료 결합에 유용한 <code>dplyr</code>에 속한 몇몇 함수들의 사용법을 살펴보겠다.</p>
<div id="tidyr로-tidy-데이터-만들기" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> <code>tidyr</code>로 tidy 데이터 만들기<a href="ch6.html#tidyr로-tidy-데이터-만들기" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Tidy 데이터 세트는 하나의 열이 한 변수의 자료로만 이루어져 있고, 하나의 행은 한 관찰값의 자료로만 이루어져 있는 데이터 세트를 의미한다. Tidy 자료의 예로서 패키지 <code>tidyr</code>에 있는 데이터 프레임 <code>table1</code>을 살펴보자.</p>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="ch6.html#cb412-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(tidyverse)</span>
<span id="cb412-2"><a href="ch6.html#cb412-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> table1</span>
<span id="cb412-3"><a href="ch6.html#cb412-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 6 × 4</span></span>
<span id="cb412-4"><a href="ch6.html#cb412-4" aria-hidden="true" tabindex="-1"></a>  country      year  cases population</span>
<span id="cb412-5"><a href="ch6.html#cb412-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>       <span class="er">&lt;</span>int<span class="sc">&gt;</span>  <span class="er">&lt;</span>int<span class="sc">&gt;</span>      <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb412-6"><a href="ch6.html#cb412-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> Afghanistan  <span class="dv">1999</span>    <span class="dv">745</span>   <span class="dv">19987071</span></span>
<span id="cb412-7"><a href="ch6.html#cb412-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> Afghanistan  <span class="dv">2000</span>   <span class="dv">2666</span>   <span class="dv">20595360</span></span>
<span id="cb412-8"><a href="ch6.html#cb412-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> Brazil       <span class="dv">1999</span>  <span class="dv">37737</span>  <span class="dv">172006362</span></span>
<span id="cb412-9"><a href="ch6.html#cb412-9" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> Brazil       <span class="dv">2000</span>  <span class="dv">80488</span>  <span class="dv">174504898</span></span>
<span id="cb412-10"><a href="ch6.html#cb412-10" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> China        <span class="dv">1999</span> <span class="dv">212258</span> <span class="dv">1272915272</span></span>
<span id="cb412-11"><a href="ch6.html#cb412-11" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span> China        <span class="dv">2000</span> <span class="dv">213766</span> <span class="dv">1280428583</span></span></code></pre></div>
<p>적절한 통계분석을 실시하기 위해 반드시 갖추어야 할 데이터 세트의 형태라고 할 수 있다. 하지만 실제 접하게 될 데이터 세트는 tidy 데이터가 아닌 경우가 상당히 많이 있으며, 이런 경우 데이터 세트를 통계분석이 가능한 형태로 변경하는데 많은 시간과 노력이 필요하게 된다.</p>
<p>패키지 tidyr은 통계분석이 불가능한 온갖 형태의 데이터 세트를 tidy 데이터 세트로 전환하는 작업을 수행하기 위한 패키지이다.</p>
<div id="데이터-피벗-pivot_longer와-pivot_wider" class="section level3 hasAnchor" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> 데이터 피벗: <code>pivot_longer()</code>와 <code>pivot_wider()</code><a href="ch6.html#데이터-피벗-pivot_longer와-pivot_wider" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>통계분석이 불가능한 형태의 데이터 세트가 공통적으로 가지고 있는 주된 문제는 다음과 같다.</p>
<ul>
<li><p>한 변수의 자료가 여러 개의 열에 입력되어 있다.</p></li>
<li><p>한 관찰값의 자료가 여러 개의 행에 입력되어 있다.</p></li>
</ul>
<p>첫 번째 문제는 여러 열에 입력된 한 변수의 자료를 하나의 열로 모아야 해결된다. 따라서 원래 데이터 프레임보다 열의 개수가 줄어든 형태, 즉 더 길어진 형태의 데이터 프레임으로 변환시키는 작업이 되며, 함수 <code>pivot_longer()</code>로 하게 된다.</p>
<p>두 번째 문제는 하나의 열에 여러 변수의 자료가 입력된 형태가 되는 것이므로 열의 개수를 늘려서 각 변수를 따로따로 입력해야 한다. 따라서 원래 데이터 프레임보다 열의 개수가 늘어난 형태, 즉 더 넓어진 형태의 데이터 프레임으로 변환시키는 작업이 되며, 함수 <code>pivot_wider()</code>로 하게 된다.</p>
<p><strong>1. 함수 <code>pivot_longer()</code></strong></p>
<p>패키지 <code>tidyr</code>에 있는 데이터 프레임 <code>table4a</code>를 살펴보자. 숫자로 이름이 시작된 두 번째와 세 번째 변수의 이름은 backtick 기호로 감싸져 있다.</p>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="ch6.html#cb413-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> table4a</span>
<span id="cb413-2"><a href="ch6.html#cb413-2" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 × 3</span></span>
<span id="cb413-3"><a href="ch6.html#cb413-3" aria-hidden="true" tabindex="-1"></a>  country     <span class="st">`</span><span class="at">1999</span><span class="st">`</span> <span class="st">`</span><span class="at">2000</span><span class="st">`</span></span>
<span id="cb413-4"><a href="ch6.html#cb413-4" aria-hidden="true" tabindex="-1"></a><span class="sc">*</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>        <span class="er">&lt;</span>int<span class="sc">&gt;</span>  <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb413-5"><a href="ch6.html#cb413-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> Afghanistan    <span class="dv">745</span>   <span class="dv">2666</span></span>
<span id="cb413-6"><a href="ch6.html#cb413-6" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> Brazil       <span class="dv">37737</span>  <span class="dv">80488</span></span>
<span id="cb413-7"><a href="ch6.html#cb413-7" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> China       <span class="dv">212258</span> <span class="dv">213766</span></span></code></pre></div>
<p>데이터 프레임 <code>table4a</code>는 <code>table1</code>의 변수 <code>cases</code>가 두 개의 열에 흩어져 입력되어 있는 형태이다. 이것을 <code>table1</code>과 같은 tidy 데이터 형태로 변형하기 위해서는 열 이름인 <code>1999</code>와 <code>2000</code>이 변수 <code>year</code>의 자료가 되어야 하고, 두 열에 흩어진 자료는 변수 <code>cases</code>의 자료가 되어야 한다.</p>
<p>함수 <code>pivot_longer()</code>의 기본적인 사용법은 <code>pivot_longer(data, cols, names_to = “name”, values_to = “value”)</code>이다. <code>data</code>는 피벗 대상이 되는 데이터 프레임이고, <code>cols</code>에는 한 변수의 자료가 흩어져 입력된 열을 <code>&lt;tidy-select&gt;</code> 방식으로 선택하면 된다. 또한 <code>names_to</code>에는 선택된 열들의 이름이 자료로 입력될 새로운 열 이름을 지정하고, <code>values_to</code>에는 흩어진 자료들을 하나로 합쳐서 입력할 열 이름을 지정하는 것이다.</p>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="ch6.html#cb414-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> table4a <span class="sc">%&gt;%</span></span>
<span id="cb414-2"><a href="ch6.html#cb414-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">pivot_longer</span>(<span class="sc">-</span>country, <span class="at">names_to =</span> <span class="st">&quot;year&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;cases&quot;</span>)</span>
<span id="cb414-3"><a href="ch6.html#cb414-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 6 × 3</span></span>
<span id="cb414-4"><a href="ch6.html#cb414-4" aria-hidden="true" tabindex="-1"></a>  country     year   cases</span>
<span id="cb414-5"><a href="ch6.html#cb414-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>       <span class="er">&lt;</span>chr<span class="sc">&gt;</span>  <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb414-6"><a href="ch6.html#cb414-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> Afghanistan <span class="dv">1999</span>     <span class="dv">745</span></span>
<span id="cb414-7"><a href="ch6.html#cb414-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> Afghanistan <span class="dv">2000</span>    <span class="dv">2666</span></span>
<span id="cb414-8"><a href="ch6.html#cb414-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> Brazil      <span class="dv">1999</span>   <span class="dv">37737</span></span>
<span id="cb414-9"><a href="ch6.html#cb414-9" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> Brazil      <span class="dv">2000</span>   <span class="dv">80488</span></span>
<span id="cb414-10"><a href="ch6.html#cb414-10" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> China       <span class="dv">1999</span>  <span class="dv">212258</span></span>
<span id="cb414-11"><a href="ch6.html#cb414-11" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span> China       <span class="dv">2000</span>  <span class="dv">213766</span></span></code></pre></div>
<p>다른 예제로 데이터 프레임 <code>df_1</code>에 어떤 제품의 3년간 분기별 판매량이 입력되어 있다고 하자.</p>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="ch6.html#cb415-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df_1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">Year =</span> <span class="dv">2015</span><span class="sc">:</span><span class="dv">2017</span>, <span class="at">Q1 =</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">12</span>, <span class="dv">22</span>),</span>
<span id="cb415-2"><a href="ch6.html#cb415-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>                <span class="at">Q2 =</span> <span class="fu">c</span>(<span class="dv">16</span>, <span class="dv">13</span>, <span class="dv">23</span>), <span class="at">Q3 =</span> <span class="fu">c</span>(<span class="dv">19</span>, <span class="dv">27</span>, <span class="dv">24</span>),</span>
<span id="cb415-3"><a href="ch6.html#cb415-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>                <span class="at">Q4 =</span> <span class="fu">c</span>(<span class="dv">17</span>, <span class="dv">23</span>, <span class="dv">20</span>))</span>
<span id="cb415-4"><a href="ch6.html#cb415-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df_1</span>
<span id="cb415-5"><a href="ch6.html#cb415-5" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 × 5</span></span>
<span id="cb415-6"><a href="ch6.html#cb415-6" aria-hidden="true" tabindex="-1"></a>   Year    Q1    Q2    Q3    Q4</span>
<span id="cb415-7"><a href="ch6.html#cb415-7" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb415-8"><a href="ch6.html#cb415-8" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="dv">2015</span>    <span class="dv">15</span>    <span class="dv">16</span>    <span class="dv">19</span>    <span class="dv">17</span></span>
<span id="cb415-9"><a href="ch6.html#cb415-9" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="dv">2016</span>    <span class="dv">12</span>    <span class="dv">13</span>    <span class="dv">27</span>    <span class="dv">23</span></span>
<span id="cb415-10"><a href="ch6.html#cb415-10" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  <span class="dv">2017</span>    <span class="dv">22</span>    <span class="dv">23</span>    <span class="dv">24</span>    <span class="dv">20</span></span></code></pre></div>
<p><code>df_1</code>은 시계열 자료를 표현할 때 일반적으로 사용되는 형태로 구성되어 있다. 그러나 판매량이라는 한 변수의 자료가 4개의 열에 흩어져 있어서 tidy 데이터의 형태는 아니며, 이것을 tidy 데이터로 변환하는 과정은 다음과 같다.</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="ch6.html#cb416-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df_1 <span class="sc">%&gt;%</span></span>
<span id="cb416-2"><a href="ch6.html#cb416-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">pivot_longer</span>(<span class="sc">-</span>Year, <span class="at">names_to =</span> <span class="st">&quot;Qtr&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;Sales&quot;</span>) </span>
<span id="cb416-3"><a href="ch6.html#cb416-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 12 × 3</span></span>
<span id="cb416-4"><a href="ch6.html#cb416-4" aria-hidden="true" tabindex="-1"></a>    Year Qtr   Sales</span>
<span id="cb416-5"><a href="ch6.html#cb416-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb416-6"><a href="ch6.html#cb416-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span>  <span class="dv">2015</span> Q1       <span class="dv">15</span></span>
<span id="cb416-7"><a href="ch6.html#cb416-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span>  <span class="dv">2015</span> Q2       <span class="dv">16</span></span>
<span id="cb416-8"><a href="ch6.html#cb416-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span>  <span class="dv">2015</span> Q3       <span class="dv">19</span></span>
<span id="cb416-9"><a href="ch6.html#cb416-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span>  <span class="dv">2015</span> Q4       <span class="dv">17</span></span>
<span id="cb416-10"><a href="ch6.html#cb416-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span>  <span class="dv">2016</span> Q1       <span class="dv">12</span></span>
<span id="cb416-11"><a href="ch6.html#cb416-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span>  <span class="dv">2016</span> Q2       <span class="dv">13</span></span>
<span id="cb416-12"><a href="ch6.html#cb416-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span>  <span class="dv">2016</span> Q3       <span class="dv">27</span></span>
<span id="cb416-13"><a href="ch6.html#cb416-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span>  <span class="dv">2016</span> Q4       <span class="dv">23</span></span>
<span id="cb416-14"><a href="ch6.html#cb416-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span>  <span class="dv">2017</span> Q1       <span class="dv">22</span></span>
<span id="cb416-15"><a href="ch6.html#cb416-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>  <span class="dv">2017</span> Q2       <span class="dv">23</span></span>
<span id="cb416-16"><a href="ch6.html#cb416-16" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span>  <span class="dv">2017</span> Q3       <span class="dv">24</span></span>
<span id="cb416-17"><a href="ch6.html#cb416-17" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span>  <span class="dv">2017</span> Q4       <span class="dv">20</span></span></code></pre></div>
<p>조금 더 복잡한 예를 살펴보자. 데이터 프레임 <code>tidyr::billboard</code>에는 2000년 Billboard Top 100에 오른 노래의 가수(<code>artist</code>)와 노래 제목(<code>track</code>), top 100 리스트에 들어간 날짜(<code>date.entered</code>), 그리고 리스트에 오른 이후의 매주 순위가 변수<code>wk1</code>부터 <code>wk76</code>까지 입력되어 있다. 해당 노래가 top 100 리스트에서 제외되면 <code>NA</code>가 입력되기 때문에, 변수 <code>wk1</code>부터 <code>wk76</code>에는 <code>NA</code>가 많이 입력되어 있다. 특히 <code>wk66</code>부터 <code>wk76</code>까지는 모든 자료가 <code>NA</code>로 입력되어서 변수 유형이 논리형으로 되어 있다.</p>
<p>우리가 원하는 분석은 매주 연속해서 top 100에 올라있던 노래만을 대상으로 리스트에 머물러 있던 최장 기간과 그 기간 중 최고 순위를 알아내는 것이다.</p>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="ch6.html#cb417-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> billboard <span class="sc">%&gt;%</span> </span>
<span id="cb417-2"><a href="ch6.html#cb417-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb417-3"><a href="ch6.html#cb417-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 317 × 79</span></span>
<span id="cb417-4"><a href="ch6.html#cb417-4" aria-hidden="true" tabindex="-1"></a>  artist      track date.entered   wk1   wk2   wk3   wk4   wk5   wk6   wk7   wk8</span>
<span id="cb417-5"><a href="ch6.html#cb417-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>       <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>date<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb417-6"><a href="ch6.html#cb417-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">2</span> Pac       Baby… <span class="dv">2000-02-26</span>      <span class="dv">87</span>    <span class="dv">82</span>    <span class="dv">72</span>    <span class="dv">77</span>    <span class="dv">87</span>    <span class="dv">94</span>    <span class="dv">99</span>    <span class="cn">NA</span></span>
<span id="cb417-7"><a href="ch6.html#cb417-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> 2Ge<span class="sc">+</span>her     The … <span class="dv">2000-09-02</span>      <span class="dv">91</span>    <span class="dv">87</span>    <span class="dv">92</span>    <span class="cn">NA</span>    <span class="cn">NA</span>    <span class="cn">NA</span>    <span class="cn">NA</span>    <span class="cn">NA</span></span>
<span id="cb417-8"><a href="ch6.html#cb417-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="dv">3</span> Doors Do… Kryp… <span class="dv">2000-04-08</span>      <span class="dv">81</span>    <span class="dv">70</span>    <span class="dv">68</span>    <span class="dv">67</span>    <span class="dv">66</span>    <span class="dv">57</span>    <span class="dv">54</span>    <span class="dv">53</span></span>
<span id="cb417-9"><a href="ch6.html#cb417-9" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="dv">3</span> Doors Do… Loser <span class="dv">2000-10-21</span>      <span class="dv">76</span>    <span class="dv">76</span>    <span class="dv">72</span>    <span class="dv">69</span>    <span class="dv">67</span>    <span class="dv">65</span>    <span class="dv">55</span>    <span class="dv">59</span></span>
<span id="cb417-10"><a href="ch6.html#cb417-10" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="dv">504</span> Boyz    Wobb… <span class="dv">2000-04-15</span>      <span class="dv">57</span>    <span class="dv">34</span>    <span class="dv">25</span>    <span class="dv">17</span>    <span class="dv">17</span>    <span class="dv">31</span>    <span class="dv">36</span>    <span class="dv">49</span></span>
<span id="cb417-11"><a href="ch6.html#cb417-11" aria-hidden="true" tabindex="-1"></a><span class="co"># … with 312 more rows, and 68 more variables: wk9 &lt;dbl&gt;, wk10 &lt;dbl&gt;,</span></span>
<span id="cb417-12"><a href="ch6.html#cb417-12" aria-hidden="true" tabindex="-1"></a><span class="co">#   wk11 &lt;dbl&gt;, wk12 &lt;dbl&gt;, wk13 &lt;dbl&gt;, wk14 &lt;dbl&gt;, wk15 &lt;dbl&gt;, wk16 &lt;dbl&gt;,</span></span>
<span id="cb417-13"><a href="ch6.html#cb417-13" aria-hidden="true" tabindex="-1"></a><span class="co">#   wk17 &lt;dbl&gt;, wk18 &lt;dbl&gt;, wk19 &lt;dbl&gt;, wk20 &lt;dbl&gt;, wk21 &lt;dbl&gt;, wk22 &lt;dbl&gt;,</span></span>
<span id="cb417-14"><a href="ch6.html#cb417-14" aria-hidden="true" tabindex="-1"></a><span class="co">#   wk23 &lt;dbl&gt;, wk24 &lt;dbl&gt;, wk25 &lt;dbl&gt;, wk26 &lt;dbl&gt;, wk27 &lt;dbl&gt;, wk28 &lt;dbl&gt;,</span></span>
<span id="cb417-15"><a href="ch6.html#cb417-15" aria-hidden="true" tabindex="-1"></a><span class="co">#   wk29 &lt;dbl&gt;, wk30 &lt;dbl&gt;, wk31 &lt;dbl&gt;, wk32 &lt;dbl&gt;, wk33 &lt;dbl&gt;, wk34 &lt;dbl&gt;,</span></span>
<span id="cb417-16"><a href="ch6.html#cb417-16" aria-hidden="true" tabindex="-1"></a><span class="co">#   wk35 &lt;dbl&gt;, wk36 &lt;dbl&gt;, wk37 &lt;dbl&gt;, wk38 &lt;dbl&gt;, wk39 &lt;dbl&gt;, wk40 &lt;dbl&gt;,</span></span>
<span id="cb417-17"><a href="ch6.html#cb417-17" aria-hidden="true" tabindex="-1"></a><span class="co">#   wk41 &lt;dbl&gt;, wk42 &lt;dbl&gt;, wk43 &lt;dbl&gt;, wk44 &lt;dbl&gt;, wk45 &lt;dbl&gt;, wk46 &lt;dbl&gt;, …</span></span></code></pre></div>
<p>이런 구조의 데이터는 매우 흔하게 볼 수 있는 것이며, tidy 데이터 구조로 오해하기도 한다. 그러나 변수 <code>wk1</code>부터 <code>wk76</code>은 모두 노래의 ’순위’이기 때문에 하나의 열에 입력이 되어야 적절한 통계분석이 가능하게 된다.<br />
따라서 열 <code>wk1</code>부터 <code>wk76</code>까지에 입력된 자료는 <code>rank</code>라는 이름의 열로 모으고, 열의 이름은 <code>week</code>라는 이름의 열에 입력해 보자. 이 변환 작업은 <code>cols</code>에 <code>wk1:wk76</code> 또는 <code>starts_with("wk")</code>를, <code>names_to</code>에 <code>"week"</code>를, 그리고 <code>values_to</code>에 <code>"rank"</code>를 각각 지정하면 된다.</p>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="ch6.html#cb418-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> billboard <span class="sc">%&gt;%</span> </span>
<span id="cb418-2"><a href="ch6.html#cb418-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">pivot_longer</span>(</span>
<span id="cb418-3"><a href="ch6.html#cb418-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="at">cols =</span> wk1<span class="sc">:</span>wk76,</span>
<span id="cb418-4"><a href="ch6.html#cb418-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="at">names_to =</span> <span class="st">&quot;week&quot;</span>,</span>
<span id="cb418-5"><a href="ch6.html#cb418-5" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="at">values_to =</span> <span class="st">&quot;rank&quot;</span></span>
<span id="cb418-6"><a href="ch6.html#cb418-6" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   ) <span class="sc">%&gt;%</span> </span>
<span id="cb418-7"><a href="ch6.html#cb418-7" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb418-8"><a href="ch6.html#cb418-8" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 24,092 × 5</span></span>
<span id="cb418-9"><a href="ch6.html#cb418-9" aria-hidden="true" tabindex="-1"></a>  artist track                   date.entered week   rank</span>
<span id="cb418-10"><a href="ch6.html#cb418-10" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>  <span class="er">&lt;</span>chr<span class="sc">&gt;</span>                   <span class="er">&lt;</span>date<span class="sc">&gt;</span>       <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb418-11"><a href="ch6.html#cb418-11" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">2</span> Pac  Baby Don<span class="st">&#39;t Cry (Keep... 2000-02-26   wk1      87</span></span>
<span id="cb418-12"><a href="ch6.html#cb418-12" aria-hidden="true" tabindex="-1"></a><span class="st">2 2 Pac  Baby Don&#39;</span>t <span class="fu">Cry</span> (Keep... <span class="dv">2000-02-26</span>   wk2      <span class="dv">82</span></span>
<span id="cb418-13"><a href="ch6.html#cb418-13" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="dv">2</span> Pac  Baby Don<span class="st">&#39;t Cry (Keep... 2000-02-26   wk3      72</span></span>
<span id="cb418-14"><a href="ch6.html#cb418-14" aria-hidden="true" tabindex="-1"></a><span class="st">4 2 Pac  Baby Don&#39;</span>t <span class="fu">Cry</span> (Keep... <span class="dv">2000-02-26</span>   wk4      <span class="dv">77</span></span>
<span id="cb418-15"><a href="ch6.html#cb418-15" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="dv">2</span> Pac  Baby Don<span class="st">&#39;t Cry (Keep... 2000-02-26   wk5      87</span></span>
<span id="cb418-16"><a href="ch6.html#cb418-16" aria-hidden="true" tabindex="-1"></a><span class="st"># … with 24,087 more rows</span></span></code></pre></div>
<p>변수 <code>week</code>에는 문자형 자료가 입력되어 있는데, 정수형으로 전환되면 더 효과적인 분석이 가능할 것이다. 정수형으로 전환하기 위해서는 문자열 “wk”를 제거하고, 변수의 유형을 정수형으로 바꾸면 된다. 이 작업은 함수 <code>mutate()</code>와 <code>gsub()</code>, <code>as.integer()</code>를 이용해도 가능하지만, 함수 <code>pivot_longer()</code>에서 <code>names_prefix</code>와 <code>names_transform</code>를 사용해도 전환할 수 있다. <code>names_prefix</code>에는 <code>names_to</code>에 입력된 열 이름에서 제거하려는 문자열을 정규표현식으로 지정하면 되는데, 첫 문자부터 제거하는 경우에만 적용이 된다. 이 경우에는 그냥 <code>"wk"</code>를 지정하면 된다. <code>names_transform</code>은 열의 유형을 변경할 때 사용하는 것으로 <code>열이름 = 유형 변환 함수</code>가 입력된 리스트를 지정하면 된다.</p>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="ch6.html#cb419-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> top_100 <span class="ot">&lt;-</span> billboard <span class="sc">%&gt;%</span> </span>
<span id="cb419-2"><a href="ch6.html#cb419-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">pivot_longer</span>(</span>
<span id="cb419-3"><a href="ch6.html#cb419-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="at">cols =</span> wk1<span class="sc">:</span>wk76, </span>
<span id="cb419-4"><a href="ch6.html#cb419-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="at">names_to =</span> <span class="st">&quot;week&quot;</span>,</span>
<span id="cb419-5"><a href="ch6.html#cb419-5" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="at">names_prefix =</span> <span class="st">&quot;wk&quot;</span>,</span>
<span id="cb419-6"><a href="ch6.html#cb419-6" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="at">names_transform =</span> <span class="fu">list</span>(<span class="at">week =</span> as.integer),</span>
<span id="cb419-7"><a href="ch6.html#cb419-7" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="at">values_to =</span> <span class="st">&quot;rank&quot;</span>,</span>
<span id="cb419-8"><a href="ch6.html#cb419-8" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="at">values_drop_na =</span> <span class="cn">TRUE</span></span>
<span id="cb419-9"><a href="ch6.html#cb419-9" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   )</span>
<span id="cb419-10"><a href="ch6.html#cb419-10" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> top_100 <span class="sc">%&gt;%</span> </span>
<span id="cb419-11"><a href="ch6.html#cb419-11" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">print</span>(<span class="at">n=</span><span class="dv">5</span>)</span>
<span id="cb419-12"><a href="ch6.html#cb419-12" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 5,307 × 5</span></span>
<span id="cb419-13"><a href="ch6.html#cb419-13" aria-hidden="true" tabindex="-1"></a>  artist track                   date.entered  week  rank</span>
<span id="cb419-14"><a href="ch6.html#cb419-14" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>  <span class="er">&lt;</span>chr<span class="sc">&gt;</span>                   <span class="er">&lt;</span>date<span class="sc">&gt;</span>       <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb419-15"><a href="ch6.html#cb419-15" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">2</span> Pac  Baby Don<span class="st">&#39;t Cry (Keep... 2000-02-26       1    87</span></span>
<span id="cb419-16"><a href="ch6.html#cb419-16" aria-hidden="true" tabindex="-1"></a><span class="st">2 2 Pac  Baby Don&#39;</span>t <span class="fu">Cry</span> (Keep... <span class="dv">2000-02-26</span>       <span class="dv">2</span>    <span class="dv">82</span></span>
<span id="cb419-17"><a href="ch6.html#cb419-17" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="dv">2</span> Pac  Baby Don<span class="st">&#39;t Cry (Keep... 2000-02-26       3    72</span></span>
<span id="cb419-18"><a href="ch6.html#cb419-18" aria-hidden="true" tabindex="-1"></a><span class="st">4 2 Pac  Baby Don&#39;</span>t <span class="fu">Cry</span> (Keep... <span class="dv">2000-02-26</span>       <span class="dv">4</span>    <span class="dv">77</span></span>
<span id="cb419-19"><a href="ch6.html#cb419-19" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="dv">2</span> Pac  Baby Don<span class="st">&#39;t Cry (Keep... 2000-02-26       5    87</span></span>
<span id="cb419-20"><a href="ch6.html#cb419-20" aria-hidden="true" tabindex="-1"></a><span class="st"># … with 5,302 more rows</span></span></code></pre></div>
<p>옵션 <code>values_drop_na</code>에 <code>TRUE</code>를 지정하면 <code>values_to</code>로 지정된 열에 <code>NA</code>가 입력되는 행은 자동으로 제거된다. 자료의 특성으로 <code>NA</code>가 많을 수밖에 없는 경우에는 필요한 옵션이 된다.</p>
<p>이제 데이터 프레임 <code>top_100</code>을 대상으로 원하는 분석을 할 수 있게 되었다. 매주 연속해서 top 100에 올라있던 노래만을 대상으로 리스트에 머물러 있던 최장 기간과 그 기간 중 최고 순위는 다음과 같이 알아볼 수 있다.</p>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="ch6.html#cb420-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> top_100 <span class="sc">%&gt;%</span> </span>
<span id="cb420-2"><a href="ch6.html#cb420-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">group_by</span>(artist, track) <span class="sc">%&gt;%</span> </span>
<span id="cb420-3"><a href="ch6.html#cb420-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">filter</span>(<span class="fu">n</span>() <span class="sc">==</span> <span class="fu">max</span>(week)) <span class="sc">%&gt;%</span> </span>
<span id="cb420-4"><a href="ch6.html#cb420-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">summarise</span>(<span class="at">period =</span> <span class="fu">max</span>(week), <span class="at">top_rank =</span> <span class="fu">min</span>(rank)) <span class="sc">%&gt;%</span> </span>
<span id="cb420-5"><a href="ch6.html#cb420-5" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb420-6"><a href="ch6.html#cb420-6" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">arrange</span>(<span class="fu">desc</span>(period)) <span class="sc">%&gt;%</span> </span>
<span id="cb420-7"><a href="ch6.html#cb420-7" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">print</span>(<span class="at">n=</span><span class="dv">5</span>)</span>
<span id="cb420-8"><a href="ch6.html#cb420-8" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 302 × 4</span></span>
<span id="cb420-9"><a href="ch6.html#cb420-9" aria-hidden="true" tabindex="-1"></a>  artist           track               period top_rank</span>
<span id="cb420-10"><a href="ch6.html#cb420-10" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>            <span class="er">&lt;</span>chr<span class="sc">&gt;</span>                <span class="er">&lt;</span>int<span class="sc">&gt;</span>    <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb420-11"><a href="ch6.html#cb420-11" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">3</span> Doors Down     Kryptonite              <span class="dv">53</span>        <span class="dv">3</span></span>
<span id="cb420-12"><a href="ch6.html#cb420-12" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> Hill, Faith      Breathe                 <span class="dv">53</span>        <span class="dv">2</span></span>
<span id="cb420-13"><a href="ch6.html#cb420-13" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> Creed            With Arms Wide Open     <span class="dv">47</span>        <span class="dv">1</span></span>
<span id="cb420-14"><a href="ch6.html#cb420-14" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> Joe              I Wanna Know            <span class="dv">44</span>        <span class="dv">4</span></span>
<span id="cb420-15"><a href="ch6.html#cb420-15" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> Vertical Horizon Everything You Want     <span class="dv">41</span>        <span class="dv">1</span></span>
<span id="cb420-16"><a href="ch6.html#cb420-16" aria-hidden="true" tabindex="-1"></a><span class="co"># … with 297 more rows</span></span></code></pre></div>
<p><strong>2. 함수 <code>pivot_wider()</code></strong></p>
<p>패키지 <code>tidyr</code>에 있는 데이터 프레임 <code>table2</code>를 살펴보자.</p>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="ch6.html#cb421-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> table2</span>
<span id="cb421-2"><a href="ch6.html#cb421-2" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 12 × 4</span></span>
<span id="cb421-3"><a href="ch6.html#cb421-3" aria-hidden="true" tabindex="-1"></a>   country      year type            count</span>
<span id="cb421-4"><a href="ch6.html#cb421-4" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>       <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>           <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb421-5"><a href="ch6.html#cb421-5" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span> Afghanistan  <span class="dv">1999</span> cases             <span class="dv">745</span></span>
<span id="cb421-6"><a href="ch6.html#cb421-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span> Afghanistan  <span class="dv">1999</span> population   <span class="dv">19987071</span></span>
<span id="cb421-7"><a href="ch6.html#cb421-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span> Afghanistan  <span class="dv">2000</span> cases            <span class="dv">2666</span></span>
<span id="cb421-8"><a href="ch6.html#cb421-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span> Afghanistan  <span class="dv">2000</span> population   <span class="dv">20595360</span></span>
<span id="cb421-9"><a href="ch6.html#cb421-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span> Brazil       <span class="dv">1999</span> cases           <span class="dv">37737</span></span>
<span id="cb421-10"><a href="ch6.html#cb421-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span> Brazil       <span class="dv">1999</span> population  <span class="dv">172006362</span></span>
<span id="cb421-11"><a href="ch6.html#cb421-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span> Brazil       <span class="dv">2000</span> cases           <span class="dv">80488</span></span>
<span id="cb421-12"><a href="ch6.html#cb421-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span> Brazil       <span class="dv">2000</span> population  <span class="dv">174504898</span></span>
<span id="cb421-13"><a href="ch6.html#cb421-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span> China        <span class="dv">1999</span> cases          <span class="dv">212258</span></span>
<span id="cb421-14"><a href="ch6.html#cb421-14" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> China        <span class="dv">1999</span> population <span class="dv">1272915272</span></span>
<span id="cb421-15"><a href="ch6.html#cb421-15" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span> China        <span class="dv">2000</span> cases          <span class="dv">213766</span></span>
<span id="cb421-16"><a href="ch6.html#cb421-16" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span> China        <span class="dv">2000</span> population <span class="dv">1280428583</span></span></code></pre></div>
<p><code>table2</code>는 개별 국가에 대한 연간 자료인데, 이것이 두 개의 행에 나뉘어 입력되어 있다. 따라서 하나의 열(<code>type</code>)에 두 변수(<code>cases</code>와 <code>population</code>)의 자료가 입력되어 있는 것이다. 이렇게 하나의 열에 입력된 여러 변수의 자료를 분산시키는 작업은 함수 <code>pivot_wider()</code>로 할 수 있다.</p>
<p>기본적인 사용법은 <code>pivot_wider(data, names_from = name, values_from = value)</code>이다. <code>data</code>는 피벗 대상이 되는 데이터 프레임이고, <code>names_from</code>과<code>values_from</code>에는 새롭게 추가되는 열들의 이름이 입력되어 있는 열과 자료가 입력되어 있는 열을 각각 지정하는 것이다.</p>
<p><code>table2</code>의 경우에는 <code>type</code>에 열들의 이름이 입력되어 있고, 자료는 <code>count</code>에 입력되어 있기 때문에, <code>names_from</code>에는 <code>type</code>을, <code>values_from</code>에는 <code>count</code>를 각각 지정하면 된다.</p>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="ch6.html#cb422-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> table2 <span class="sc">%&gt;%</span></span>
<span id="cb422-2"><a href="ch6.html#cb422-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> type, <span class="at">values_from =</span> count)</span>
<span id="cb422-3"><a href="ch6.html#cb422-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 6 × 4</span></span>
<span id="cb422-4"><a href="ch6.html#cb422-4" aria-hidden="true" tabindex="-1"></a>  country      year  cases population</span>
<span id="cb422-5"><a href="ch6.html#cb422-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>       <span class="er">&lt;</span>int<span class="sc">&gt;</span>  <span class="er">&lt;</span>int<span class="sc">&gt;</span>      <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb422-6"><a href="ch6.html#cb422-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> Afghanistan  <span class="dv">1999</span>    <span class="dv">745</span>   <span class="dv">19987071</span></span>
<span id="cb422-7"><a href="ch6.html#cb422-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> Afghanistan  <span class="dv">2000</span>   <span class="dv">2666</span>   <span class="dv">20595360</span></span>
<span id="cb422-8"><a href="ch6.html#cb422-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> Brazil       <span class="dv">1999</span>  <span class="dv">37737</span>  <span class="dv">172006362</span></span>
<span id="cb422-9"><a href="ch6.html#cb422-9" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> Brazil       <span class="dv">2000</span>  <span class="dv">80488</span>  <span class="dv">174504898</span></span>
<span id="cb422-10"><a href="ch6.html#cb422-10" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> China        <span class="dv">1999</span> <span class="dv">212258</span> <span class="dv">1272915272</span></span>
<span id="cb422-11"><a href="ch6.html#cb422-11" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span> China        <span class="dv">2000</span> <span class="dv">213766</span> <span class="dv">1280428583</span></span></code></pre></div>
<p>다른 예제로 세 명의 신장과 체중을 입력한 데이터 프레임 <code>df_2</code>를 만들어 보자.</p>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb423-1"><a href="ch6.html#cb423-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df_2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">Name =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;Kim&quot;</span>,<span class="st">&quot;Park&quot;</span>,<span class="st">&quot;Lee&quot;</span>), <span class="at">each =</span> <span class="dv">2</span>),</span>
<span id="cb423-2"><a href="ch6.html#cb423-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>                <span class="at">type =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;Height&quot;</span>,<span class="st">&quot;Weight&quot;</span>), <span class="at">times =</span> <span class="dv">3</span>),</span>
<span id="cb423-3"><a href="ch6.html#cb423-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>                <span class="at">measure =</span> <span class="fu">c</span>(<span class="dv">170</span>, <span class="dv">75</span>, <span class="dv">165</span>, <span class="dv">63</span>, <span class="dv">175</span>, <span class="dv">85</span>)</span>
<span id="cb423-4"><a href="ch6.html#cb423-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>                )</span>
<span id="cb423-5"><a href="ch6.html#cb423-5" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df_2</span>
<span id="cb423-6"><a href="ch6.html#cb423-6" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 6 × 3</span></span>
<span id="cb423-7"><a href="ch6.html#cb423-7" aria-hidden="true" tabindex="-1"></a>  Name  type   measure</span>
<span id="cb423-8"><a href="ch6.html#cb423-8" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>    <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb423-9"><a href="ch6.html#cb423-9" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> Kim   Height     <span class="dv">170</span></span>
<span id="cb423-10"><a href="ch6.html#cb423-10" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> Kim   Weight      <span class="dv">75</span></span>
<span id="cb423-11"><a href="ch6.html#cb423-11" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> Park  Height     <span class="dv">165</span></span>
<span id="cb423-12"><a href="ch6.html#cb423-12" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> Park  Weight      <span class="dv">63</span></span>
<span id="cb423-13"><a href="ch6.html#cb423-13" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> Lee   Height     <span class="dv">175</span></span>
<span id="cb423-14"><a href="ch6.html#cb423-14" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span> Lee   Weight      <span class="dv">85</span></span></code></pre></div>
<p><code>df_2</code>는 세 명의 신장과 체중에 대한 자료이다. 같은 행에 입력되어야 할 한 사람의 자료가 두 행에 나뉘어져 입력되어서, 한 열에 두 변수의 자료가 입력되었다. <code>df_2</code>를 tidy 데이터로 변환하는 과정은 다음과 같다.</p>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb424-1"><a href="ch6.html#cb424-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df_2 <span class="sc">%&gt;%</span></span>
<span id="cb424-2"><a href="ch6.html#cb424-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> type, <span class="at">values_from =</span> measure)</span>
<span id="cb424-3"><a href="ch6.html#cb424-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 × 3</span></span>
<span id="cb424-4"><a href="ch6.html#cb424-4" aria-hidden="true" tabindex="-1"></a>  Name  Height Weight</span>
<span id="cb424-5"><a href="ch6.html#cb424-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb424-6"><a href="ch6.html#cb424-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> Kim      <span class="dv">170</span>     <span class="dv">75</span></span>
<span id="cb424-7"><a href="ch6.html#cb424-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> Park     <span class="dv">165</span>     <span class="dv">63</span></span>
<span id="cb424-8"><a href="ch6.html#cb424-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> Lee      <span class="dv">175</span>     <span class="dv">85</span></span></code></pre></div>
<p>다른 예제로 <code>tidyr::fish_encounters</code>를 살펴보자. 이 데이터 프레임은 태그를 부착한 19마리 물고기(<code>fish</code>)가 어떤 강을 따라 이동하는 동안 특정 지점(<code>station</code>)에서 움직임이 관측됐는지 여부(<code>seen</code>)를 기록한 자료이다. 움직임이 관측된 <code>station</code>만 자료에 나타나 있어서 변수 <code>seen</code>은 모든 행에서 1을 값으로 갖고 있다.</p>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="ch6.html#cb425-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> fish_encounters <span class="sc">%&gt;%</span> </span>
<span id="cb425-2"><a href="ch6.html#cb425-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb425-3"><a href="ch6.html#cb425-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 114 × 3</span></span>
<span id="cb425-4"><a href="ch6.html#cb425-4" aria-hidden="true" tabindex="-1"></a>  fish  station  seen</span>
<span id="cb425-5"><a href="ch6.html#cb425-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>fct<span class="sc">&gt;</span> <span class="er">&lt;</span>fct<span class="sc">&gt;</span>   <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb425-6"><a href="ch6.html#cb425-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">4842</span>  Release     <span class="dv">1</span></span>
<span id="cb425-7"><a href="ch6.html#cb425-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="dv">4842</span>  I80_1       <span class="dv">1</span></span>
<span id="cb425-8"><a href="ch6.html#cb425-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="dv">4842</span>  Lisbon      <span class="dv">1</span></span>
<span id="cb425-9"><a href="ch6.html#cb425-9" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="dv">4842</span>  Rstr        <span class="dv">1</span></span>
<span id="cb425-10"><a href="ch6.html#cb425-10" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="dv">4842</span>  Base_TD     <span class="dv">1</span></span>
<span id="cb425-11"><a href="ch6.html#cb425-11" aria-hidden="true" tabindex="-1"></a><span class="co"># … with 109 more rows</span></span></code></pre></div>
<p>물고기의 움직임이 관측되지 않은 지점에 대한 자료도 중요한 정보를 담고 있다고 할 수 있는데, 지금의 구조에서는 그 정보를 얻을 수 없게 되어 있다. 물고기마다 모든 지점에서의 움직임 관측 여부를 표현하기 위해서는 변수 <code>station</code>에 입력된 각 지점이 변수로 전환되어야 한다.</p>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb426-1"><a href="ch6.html#cb426-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> fish_encounters <span class="sc">%&gt;%</span> </span>
<span id="cb426-2"><a href="ch6.html#cb426-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> station, </span>
<span id="cb426-3"><a href="ch6.html#cb426-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>               <span class="at">values_from =</span> seen</span>
<span id="cb426-4"><a href="ch6.html#cb426-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>               ) <span class="sc">%&gt;%</span> </span>
<span id="cb426-5"><a href="ch6.html#cb426-5" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb426-6"><a href="ch6.html#cb426-6" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 19 × 12</span></span>
<span id="cb426-7"><a href="ch6.html#cb426-7" aria-hidden="true" tabindex="-1"></a>  fish  Release I80_1 Lisbon  Rstr Base_TD   BCE   BCW  BCE2  BCW2   MAE   MAW</span>
<span id="cb426-8"><a href="ch6.html#cb426-8" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>fct<span class="sc">&gt;</span>   <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span>  <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span>   <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb426-9"><a href="ch6.html#cb426-9" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">4842</span>        <span class="dv">1</span>     <span class="dv">1</span>      <span class="dv">1</span>     <span class="dv">1</span>       <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span></span>
<span id="cb426-10"><a href="ch6.html#cb426-10" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="dv">4843</span>        <span class="dv">1</span>     <span class="dv">1</span>      <span class="dv">1</span>     <span class="dv">1</span>       <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span></span>
<span id="cb426-11"><a href="ch6.html#cb426-11" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="dv">4844</span>        <span class="dv">1</span>     <span class="dv">1</span>      <span class="dv">1</span>     <span class="dv">1</span>       <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span></span>
<span id="cb426-12"><a href="ch6.html#cb426-12" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="dv">4845</span>        <span class="dv">1</span>     <span class="dv">1</span>      <span class="dv">1</span>     <span class="dv">1</span>       <span class="dv">1</span>    <span class="cn">NA</span>    <span class="cn">NA</span>    <span class="cn">NA</span>    <span class="cn">NA</span>    <span class="cn">NA</span>    <span class="cn">NA</span></span>
<span id="cb426-13"><a href="ch6.html#cb426-13" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="dv">4847</span>        <span class="dv">1</span>     <span class="dv">1</span>      <span class="dv">1</span>    <span class="cn">NA</span>      <span class="cn">NA</span>    <span class="cn">NA</span>    <span class="cn">NA</span>    <span class="cn">NA</span>    <span class="cn">NA</span>    <span class="cn">NA</span>    <span class="cn">NA</span></span>
<span id="cb426-14"><a href="ch6.html#cb426-14" aria-hidden="true" tabindex="-1"></a><span class="co"># … with 14 more rows</span></span></code></pre></div>
<p>움직임이 관측되지 않은 지점에 대해서는 입력된 자료가 없기 때문에 해당 위치에 <code>NA</code>가 표시되었다. 하지만 관측이 안된 것은 변수 <code>seen</code>의 값이 <code>0</code>이 되는 것이므로 <code>NA</code>를 <code>0</code>으로 바꾸는 것이 더 좋을 것이다. 이렇게 열을 확장하는 과정에서 발생할 수 있는 <code>NA</code> 대신 다른 값을 입력해야 할 때에는 옵션 <code>values_fill</code>에 대신 입력하려는 값을 지정하면 된다.</p>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb427-1"><a href="ch6.html#cb427-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> fish_encounters <span class="sc">%&gt;%</span> </span>
<span id="cb427-2"><a href="ch6.html#cb427-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> station, </span>
<span id="cb427-3"><a href="ch6.html#cb427-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>               <span class="at">values_from =</span> seen,</span>
<span id="cb427-4"><a href="ch6.html#cb427-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>               <span class="at">values_fill =</span> <span class="dv">0</span></span>
<span id="cb427-5"><a href="ch6.html#cb427-5" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>               ) <span class="sc">%&gt;%</span> </span>
<span id="cb427-6"><a href="ch6.html#cb427-6" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb427-7"><a href="ch6.html#cb427-7" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 19 × 12</span></span>
<span id="cb427-8"><a href="ch6.html#cb427-8" aria-hidden="true" tabindex="-1"></a>  fish  Release I80_1 Lisbon  Rstr Base_TD   BCE   BCW  BCE2  BCW2   MAE   MAW</span>
<span id="cb427-9"><a href="ch6.html#cb427-9" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>fct<span class="sc">&gt;</span>   <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span>  <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span>   <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb427-10"><a href="ch6.html#cb427-10" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">4842</span>        <span class="dv">1</span>     <span class="dv">1</span>      <span class="dv">1</span>     <span class="dv">1</span>       <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span></span>
<span id="cb427-11"><a href="ch6.html#cb427-11" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="dv">4843</span>        <span class="dv">1</span>     <span class="dv">1</span>      <span class="dv">1</span>     <span class="dv">1</span>       <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span></span>
<span id="cb427-12"><a href="ch6.html#cb427-12" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="dv">4844</span>        <span class="dv">1</span>     <span class="dv">1</span>      <span class="dv">1</span>     <span class="dv">1</span>       <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span></span>
<span id="cb427-13"><a href="ch6.html#cb427-13" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="dv">4845</span>        <span class="dv">1</span>     <span class="dv">1</span>      <span class="dv">1</span>     <span class="dv">1</span>       <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">0</span></span>
<span id="cb427-14"><a href="ch6.html#cb427-14" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="dv">4847</span>        <span class="dv">1</span>     <span class="dv">1</span>      <span class="dv">1</span>     <span class="dv">0</span>       <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">0</span></span>
<span id="cb427-15"><a href="ch6.html#cb427-15" aria-hidden="true" tabindex="-1"></a><span class="co"># … with 14 more rows</span></span></code></pre></div>
</div>
<div id="문자형-열의-결합과-분리-separate와-unite" class="section level3 hasAnchor" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span> 문자형 열의 결합과 분리: <code>separate()</code>와 <code>unite()</code><a href="ch6.html#문자형-열의-결합과-분리-separate와-unite" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>하나의 문자형 열에 입력된 자료를 몇 개의 열로 분산시키거나, 또는 몇 개의 열에 입력되어 있는 자료를 하나의 열로 합치는 것은 빈번히 이루어지는 필수적인 작업은 아니지만, 나름의 의미가 있는 필요한 작업이다.</p>
<p><strong>1. 함수 <code>separate()</code></strong></p>
<p>패키지 <code>tidyr</code>에 있는 데이터 프레임 <code>table3</code>를 살펴보자.</p>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="ch6.html#cb428-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> table3</span>
<span id="cb428-2"><a href="ch6.html#cb428-2" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 6 × 3</span></span>
<span id="cb428-3"><a href="ch6.html#cb428-3" aria-hidden="true" tabindex="-1"></a>  country      year rate             </span>
<span id="cb428-4"><a href="ch6.html#cb428-4" aria-hidden="true" tabindex="-1"></a><span class="sc">*</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>       <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>            </span>
<span id="cb428-5"><a href="ch6.html#cb428-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> Afghanistan  <span class="dv">1999</span> <span class="dv">745</span><span class="sc">/</span><span class="dv">19987071</span>     </span>
<span id="cb428-6"><a href="ch6.html#cb428-6" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> Afghanistan  <span class="dv">2000</span> <span class="dv">2666</span><span class="sc">/</span><span class="dv">20595360</span>    </span>
<span id="cb428-7"><a href="ch6.html#cb428-7" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> Brazil       <span class="dv">1999</span> <span class="dv">37737</span><span class="sc">/</span><span class="dv">172006362</span>  </span>
<span id="cb428-8"><a href="ch6.html#cb428-8" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> Brazil       <span class="dv">2000</span> <span class="dv">80488</span><span class="sc">/</span><span class="dv">174504898</span>  </span>
<span id="cb428-9"><a href="ch6.html#cb428-9" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> China        <span class="dv">1999</span> <span class="dv">212258</span><span class="sc">/</span><span class="dv">1272915272</span></span>
<span id="cb428-10"><a href="ch6.html#cb428-10" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span> China        <span class="dv">2000</span> <span class="dv">213766</span><span class="sc">/</span><span class="dv">1280428583</span></span></code></pre></div>
<p><code>table3</code>는 <code>table1</code>의 변수 <code>cases</code>와 <code>population</code>의 자료가 <code>rate</code> 열에 함께 입력되어 있다. 함수 <code>separate()</code>로 자료를 분리하여 두 열에 나누어 입력하는 작업을 진행해 보자.</p>
<p>기본적인 사용법은 <code>separate(data, col, into)</code>이다. <code>data</code>는 형태를 변형할 데이터 프레임이고, 자료가 함께 입력되어 있는 열은 <code>col</code>에 지정하며, 자료를 분리하여 따로 입력할 열 이름을 <code>into</code>에 지정한다.</p>
<p><code>table3</code>의 경우에는 <code>rate</code>가 분리 대상이 되는 열이므로 <code>col</code>에 지정하고, 분리된 자료를 입력할 열의 이름인 <code>cases</code>와 <code>population</code>을 <code>into</code>에 지정하면 된다.</p>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="ch6.html#cb429-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> table3 <span class="sc">%&gt;%</span></span>
<span id="cb429-2"><a href="ch6.html#cb429-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">separate</span>(<span class="at">col =</span> rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;population&quot;</span>))</span>
<span id="cb429-3"><a href="ch6.html#cb429-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 6 × 4</span></span>
<span id="cb429-4"><a href="ch6.html#cb429-4" aria-hidden="true" tabindex="-1"></a>  country      year cases  population</span>
<span id="cb429-5"><a href="ch6.html#cb429-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>       <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>  <span class="er">&lt;</span>chr<span class="sc">&gt;</span>     </span>
<span id="cb429-6"><a href="ch6.html#cb429-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> Afghanistan  <span class="dv">1999</span> <span class="dv">745</span>    <span class="dv">19987071</span>  </span>
<span id="cb429-7"><a href="ch6.html#cb429-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> Afghanistan  <span class="dv">2000</span> <span class="dv">2666</span>   <span class="dv">20595360</span>  </span>
<span id="cb429-8"><a href="ch6.html#cb429-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> Brazil       <span class="dv">1999</span> <span class="dv">37737</span>  <span class="dv">172006362</span> </span>
<span id="cb429-9"><a href="ch6.html#cb429-9" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> Brazil       <span class="dv">2000</span> <span class="dv">80488</span>  <span class="dv">174504898</span> </span>
<span id="cb429-10"><a href="ch6.html#cb429-10" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> China        <span class="dv">1999</span> <span class="dv">212258</span> <span class="dv">1272915272</span></span>
<span id="cb429-11"><a href="ch6.html#cb429-11" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span> China        <span class="dv">2000</span> <span class="dv">213766</span> <span class="dv">1280428583</span></span></code></pre></div>
<p>새롭게 생성된 두 변수 <code>cases</code>와 <code>population</code>의 자료 유형을 살펴보면 자료는 정수이지만, 유형은 문자라는 것을 알 수 있다. 이것은 분리 전 <code>rate</code> 열의 유형이 문자이기 때문인데, 분리 후 자료의 유형을 정수로 바꾸기 위해서는 <code>convert=TRUE</code>를 추가로 입력해야 한다.</p>
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb430-1"><a href="ch6.html#cb430-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> table3 <span class="sc">%&gt;%</span></span>
<span id="cb430-2"><a href="ch6.html#cb430-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">separate</span>(<span class="at">col =</span> rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;cases&quot;</span>,<span class="st">&quot;population&quot;</span>), </span>
<span id="cb430-3"><a href="ch6.html#cb430-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>            <span class="at">convert =</span> <span class="cn">TRUE</span>)</span>
<span id="cb430-4"><a href="ch6.html#cb430-4" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 6 × 4</span></span>
<span id="cb430-5"><a href="ch6.html#cb430-5" aria-hidden="true" tabindex="-1"></a>  country      year  cases population</span>
<span id="cb430-6"><a href="ch6.html#cb430-6" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>       <span class="er">&lt;</span>int<span class="sc">&gt;</span>  <span class="er">&lt;</span>int<span class="sc">&gt;</span>      <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb430-7"><a href="ch6.html#cb430-7" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> Afghanistan  <span class="dv">1999</span>    <span class="dv">745</span>   <span class="dv">19987071</span></span>
<span id="cb430-8"><a href="ch6.html#cb430-8" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> Afghanistan  <span class="dv">2000</span>   <span class="dv">2666</span>   <span class="dv">20595360</span></span>
<span id="cb430-9"><a href="ch6.html#cb430-9" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> Brazil       <span class="dv">1999</span>  <span class="dv">37737</span>  <span class="dv">172006362</span></span>
<span id="cb430-10"><a href="ch6.html#cb430-10" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> Brazil       <span class="dv">2000</span>  <span class="dv">80488</span>  <span class="dv">174504898</span></span>
<span id="cb430-11"><a href="ch6.html#cb430-11" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> China        <span class="dv">1999</span> <span class="dv">212258</span> <span class="dv">1272915272</span></span>
<span id="cb430-12"><a href="ch6.html#cb430-12" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span> China        <span class="dv">2000</span> <span class="dv">213766</span> <span class="dv">1280428583</span></span></code></pre></div>
<p>함수 <code>separate()</code>가 하나의 열에 함께 입력된 자료를 분리하는 디폴트 방식은 <code>col</code>에 지정된 열의 자료 중 숫자나 문자가 아닌 기호가 있으면 그것을 기준으로 분리하는 것이다. <code>table3</code>의 경우에는 <code>rate</code> 열의 두 자료를 빗금을 기준으로 구분하였다. 만일 특정 문자 또는 기호를 구분자로 사용하고자 한다면 <code>sep</code>에 지정하면 된다. 예제 자료로 다음의 <code>df_3</code>를 만들어 보자.</p>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="ch6.html#cb431-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df_3 <span class="ot">&lt;-</span> <span class="fu">tribble</span>(<span class="sc">~</span>Date, <span class="sc">~</span>Sales,</span>
<span id="cb431-2"><a href="ch6.html#cb431-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>                 <span class="st">&quot;2015-Qtr.1&quot;</span>, <span class="dv">15</span>,</span>
<span id="cb431-3"><a href="ch6.html#cb431-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>                 <span class="st">&quot;2015-Qtr.2&quot;</span>, <span class="dv">16</span>,</span>
<span id="cb431-4"><a href="ch6.html#cb431-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>                 <span class="st">&quot;2015-Qtr.3&quot;</span>, <span class="dv">19</span>,</span>
<span id="cb431-5"><a href="ch6.html#cb431-5" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>                 <span class="st">&quot;2015-Qtr.4&quot;</span>, <span class="dv">17</span>)</span>
<span id="cb431-6"><a href="ch6.html#cb431-6" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df_3</span>
<span id="cb431-7"><a href="ch6.html#cb431-7" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 4 × 2</span></span>
<span id="cb431-8"><a href="ch6.html#cb431-8" aria-hidden="true" tabindex="-1"></a>  Date       Sales</span>
<span id="cb431-9"><a href="ch6.html#cb431-9" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>      <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb431-10"><a href="ch6.html#cb431-10" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">2015</span><span class="sc">-</span>Qtr<span class="fl">.1</span>    <span class="dv">15</span></span>
<span id="cb431-11"><a href="ch6.html#cb431-11" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="dv">2015</span><span class="sc">-</span>Qtr<span class="fl">.2</span>    <span class="dv">16</span></span>
<span id="cb431-12"><a href="ch6.html#cb431-12" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="dv">2015</span><span class="sc">-</span>Qtr<span class="fl">.3</span>    <span class="dv">19</span></span>
<span id="cb431-13"><a href="ch6.html#cb431-13" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="dv">2015</span><span class="sc">-</span>Qtr<span class="fl">.4</span>    <span class="dv">17</span></span></code></pre></div>
<p><code>Date</code> 열에는 년도와 분기가 대시(<code>-</code>)로 구분되어 있으며, 분기 자료에 점(<code>.</code>)이 포함되어 있다. <code>Date</code>의 자료를 년도와 분기로 분리하기 위해서는 옵션 <code>sep</code>에 대시(<code>-</code>)를 지정해야 한다. 만일 <code>sep</code>를 따로 지정하지 않으면 대시와 점이 모두 분리 기준이 되어서 세 개의 열로 분리된다.</p>
<div class="sourceCode" id="cb432"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb432-1"><a href="ch6.html#cb432-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df_3 <span class="sc">%&gt;%</span></span>
<span id="cb432-2"><a href="ch6.html#cb432-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">separate</span>(<span class="at">col =</span> Date, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;Qtr&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;-&quot;</span>,</span>
<span id="cb432-3"><a href="ch6.html#cb432-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>            <span class="at">convert =</span> <span class="cn">TRUE</span>)</span>
<span id="cb432-4"><a href="ch6.html#cb432-4" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 4 × 3</span></span>
<span id="cb432-5"><a href="ch6.html#cb432-5" aria-hidden="true" tabindex="-1"></a>   year Qtr   Sales</span>
<span id="cb432-6"><a href="ch6.html#cb432-6" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb432-7"><a href="ch6.html#cb432-7" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="dv">2015</span> Qtr<span class="fl">.1</span>    <span class="dv">15</span></span>
<span id="cb432-8"><a href="ch6.html#cb432-8" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="dv">2015</span> Qtr<span class="fl">.2</span>    <span class="dv">16</span></span>
<span id="cb432-9"><a href="ch6.html#cb432-9" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  <span class="dv">2015</span> Qtr<span class="fl">.3</span>    <span class="dv">19</span></span>
<span id="cb432-10"><a href="ch6.html#cb432-10" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>  <span class="dv">2015</span> Qtr<span class="fl">.4</span>    <span class="dv">17</span></span></code></pre></div>
<p>자료 분리의 기준을 특정 기호가 아닌 위치로도 할 수 있다. 분리 위치는 정수로 나타내는데, 양의 정수는 자료의 왼쪽 끝을 기준으로 하는 위치로서 왼쪽 끝이 1이 된다. 음의 정수는 자료의 오른쪽 끝을 기준으로 하는 위치로서 오른쪽 끝이 -1이 된다. 예제 자료로 다음의 <code>df_4</code>를 만들어 보자.</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="ch6.html#cb433-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df_4 <span class="ot">&lt;-</span> <span class="fu">tribble</span>(<span class="sc">~</span>Date, <span class="sc">~</span>Sales,</span>
<span id="cb433-2"><a href="ch6.html#cb433-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>                 <span class="st">&quot;2015Q1&quot;</span>, <span class="dv">15</span>,</span>
<span id="cb433-3"><a href="ch6.html#cb433-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>                 <span class="st">&quot;2015Q2&quot;</span>, <span class="dv">16</span>,</span>
<span id="cb433-4"><a href="ch6.html#cb433-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>                 <span class="st">&quot;2015Q3&quot;</span>, <span class="dv">19</span>,</span>
<span id="cb433-5"><a href="ch6.html#cb433-5" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>                 <span class="st">&quot;2015Q4&quot;</span>, <span class="dv">17</span>)</span>
<span id="cb433-6"><a href="ch6.html#cb433-6" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df_4</span>
<span id="cb433-7"><a href="ch6.html#cb433-7" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 4 × 2</span></span>
<span id="cb433-8"><a href="ch6.html#cb433-8" aria-hidden="true" tabindex="-1"></a>  Date   Sales</span>
<span id="cb433-9"><a href="ch6.html#cb433-9" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb433-10"><a href="ch6.html#cb433-10" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> 2015Q1    <span class="dv">15</span></span>
<span id="cb433-11"><a href="ch6.html#cb433-11" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> 2015Q2    <span class="dv">16</span></span>
<span id="cb433-12"><a href="ch6.html#cb433-12" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> 2015Q3    <span class="dv">19</span></span>
<span id="cb433-13"><a href="ch6.html#cb433-13" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> 2015Q4    <span class="dv">17</span></span></code></pre></div>
<p><code>Date</code> 열의 자료를 년도와 분기로 구분해 보자. 분리 기준 위치는 왼쪽 끝부터는 4번째 자리이고 오른쪽 끝부터는 2번째 자리가 된다. 따라서 <code>sep</code>에 4 또는 -2를 지정하면 된다.</p>
<div class="sourceCode" id="cb434"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb434-1"><a href="ch6.html#cb434-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df_4 <span class="sc">%&gt;%</span></span>
<span id="cb434-2"><a href="ch6.html#cb434-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">separate</span>(<span class="at">col =</span> Date, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>,<span class="st">&quot;Qtr&quot;</span>), <span class="at">sep =</span> <span class="dv">4</span>)</span>
<span id="cb434-3"><a href="ch6.html#cb434-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 4 × 3</span></span>
<span id="cb434-4"><a href="ch6.html#cb434-4" aria-hidden="true" tabindex="-1"></a>  year  Qtr   Sales</span>
<span id="cb434-5"><a href="ch6.html#cb434-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb434-6"><a href="ch6.html#cb434-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">2015</span>  Q1       <span class="dv">15</span></span>
<span id="cb434-7"><a href="ch6.html#cb434-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="dv">2015</span>  Q2       <span class="dv">16</span></span>
<span id="cb434-8"><a href="ch6.html#cb434-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="dv">2015</span>  Q3       <span class="dv">19</span></span>
<span id="cb434-9"><a href="ch6.html#cb434-9" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="dv">2015</span>  Q4       <span class="dv">17</span></span></code></pre></div>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="ch6.html#cb435-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df_4 <span class="sc">%&gt;%</span></span>
<span id="cb435-2"><a href="ch6.html#cb435-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">separate</span>(<span class="at">col =</span> Date, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>,<span class="st">&quot;Qtr&quot;</span>), <span class="at">sep =</span> <span class="sc">-</span><span class="dv">2</span>)</span>
<span id="cb435-3"><a href="ch6.html#cb435-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 4 × 3</span></span>
<span id="cb435-4"><a href="ch6.html#cb435-4" aria-hidden="true" tabindex="-1"></a>  year  Qtr   Sales</span>
<span id="cb435-5"><a href="ch6.html#cb435-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb435-6"><a href="ch6.html#cb435-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">2015</span>  Q1       <span class="dv">15</span></span>
<span id="cb435-7"><a href="ch6.html#cb435-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="dv">2015</span>  Q2       <span class="dv">16</span></span>
<span id="cb435-8"><a href="ch6.html#cb435-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="dv">2015</span>  Q3       <span class="dv">19</span></span>
<span id="cb435-9"><a href="ch6.html#cb435-9" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="dv">2015</span>  Q4       <span class="dv">17</span></span></code></pre></div>
<p><strong>2. 함수 <code>unite()</code></strong></p>
<p>패키지 <code>tidyr</code>의 데이터 프레임 <code>table5</code>를 살펴보자. 년도가 <code>century</code> 열과 <code>year</code> 열로 분리되어 있는데, 이것을 하나로 합쳐보자.</p>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb436-1"><a href="ch6.html#cb436-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> table5</span>
<span id="cb436-2"><a href="ch6.html#cb436-2" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 6 × 4</span></span>
<span id="cb436-3"><a href="ch6.html#cb436-3" aria-hidden="true" tabindex="-1"></a>  country     century year  rate             </span>
<span id="cb436-4"><a href="ch6.html#cb436-4" aria-hidden="true" tabindex="-1"></a><span class="sc">*</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>       <span class="er">&lt;</span>chr<span class="sc">&gt;</span>   <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>            </span>
<span id="cb436-5"><a href="ch6.html#cb436-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> Afghanistan <span class="dv">19</span>      <span class="dv">99</span>    <span class="dv">745</span><span class="sc">/</span><span class="dv">19987071</span>     </span>
<span id="cb436-6"><a href="ch6.html#cb436-6" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> Afghanistan <span class="dv">20</span>      <span class="dv">00</span>    <span class="dv">2666</span><span class="sc">/</span><span class="dv">20595360</span>    </span>
<span id="cb436-7"><a href="ch6.html#cb436-7" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> Brazil      <span class="dv">19</span>      <span class="dv">99</span>    <span class="dv">37737</span><span class="sc">/</span><span class="dv">172006362</span>  </span>
<span id="cb436-8"><a href="ch6.html#cb436-8" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> Brazil      <span class="dv">20</span>      <span class="dv">00</span>    <span class="dv">80488</span><span class="sc">/</span><span class="dv">174504898</span>  </span>
<span id="cb436-9"><a href="ch6.html#cb436-9" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> China       <span class="dv">19</span>      <span class="dv">99</span>    <span class="dv">212258</span><span class="sc">/</span><span class="dv">1272915272</span></span>
<span id="cb436-10"><a href="ch6.html#cb436-10" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span> China       <span class="dv">20</span>      <span class="dv">00</span>    <span class="dv">213766</span><span class="sc">/</span><span class="dv">1280428583</span></span></code></pre></div>
<p>함수 <code>unite()</code>는 여러 열의 자료를 하나의 열로 합쳐야 할 때 사용되며, 기본적인 사용 법은 <code>unite(data, col, ..., sep="_")</code>이다. <code>col</code>에는 합쳐서 새롭게 생성될 열의 이름을 지정하고, 이어서 합쳐질 열을 나열하면 된다. 열의 나열은 <code>&lt;tidy-select&gt;</code> 방식을 사용할 수 있다.</p>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb437-1"><a href="ch6.html#cb437-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> table5 <span class="sc">%&gt;%</span></span>
<span id="cb437-2"><a href="ch6.html#cb437-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">unite</span>(<span class="at">col =</span> year, century, year)</span>
<span id="cb437-3"><a href="ch6.html#cb437-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 6 × 3</span></span>
<span id="cb437-4"><a href="ch6.html#cb437-4" aria-hidden="true" tabindex="-1"></a>  country     year  rate             </span>
<span id="cb437-5"><a href="ch6.html#cb437-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>       <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>            </span>
<span id="cb437-6"><a href="ch6.html#cb437-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> Afghanistan 19_99 <span class="dv">745</span><span class="sc">/</span><span class="dv">19987071</span>     </span>
<span id="cb437-7"><a href="ch6.html#cb437-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> Afghanistan 20_00 <span class="dv">2666</span><span class="sc">/</span><span class="dv">20595360</span>    </span>
<span id="cb437-8"><a href="ch6.html#cb437-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> Brazil      19_99 <span class="dv">37737</span><span class="sc">/</span><span class="dv">172006362</span>  </span>
<span id="cb437-9"><a href="ch6.html#cb437-9" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> Brazil      20_00 <span class="dv">80488</span><span class="sc">/</span><span class="dv">174504898</span>  </span>
<span id="cb437-10"><a href="ch6.html#cb437-10" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> China       19_99 <span class="dv">212258</span><span class="sc">/</span><span class="dv">1272915272</span></span>
<span id="cb437-11"><a href="ch6.html#cb437-11" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span> China       20_00 <span class="dv">213766</span><span class="sc">/</span><span class="dv">1280428583</span></span></code></pre></div>
<p>하나의 열에 합쳐진 여러 열의 자료는 밑줄로 구분되는 것이 디폴트인데, 이것을 제거하려면 <code>sep = ""</code>을 입력하면 된다.</p>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb438-1"><a href="ch6.html#cb438-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> table5 <span class="sc">%&gt;%</span></span>
<span id="cb438-2"><a href="ch6.html#cb438-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">unite</span>(<span class="at">col =</span> year, century, year, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb438-3"><a href="ch6.html#cb438-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 6 × 3</span></span>
<span id="cb438-4"><a href="ch6.html#cb438-4" aria-hidden="true" tabindex="-1"></a>  country     year  rate             </span>
<span id="cb438-5"><a href="ch6.html#cb438-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>       <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>            </span>
<span id="cb438-6"><a href="ch6.html#cb438-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> Afghanistan <span class="dv">1999</span>  <span class="dv">745</span><span class="sc">/</span><span class="dv">19987071</span>     </span>
<span id="cb438-7"><a href="ch6.html#cb438-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> Afghanistan <span class="dv">2000</span>  <span class="dv">2666</span><span class="sc">/</span><span class="dv">20595360</span>    </span>
<span id="cb438-8"><a href="ch6.html#cb438-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> Brazil      <span class="dv">1999</span>  <span class="dv">37737</span><span class="sc">/</span><span class="dv">172006362</span>  </span>
<span id="cb438-9"><a href="ch6.html#cb438-9" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> Brazil      <span class="dv">2000</span>  <span class="dv">80488</span><span class="sc">/</span><span class="dv">174504898</span>  </span>
<span id="cb438-10"><a href="ch6.html#cb438-10" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> China       <span class="dv">1999</span>  <span class="dv">212258</span><span class="sc">/</span><span class="dv">1272915272</span></span>
<span id="cb438-11"><a href="ch6.html#cb438-11" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span> China       <span class="dv">2000</span>  <span class="dv">213766</span><span class="sc">/</span><span class="dv">1280428583</span></span></code></pre></div>
<p>변수 <code>year</code>에 입력된 자료가 정수이지만 유형은 문자이고, <code>rate</code> 열에는 두 변수의 자료가 함께 입력되어 있다. 변수 <code>year</code>의 유형을 정수로 변환하고, 이어서 <code>rate</code> 열의 자료를 분리하여 tidy 데이터로 변환시켜 보자.</p>
<div class="sourceCode" id="cb439"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb439-1"><a href="ch6.html#cb439-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> table5 <span class="sc">%&gt;%</span></span>
<span id="cb439-2"><a href="ch6.html#cb439-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">unite</span>(<span class="at">col =</span> year, century, year, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb439-3"><a href="ch6.html#cb439-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">separate</span>(<span class="at">col =</span> rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;cases&quot;</span>,<span class="st">&quot;population&quot;</span>), </span>
<span id="cb439-4"><a href="ch6.html#cb439-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>            <span class="at">convert =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb439-5"><a href="ch6.html#cb439-5" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.integer</span>(year))</span>
<span id="cb439-6"><a href="ch6.html#cb439-6" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 6 × 4</span></span>
<span id="cb439-7"><a href="ch6.html#cb439-7" aria-hidden="true" tabindex="-1"></a>  country      year  cases population</span>
<span id="cb439-8"><a href="ch6.html#cb439-8" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>       <span class="er">&lt;</span>int<span class="sc">&gt;</span>  <span class="er">&lt;</span>int<span class="sc">&gt;</span>      <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb439-9"><a href="ch6.html#cb439-9" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> Afghanistan  <span class="dv">1999</span>    <span class="dv">745</span>   <span class="dv">19987071</span></span>
<span id="cb439-10"><a href="ch6.html#cb439-10" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> Afghanistan  <span class="dv">2000</span>   <span class="dv">2666</span>   <span class="dv">20595360</span></span>
<span id="cb439-11"><a href="ch6.html#cb439-11" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> Brazil       <span class="dv">1999</span>  <span class="dv">37737</span>  <span class="dv">172006362</span></span>
<span id="cb439-12"><a href="ch6.html#cb439-12" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> Brazil       <span class="dv">2000</span>  <span class="dv">80488</span>  <span class="dv">174504898</span></span>
<span id="cb439-13"><a href="ch6.html#cb439-13" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> China        <span class="dv">1999</span> <span class="dv">212258</span> <span class="dv">1272915272</span></span>
<span id="cb439-14"><a href="ch6.html#cb439-14" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span> China        <span class="dv">2000</span> <span class="dv">213766</span> <span class="dv">1280428583</span></span></code></pre></div>
</div>
</div>
<div id="dplyr에-의한-데이터-결합" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> <code>dplyr</code>에 의한 데이터 결합<a href="ch6.html#dplyr에-의한-데이터-결합" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>몇 개의 파일로 분산 정리되어 있는 데이터를 하나의 데이터 프레임으로 통합하는 것은 본격적인 통계분석을 실시하기 전에 반드시 마무리해야 되는 작업이다. 이러한 데이터 프레임의 통합 작업은 base R 함수인 <code>merge()</code>로도 할 수 있으나, 더 개선된 기능을 갖고 있는 함수가 패키지 <code>dplyr</code>에 있다.</p>
<p><strong>1. Mutating joins</strong></p>
<p>두 데이터 프레임을 대상으로 기준 열(key)을 이용한 수평적 결합으로 변수를 확대하는 방식의 결합 방법을 의미한다. 함수 <code>mutate()</code>에서와 같이 결합으로 새로 추가되는 변수는 결합되는 데이터 프레임의 마지막 변수가 된다. 기준 열을 이용한 두 데이터 프레임의 수평적 결합이란 key 변수의 값이 같은 행을 결합하는 것을 의미하는 것으로써, 원하는 결합 방식에 따라 다른 함수를 사용해야 한다. 예를 들어 데이터 프레임 <code>df1</code>과 <code>df2</code>를 결합한다고 할 때, 통합된 데이터 프레임이 어떤 행(관찰값)을 유지하게 할 것인가에 따라 다음 4가지 함수 중 하나를 사용하면 된다.</p>
<ul>
<li><p>함수 <code>inner_join(df1, df2)</code>: <code>df1</code>과 <code>df2</code>에 공통적으로 존재하는 행만 유지</p></li>
<li><p>함수 <code>left_join(df1, df2)</code>: <code>df1</code>에 있는 모든 행 유지</p></li>
<li><p>함수 <code>right_join(df1, df2)</code>: <code>df2</code>에 있는 모든 행 유지</p></li>
<li><p>함수 <code>full_join(df1, df2)</code>: <code>df1</code>과 <code>df2</code>에 있는 모든 행 유지</p></li>
</ul>
<p>패키지 <code>dplyr</code>에 있는 데이터 프레임 <code>band_members</code>와 <code>band_instruments</code>를 살펴보자. 두 데이터 프레임에는 Beatles와 Rolling Stones 그룹 멤버 중 몇 명의 이름과 그들이 그룹에서 연주하는 악기가 정리되어 있다.</p>
<div class="sourceCode" id="cb440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb440-1"><a href="ch6.html#cb440-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(tidyverse)</span>
<span id="cb440-2"><a href="ch6.html#cb440-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> band_members</span>
<span id="cb440-3"><a href="ch6.html#cb440-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 × 2</span></span>
<span id="cb440-4"><a href="ch6.html#cb440-4" aria-hidden="true" tabindex="-1"></a>  name  band   </span>
<span id="cb440-5"><a href="ch6.html#cb440-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>  </span>
<span id="cb440-6"><a href="ch6.html#cb440-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> Mick  Stones </span>
<span id="cb440-7"><a href="ch6.html#cb440-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> John  Beatles</span>
<span id="cb440-8"><a href="ch6.html#cb440-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> Paul  Beatles</span>
<span id="cb440-9"><a href="ch6.html#cb440-9" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> band_instruments</span>
<span id="cb440-10"><a href="ch6.html#cb440-10" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 × 2</span></span>
<span id="cb440-11"><a href="ch6.html#cb440-11" aria-hidden="true" tabindex="-1"></a>  name  plays </span>
<span id="cb440-12"><a href="ch6.html#cb440-12" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> </span>
<span id="cb440-13"><a href="ch6.html#cb440-13" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> John  guitar</span>
<span id="cb440-14"><a href="ch6.html#cb440-14" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> Paul  bass  </span>
<span id="cb440-15"><a href="ch6.html#cb440-15" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> Keith guitar</span></code></pre></div>
<p>Key 변수는 옵션 <code>by</code>에 지정하면 된다. 위의 예에서 두 데이터 프레임에 공통적으로 들어있는 변수 <code>name</code>을 key 변수로 지정하면 되는데, <code>by = "name"</code>과 같이 변수 이름을 인용 부호로 감싸고 지정하면 된다. 옵션 <code>by</code>가 생략되면 두 데이터 프레임에 공통적으로 있는 이름이 같은 변수가 key가 되며, 이름이 같은 변수가 없으면 통합이 이루어지지 않는다.</p>
<p>또한 결합 대상이 되는 두 데이터 프레임에서 사용할 key 변수가 서로 이름이 다른 경우에는 <code>by = c("x" = "y")</code>와 같이 지정하면 된다. 첫 번째 데이터 프레임의 변수 <code>x</code>와 두 번째 데이터 프레임의 변수 <code>y</code>가 key 변수로 지정되어 결합이 이루어지며, 결합된 데이터 프레임의 key 변수 이름은 첫 번째 데이터 프레임의 key 변수인 <code>x</code>가 된다.</p>
<p>이제 함수 <code>inner_join()</code>에 의한 결과를 살펴보자.</p>
<div class="sourceCode" id="cb441"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb441-1"><a href="ch6.html#cb441-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> band_members <span class="sc">%&gt;%</span> </span>
<span id="cb441-2"><a href="ch6.html#cb441-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">inner_join</span>(band_instruments, <span class="at">by =</span> <span class="st">&quot;name&quot;</span>)</span>
<span id="cb441-3"><a href="ch6.html#cb441-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 2 × 3</span></span>
<span id="cb441-4"><a href="ch6.html#cb441-4" aria-hidden="true" tabindex="-1"></a>  name  band    plays </span>
<span id="cb441-5"><a href="ch6.html#cb441-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>   <span class="er">&lt;</span>chr<span class="sc">&gt;</span> </span>
<span id="cb441-6"><a href="ch6.html#cb441-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> John  Beatles guitar</span>
<span id="cb441-7"><a href="ch6.html#cb441-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> Paul  Beatles bass  </span></code></pre></div>
<p>통합 결과로 변수는 3개가 되었고, 관찰값은 두 데이터 프레임에 공통적으로 포함된 2개만 유지가 되었다. 이와 같이 공통적으로 포함된 관찰값만 유지하는 결합 방법은 너무 많은 데이터를 잃어버릴 수 있는 것이어서 매우 신중하게 사용해야 하는 방법이 된다.</p>
<p>다음은 함수 <code>left_join()</code>에 의한 결과를 살펴보자.</p>
<div class="sourceCode" id="cb442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb442-1"><a href="ch6.html#cb442-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> band_members <span class="sc">%&gt;%</span> </span>
<span id="cb442-2"><a href="ch6.html#cb442-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">left_join</span>(band_instruments, <span class="at">by =</span> <span class="st">&quot;name&quot;</span>)</span>
<span id="cb442-3"><a href="ch6.html#cb442-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 × 3</span></span>
<span id="cb442-4"><a href="ch6.html#cb442-4" aria-hidden="true" tabindex="-1"></a>  name  band    plays </span>
<span id="cb442-5"><a href="ch6.html#cb442-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>   <span class="er">&lt;</span>chr<span class="sc">&gt;</span> </span>
<span id="cb442-6"><a href="ch6.html#cb442-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> Mick  Stones  <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  </span>
<span id="cb442-7"><a href="ch6.html#cb442-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> John  Beatles guitar</span>
<span id="cb442-8"><a href="ch6.html#cb442-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> Paul  Beatles bass  </span></code></pre></div>
<p><code>band_members</code>에 있는 관찰값은 모두 유지가 된 상태에서 <code>band_instruments</code>에 있는 변수 <code>plays</code>가 새로운 변수로 추가되었다. 만일 첫 번째 데이터 프레임이 주로 분석에 사용되는 데이터 프레임이고, 두 번째 데이터 프레임에 있는 변수를 첫 번째 데이터 프레임에 추가하는 작업을 하고자 한다면 적절하게 사용될 수 있는 함수이다.</p>
<p>함수 <code>right_join()</code>은 두 번째 데이터 프레임이 주로 분석에 사용되는 데이터 프레임이고 첫 번째 데이터 프레임에 있는 변수를 추가하고자 할 때 사용할 수 있는 함수이다.</p>
<div class="sourceCode" id="cb443"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb443-1"><a href="ch6.html#cb443-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> band_members <span class="sc">%&gt;%</span> </span>
<span id="cb443-2"><a href="ch6.html#cb443-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">right_join</span>(band_instruments, <span class="at">by =</span> <span class="st">&quot;name&quot;</span>)</span>
<span id="cb443-3"><a href="ch6.html#cb443-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 × 3</span></span>
<span id="cb443-4"><a href="ch6.html#cb443-4" aria-hidden="true" tabindex="-1"></a>  name  band    plays </span>
<span id="cb443-5"><a href="ch6.html#cb443-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>   <span class="er">&lt;</span>chr<span class="sc">&gt;</span> </span>
<span id="cb443-6"><a href="ch6.html#cb443-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> John  Beatles guitar</span>
<span id="cb443-7"><a href="ch6.html#cb443-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> Paul  Beatles bass  </span>
<span id="cb443-8"><a href="ch6.html#cb443-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> Keith <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>    guitar</span></code></pre></div>
<p>두 번째 데이터 프레임인 <code>band_instuments</code>에 있는 관찰값은 모두 유지가 되었고, 첫번째 데이터 프레임인 <code>band_members</code>에 없는 마지막 관찰값의 경우에는 추가된 변수 <code>band</code>에 <code>NA</code>가 할당되었다.</p>
<p>이번에는 함수 <code>full_join()</code>에 의한 결과를 살펴보자.</p>
<div class="sourceCode" id="cb444"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb444-1"><a href="ch6.html#cb444-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> band_members <span class="sc">%&gt;%</span> </span>
<span id="cb444-2"><a href="ch6.html#cb444-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">full_join</span>(band_instruments, <span class="at">by =</span> <span class="st">&quot;name&quot;</span>)</span>
<span id="cb444-3"><a href="ch6.html#cb444-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 4 × 3</span></span>
<span id="cb444-4"><a href="ch6.html#cb444-4" aria-hidden="true" tabindex="-1"></a>  name  band    plays </span>
<span id="cb444-5"><a href="ch6.html#cb444-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>   <span class="er">&lt;</span>chr<span class="sc">&gt;</span> </span>
<span id="cb444-6"><a href="ch6.html#cb444-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> Mick  Stones  <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  </span>
<span id="cb444-7"><a href="ch6.html#cb444-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> John  Beatles guitar</span>
<span id="cb444-8"><a href="ch6.html#cb444-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> Paul  Beatles bass  </span>
<span id="cb444-9"><a href="ch6.html#cb444-9" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> Keith <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>    guitar</span></code></pre></div>
<p>두 데이터 프레임에 있는 모든 관찰값이 유지되었다. 만일 행(관찰값)과 열(변수)을 모두 확장하는 방향으로 두 데이터 프레임을 결합을 하고자 한다면 가장 적절하게 사용할 수 있는 함수이다.</p>
<p>이번에는 데이터 프레임 <code>band_members</code>와 <code>band_instruments2</code>를 결합해 보자.</p>
<div class="sourceCode" id="cb445"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb445-1"><a href="ch6.html#cb445-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> band_members</span>
<span id="cb445-2"><a href="ch6.html#cb445-2" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 × 2</span></span>
<span id="cb445-3"><a href="ch6.html#cb445-3" aria-hidden="true" tabindex="-1"></a>  name  band   </span>
<span id="cb445-4"><a href="ch6.html#cb445-4" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>  </span>
<span id="cb445-5"><a href="ch6.html#cb445-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> Mick  Stones </span>
<span id="cb445-6"><a href="ch6.html#cb445-6" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> John  Beatles</span>
<span id="cb445-7"><a href="ch6.html#cb445-7" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> Paul  Beatles</span>
<span id="cb445-8"><a href="ch6.html#cb445-8" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> band_instruments2</span>
<span id="cb445-9"><a href="ch6.html#cb445-9" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 × 2</span></span>
<span id="cb445-10"><a href="ch6.html#cb445-10" aria-hidden="true" tabindex="-1"></a>  artist plays </span>
<span id="cb445-11"><a href="ch6.html#cb445-11" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>  <span class="er">&lt;</span>chr<span class="sc">&gt;</span> </span>
<span id="cb445-12"><a href="ch6.html#cb445-12" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> John   guitar</span>
<span id="cb445-13"><a href="ch6.html#cb445-13" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> Paul   bass  </span>
<span id="cb445-14"><a href="ch6.html#cb445-14" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> Keith  guitar</span></code></pre></div>
<p><code>band_members</code>의 <code>name</code>과 <code>band_instruments2</code>의 <code>artist</code>를 key 변수로 사용해야 하는 경우가 된다. 함수 <code>left_join()</code>의 결과만 살펴보자.</p>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="ch6.html#cb446-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> band_members <span class="sc">%&gt;%</span> </span>
<span id="cb446-2"><a href="ch6.html#cb446-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">left_join</span>(band_instruments2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;name&quot;</span> <span class="ot">=</span> <span class="st">&quot;artist&quot;</span>))</span>
<span id="cb446-3"><a href="ch6.html#cb446-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 × 3</span></span>
<span id="cb446-4"><a href="ch6.html#cb446-4" aria-hidden="true" tabindex="-1"></a>  name  band    plays </span>
<span id="cb446-5"><a href="ch6.html#cb446-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>   <span class="er">&lt;</span>chr<span class="sc">&gt;</span> </span>
<span id="cb446-6"><a href="ch6.html#cb446-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> Mick  Stones  <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  </span>
<span id="cb446-7"><a href="ch6.html#cb446-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> John  Beatles guitar</span>
<span id="cb446-8"><a href="ch6.html#cb446-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> Paul  Beatles bass  </span></code></pre></div>
<p><strong>2. Filtering joins</strong></p>
<p>많은 경우 데이터 프레임의 결합은 행 또는 열을 확대하는 방향으로 이루어진다. 하지만 어떤 경우에는 다른 데이터 프레임과 공통적으로 갖고 있는 행(관찰값)만을 유지하거나 공통적으로 갖고 있는 행을 삭제해야 할 때가 있다. 이러한 결합을 위해 사용할 수 있는 함수가 다음과 같다.</p>
<ul>
<li><p>함수 <code>semi_join(df1, df2)</code>: <code>df1</code>의 행 중에 <code>df2</code>에 있는 모든 행 유지</p></li>
<li><p>함수 <code>anti_join(df1, df2)</code>: <code>df1</code>의 행 중에 <code>df2</code>에 있는 모든 행 삭제</p></li>
</ul>
<p>예를 들어 <code>band_members</code>와 <code>band_instruments</code>를 대상으로 두 함수를 적용한 결과는 다음과 같다.</p>
<div class="sourceCode" id="cb447"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb447-1"><a href="ch6.html#cb447-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> band_members <span class="sc">%&gt;%</span> </span>
<span id="cb447-2"><a href="ch6.html#cb447-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">semi_join</span>(band_instruments, <span class="at">by =</span> <span class="st">&quot;name&quot;</span>)</span>
<span id="cb447-3"><a href="ch6.html#cb447-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 2 × 2</span></span>
<span id="cb447-4"><a href="ch6.html#cb447-4" aria-hidden="true" tabindex="-1"></a>  name  band   </span>
<span id="cb447-5"><a href="ch6.html#cb447-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>  </span>
<span id="cb447-6"><a href="ch6.html#cb447-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> John  Beatles</span>
<span id="cb447-7"><a href="ch6.html#cb447-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> Paul  Beatles</span></code></pre></div>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="ch6.html#cb448-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> band_members <span class="sc">%&gt;%</span> </span>
<span id="cb448-2"><a href="ch6.html#cb448-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">anti_join</span>(band_instruments, <span class="at">by =</span> <span class="st">&quot;name&quot;</span>)</span>
<span id="cb448-3"><a href="ch6.html#cb448-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 1 × 2</span></span>
<span id="cb448-4"><a href="ch6.html#cb448-4" aria-hidden="true" tabindex="-1"></a>  name  band  </span>
<span id="cb448-5"><a href="ch6.html#cb448-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> </span>
<span id="cb448-6"><a href="ch6.html#cb448-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> Mick  Stones</span></code></pre></div>
<p>함수 <code>semi_join()</code>에 의한 결합은 <code>band_members</code>의 행 중에 <code>band_instruments</code>에도 있는 두 행만을 유지한 결과를 보여주고 있으며, 함수 <code>anti_join()</code>은 <code>band_instruments</code>에 없는 하나의 행만을 선택했음을 보여주고 있다.</p>
<p><strong>3. 단순 수평 결합 및 수직 결합</strong></p>
<p>결합되는 데이터 프레임들이 행의 개수가 같고 각 행의 자료가 동일한 대상인 경우에는 데이터 프레임을 옆으로 붙여서 변수를 확대할 수 있다. 이 경우에 사용할 수 있는 함수가 <code>bind_cols()</code>이다. 대응되는 base R 함수는 <code>cbind()</code>이다.</p>
<div class="sourceCode" id="cb449"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb449-1"><a href="ch6.html#cb449-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df_x <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x1 =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="at">x2 =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb449-2"><a href="ch6.html#cb449-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df_y <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">y1 =</span> LETTERS[<span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>], <span class="at">y2 =</span> <span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>)</span>
<span id="cb449-3"><a href="ch6.html#cb449-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df_z <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x1 =</span> LETTERS[<span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>], <span class="at">x2 =</span> <span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>)</span></code></pre></div>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="ch6.html#cb450-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df_x</span>
<span id="cb450-2"><a href="ch6.html#cb450-2" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 × 2</span></span>
<span id="cb450-3"><a href="ch6.html#cb450-3" aria-hidden="true" tabindex="-1"></a>  x1       x2</span>
<span id="cb450-4"><a href="ch6.html#cb450-4" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb450-5"><a href="ch6.html#cb450-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> a         <span class="dv">1</span></span>
<span id="cb450-6"><a href="ch6.html#cb450-6" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> b         <span class="dv">2</span></span>
<span id="cb450-7"><a href="ch6.html#cb450-7" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> c         <span class="dv">3</span></span>
<span id="cb450-8"><a href="ch6.html#cb450-8" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df_y</span>
<span id="cb450-9"><a href="ch6.html#cb450-9" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 × 2</span></span>
<span id="cb450-10"><a href="ch6.html#cb450-10" aria-hidden="true" tabindex="-1"></a>  y1       y2</span>
<span id="cb450-11"><a href="ch6.html#cb450-11" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb450-12"><a href="ch6.html#cb450-12" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> D         <span class="dv">4</span></span>
<span id="cb450-13"><a href="ch6.html#cb450-13" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> E         <span class="dv">5</span></span>
<span id="cb450-14"><a href="ch6.html#cb450-14" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> F         <span class="dv">6</span></span>
<span id="cb450-15"><a href="ch6.html#cb450-15" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">bind_cols</span>(df_x, df_y)</span>
<span id="cb450-16"><a href="ch6.html#cb450-16" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 × 4</span></span>
<span id="cb450-17"><a href="ch6.html#cb450-17" aria-hidden="true" tabindex="-1"></a>  x1       x2 y1       y2</span>
<span id="cb450-18"><a href="ch6.html#cb450-18" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb450-19"><a href="ch6.html#cb450-19" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> a         <span class="dv">1</span> D         <span class="dv">4</span></span>
<span id="cb450-20"><a href="ch6.html#cb450-20" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> b         <span class="dv">2</span> E         <span class="dv">5</span></span>
<span id="cb450-21"><a href="ch6.html#cb450-21" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> c         <span class="dv">3</span> F         <span class="dv">6</span></span></code></pre></div>
<p>결합되는 데이터 프레임들의 열의 개수 및 이름이 같은 경우에는 위아래로 붙여서 케이스를 확대하는 방향으로 결합할 수 있다. 이런 경우에 사용할 수 있는 함수가 <code>bind_rows()</code>이다. 옵션 <code>.id</code>에 열 이름을 지정하면 각 행이 어떤 데이터 프레임에서 온 것인지를 구분해 주는 열이 첫 번째 열로 추가된다.</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb451-1"><a href="ch6.html#cb451-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df_x</span>
<span id="cb451-2"><a href="ch6.html#cb451-2" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 × 2</span></span>
<span id="cb451-3"><a href="ch6.html#cb451-3" aria-hidden="true" tabindex="-1"></a>  x1       x2</span>
<span id="cb451-4"><a href="ch6.html#cb451-4" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb451-5"><a href="ch6.html#cb451-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> a         <span class="dv">1</span></span>
<span id="cb451-6"><a href="ch6.html#cb451-6" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> b         <span class="dv">2</span></span>
<span id="cb451-7"><a href="ch6.html#cb451-7" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> c         <span class="dv">3</span></span>
<span id="cb451-8"><a href="ch6.html#cb451-8" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df_z</span>
<span id="cb451-9"><a href="ch6.html#cb451-9" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 × 2</span></span>
<span id="cb451-10"><a href="ch6.html#cb451-10" aria-hidden="true" tabindex="-1"></a>  x1       x2</span>
<span id="cb451-11"><a href="ch6.html#cb451-11" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb451-12"><a href="ch6.html#cb451-12" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> D         <span class="dv">4</span></span>
<span id="cb451-13"><a href="ch6.html#cb451-13" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> E         <span class="dv">5</span></span>
<span id="cb451-14"><a href="ch6.html#cb451-14" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> F         <span class="dv">6</span></span>
<span id="cb451-15"><a href="ch6.html#cb451-15" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">bind_rows</span>(df_x, df_z, <span class="at">.id =</span> <span class="st">&quot;df&quot;</span>)</span>
<span id="cb451-16"><a href="ch6.html#cb451-16" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 6 × 3</span></span>
<span id="cb451-17"><a href="ch6.html#cb451-17" aria-hidden="true" tabindex="-1"></a>  df    x1       x2</span>
<span id="cb451-18"><a href="ch6.html#cb451-18" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb451-19"><a href="ch6.html#cb451-19" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">1</span>     a         <span class="dv">1</span></span>
<span id="cb451-20"><a href="ch6.html#cb451-20" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="dv">1</span>     b         <span class="dv">2</span></span>
<span id="cb451-21"><a href="ch6.html#cb451-21" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="dv">1</span>     c         <span class="dv">3</span></span>
<span id="cb451-22"><a href="ch6.html#cb451-22" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="dv">2</span>     D         <span class="dv">4</span></span>
<span id="cb451-23"><a href="ch6.html#cb451-23" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="dv">2</span>     E         <span class="dv">5</span></span>
<span id="cb451-24"><a href="ch6.html#cb451-24" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span> <span class="dv">2</span>     F         <span class="dv">6</span></span></code></pre></div>
</div>
<div id="stringr에-의한-문자-다루기" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> <code>stringr</code>에 의한 문자 다루기<a href="ch6.html#stringr에-의한-문자-다루기" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Base R에도 함수 <code>nchar()</code>나 <code>paste()</code> 등과 같이 문자열을 다루는 함수들이 있다. 유용하게 사용되는 함수들이지만 함수 이름에 일관성이 없어서 기억하기 쉽지 않다는 문제가 있다. 이에 반하여 패키지 <code>stringr</code>의 함수들은 모두 <code>str_</code>로 시작되며, 비교적 어렵지 않게 의미를 파악할 수 있는 이름을 갖고 있어서, 주어진 상황에 필요한 함수가 무엇인지 상대적으로 기억하기 쉽다는 장점이 있다.</p>
<div id="stringr의-함수" class="section level3 hasAnchor" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> <code>stringr</code>의 함수<a href="ch6.html#stringr의-함수" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong><span class="math inline">\(\bullet\)</span> <code>str_length()</code> : 문자열의 문자 개수 세기</strong></p>
<p>문자열을 구성하는 문자의 개수를 세는 함수이며, base R에서 대응되는 함수는 <code>nchar()</code>이다.</p>
<div class="sourceCode" id="cb452"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb452-1"><a href="ch6.html#cb452-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(tidyverse)</span>
<span id="cb452-2"><a href="ch6.html#cb452-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_length</span>(<span class="fu">c</span>(<span class="st">&quot;Park&quot;</span>,<span class="st">&quot;Lee&quot;</span>,<span class="st">&quot;Oh&quot;</span>, <span class="cn">NA</span>))</span>
<span id="cb452-3"><a href="ch6.html#cb452-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="dv">4</span>  <span class="dv">3</span>  <span class="dv">2</span> <span class="cn">NA</span></span>
<span id="cb452-4"><a href="ch6.html#cb452-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_length</span>(<span class="st">&quot;응용통계학과&quot;</span>)</span>
<span id="cb452-5"><a href="ch6.html#cb452-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">6</span></span></code></pre></div>
<p><strong><span class="math inline">\(\bullet\)</span> <code>str_c()</code>: 문자열의 결합</strong></p>
<p>문자열 및 문자형 벡터의 결합에 사용되는 함수이며, base R에서 대응되는 함수는 <code>paste0()</code>이다.</p>
<div class="sourceCode" id="cb453"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb453-1"><a href="ch6.html#cb453-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_c</span>(<span class="st">&quot;Stat&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb453-2"><a href="ch6.html#cb453-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Stat1&quot;</span> <span class="st">&quot;Stat2&quot;</span> <span class="st">&quot;Stat3&quot;</span></span>
<span id="cb453-3"><a href="ch6.html#cb453-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_c</span>(<span class="st">&quot;Stat&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">sep =</span> <span class="st">&quot;-&quot;</span>)</span>
<span id="cb453-4"><a href="ch6.html#cb453-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Stat-1&quot;</span> <span class="st">&quot;Stat-2&quot;</span> <span class="st">&quot;Stat-3&quot;</span></span></code></pre></div>
<p>옵션 <code>collapse</code>를 사용하면 문자형 벡터를 구성하는 문자열을 하나로 묶는 작업을 할 수 있다.</p>
<div class="sourceCode" id="cb454"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb454-1"><a href="ch6.html#cb454-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_c</span>(letters, <span class="at">collapse =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb454-2"><a href="ch6.html#cb454-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span></span>
<span id="cb454-3"><a href="ch6.html#cb454-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_c</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], <span class="at">collapse =</span> <span class="st">&quot;,&quot;</span>)</span>
<span id="cb454-4"><a href="ch6.html#cb454-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;aA,bB,cC,dD,eE&quot;</span></span></code></pre></div>
<p>문자형 벡터에 <code>NA</code>가 있는 경우에는 다른 문자형 벡터와의 결합 결과도 당연히 <code>NA</code>가 된다.</p>
<div class="sourceCode" id="cb455"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb455-1"><a href="ch6.html#cb455-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Stat&quot;</span>, <span class="st">&quot;Math&quot;</span>, <span class="cn">NA</span>)</span>
<span id="cb455-2"><a href="ch6.html#cb455-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_c</span>(x, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb455-3"><a href="ch6.html#cb455-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Stat/1&quot;</span> <span class="st">&quot;Math/2&quot;</span> <span class="cn">NA</span>      </span></code></pre></div>
<p>만일 결측값 <code>NA</code>를 문자열 <code>"NA"</code>로 표시하고자 한다면 함수 <code>str_replace_na()</code>를 사용하면 된다.</p>
<div class="sourceCode" id="cb456"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb456-1"><a href="ch6.html#cb456-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> (y <span class="ot">&lt;-</span> <span class="fu">str_replace_na</span>(x))</span>
<span id="cb456-2"><a href="ch6.html#cb456-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Stat&quot;</span> <span class="st">&quot;Math&quot;</span> <span class="st">&quot;NA&quot;</span>  </span>
<span id="cb456-3"><a href="ch6.html#cb456-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_c</span>(y, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb456-4"><a href="ch6.html#cb456-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Stat/1&quot;</span> <span class="st">&quot;Math/2&quot;</span> <span class="st">&quot;NA/3&quot;</span>  </span></code></pre></div>
<p><strong><span class="math inline">\(\bullet\)</span> <code>str_dup()</code>: 문자열의 반복</strong></p>
<p>주어진 문자열을 반복시켜서 새로운 문자열을 만들 때 편리하게 사용할 수 있는 함수이다. 반복 대상이 되는 문자열 혹은 문자형 벡터를 입력하고 반복시킬 횟수를 <code>times</code>에 지정하면 된다.</p>
<div class="sourceCode" id="cb457"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb457-1"><a href="ch6.html#cb457-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_dup</span>(<span class="st">&quot;a&quot;</span>, <span class="at">times =</span> <span class="dv">3</span>)</span>
<span id="cb457-2"><a href="ch6.html#cb457-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;aaa&quot;</span></span>
<span id="cb457-3"><a href="ch6.html#cb457-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_dup</span>(<span class="st">&quot;a&quot;</span>, <span class="at">times =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb457-4"><a href="ch6.html#cb457-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;a&quot;</span>    <span class="st">&quot;aa&quot;</span>   <span class="st">&quot;aaa&quot;</span>  <span class="st">&quot;aaaa&quot;</span></span></code></pre></div>
<p>반복 대상이 벡터인 경우에는 <code>times</code>에 스칼라 혹은 반복 대상이 되는 벡터와 같은 길이의 숫자형 벡터를 지정해야 한다.</p>
<div class="sourceCode" id="cb458"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb458-1"><a href="ch6.html#cb458-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_dup</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>), <span class="at">times =</span> <span class="dv">3</span>)</span>
<span id="cb458-2"><a href="ch6.html#cb458-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;aaa&quot;</span> <span class="st">&quot;bbb&quot;</span></span>
<span id="cb458-3"><a href="ch6.html#cb458-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_dup</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>), <span class="at">times =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>))</span>
<span id="cb458-4"><a href="ch6.html#cb458-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;aa&quot;</span>  <span class="st">&quot;bbb&quot;</span></span></code></pre></div>
<p><strong><span class="math inline">\(\bullet\)</span> <code>str_sub()</code>: 문자열에서 일부분 선택</strong></p>
<p>주어진 문자열에서 일부분을 추출하거나 혹은 선택한 일부분을 교체하는 작업을 하는 함수이며, 대응되는 R base 함수는 <code>substr()</code>이다. 추출 대상이 되는 문자열을 입력하고 <code>start</code>와 <code>end</code>에 시작점과 끝점의 위치를 나타내는 정수를 지정하면 된다. 양의 정수는 문자열의 왼쪽 끝에서부터의 위치를 나타내고, 음의 정수는 문자열의 오른쪽 끝에서부터의 위치를 나타낸다. 디폴트 값은 <code>start=1L</code>, <code>end=-1L</code>로써, 입력된 문자열 전체가 그대로 출력된다.</p>
<div class="sourceCode" id="cb459"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb459-1"><a href="ch6.html#cb459-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Apple&quot;</span>, <span class="st">&quot;Banana&quot;</span>, <span class="st">&quot;Pear&quot;</span>)</span>
<span id="cb459-2"><a href="ch6.html#cb459-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_sub</span>(x, <span class="at">start =</span> <span class="dv">1</span>, <span class="at">end =</span> <span class="dv">2</span>)</span>
<span id="cb459-3"><a href="ch6.html#cb459-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Ap&quot;</span> <span class="st">&quot;Ba&quot;</span> <span class="st">&quot;Pe&quot;</span></span>
<span id="cb459-4"><a href="ch6.html#cb459-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_sub</span>(x, <span class="at">start =</span> <span class="sc">-</span><span class="dv">2</span>, <span class="at">end =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb459-5"><a href="ch6.html#cb459-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;le&quot;</span> <span class="st">&quot;na&quot;</span> <span class="st">&quot;ar&quot;</span></span></code></pre></div>
<p>문자열에서 선택한 일부분을 교체하는 작업은 <code>str_sub() &lt;-</code>의 형식으로 이루어진다. 예를 들어 문자형 벡터 <code>y</code>의 첫 글자를 모두 대문자로 교체해 보자. 영문자를 소문자로 교체하는 작업은 함수 <code>str_to_lower()</code>로 할 수 있고, 대문자로 교체하는 작업은 함수 <code>str_to_upper()</code>로 할 수 있다.</p>
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb460-1"><a href="ch6.html#cb460-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;apple&quot;</span>, <span class="st">&quot;banana&quot;</span>, <span class="st">&quot;pear&quot;</span>)</span>
<span id="cb460-2"><a href="ch6.html#cb460-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_sub</span>(y, <span class="dv">1</span>, <span class="dv">1</span>) <span class="ot">&lt;-</span> <span class="fu">str_to_upper</span>(<span class="fu">str_sub</span>(y, <span class="dv">1</span>, <span class="dv">1</span>))</span>
<span id="cb460-3"><a href="ch6.html#cb460-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> y</span>
<span id="cb460-4"><a href="ch6.html#cb460-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Apple&quot;</span>  <span class="st">&quot;Banana&quot;</span> <span class="st">&quot;Pear&quot;</span>  </span></code></pre></div>
<p>이번에는 다음에 주어진 벡터 <code>w</code>의 첫 글자를 제외한 나머지 모든 글자를 소문자로 교체해 보자.</p>
<div class="sourceCode" id="cb461"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb461-1"><a href="ch6.html#cb461-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> w <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;APPLE&quot;</span>, <span class="st">&quot;BANANA&quot;</span>, <span class="st">&quot;PEAR&quot;</span>)</span>
<span id="cb461-2"><a href="ch6.html#cb461-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_sub</span>(w, <span class="dv">2</span>, <span class="sc">-</span><span class="dv">1</span>) <span class="ot">&lt;-</span> <span class="fu">str_to_lower</span>(<span class="fu">str_sub</span>(w, <span class="dv">2</span>, <span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb461-3"><a href="ch6.html#cb461-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> w</span>
<span id="cb461-4"><a href="ch6.html#cb461-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Apple&quot;</span>  <span class="st">&quot;Banana&quot;</span> <span class="st">&quot;Pear&quot;</span>  </span></code></pre></div>
<p><strong><span class="math inline">\(\bullet\)</span> <code>str_split()</code>: 문자열의 분할</strong></p>
<p>하나의 문자열을 여러 개로 분할하는 작업을 하는 함수이며, 대응되는 base R 함수는 <code>strsplit()</code>이다. 분할 대상이 되는 문자열을 입력하고 이어서 분할 기준이 되는 패턴을 입력하면 된다. 옵션 <code>simplify</code>에 <code>TRUE</code>를 지정하면 결과가 행렬로 출력되며, 디폴트인 <code>FALSE</code>가 지정되면 리스트로 출력된다.</p>
<p>다음의 벡터 <code>x</code>의 문자열을 콤마를 기준으로 분리해 보자.</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb462-1"><a href="ch6.html#cb462-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;New York, NY&quot;</span>, <span class="st">&quot;Ann Arbor, MI&quot;</span>, <span class="st">&quot;Chicago, IL&quot;</span>)</span>
<span id="cb462-2"><a href="ch6.html#cb462-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_split</span>(x, <span class="st">&quot;,&quot;</span>)</span>
<span id="cb462-3"><a href="ch6.html#cb462-3" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb462-4"><a href="ch6.html#cb462-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;New York&quot;</span> <span class="st">&quot; NY&quot;</span>     </span>
<span id="cb462-5"><a href="ch6.html#cb462-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb462-6"><a href="ch6.html#cb462-6" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb462-7"><a href="ch6.html#cb462-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Ann Arbor&quot;</span> <span class="st">&quot; MI&quot;</span>      </span>
<span id="cb462-8"><a href="ch6.html#cb462-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb462-9"><a href="ch6.html#cb462-9" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">3</span>]]</span>
<span id="cb462-10"><a href="ch6.html#cb462-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Chicago&quot;</span> <span class="st">&quot; IL&quot;</span>    </span>
<span id="cb462-11"><a href="ch6.html#cb462-11" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_split</span>(x, <span class="st">&quot;,&quot;</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span>
<span id="cb462-12"><a href="ch6.html#cb462-12" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>]        [,<span class="dv">2</span>] </span>
<span id="cb462-13"><a href="ch6.html#cb462-13" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="st">&quot;New York&quot;</span>  <span class="st">&quot; NY&quot;</span></span>
<span id="cb462-14"><a href="ch6.html#cb462-14" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,] <span class="st">&quot;Ann Arbor&quot;</span> <span class="st">&quot; MI&quot;</span></span>
<span id="cb462-15"><a href="ch6.html#cb462-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,] <span class="st">&quot;Chicago&quot;</span>   <span class="st">&quot; IL&quot;</span></span></code></pre></div>
<p>빈칸을 기준으로 문자열을 분리하는 것도 가능하다. 다음의 벡터 <code>y</code>의 문자열을 빈칸을 기준으로 분리해 보자.</p>
<div class="sourceCode" id="cb463"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb463-1"><a href="ch6.html#cb463-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;red apple&quot;</span>, <span class="st">&quot;yellow banana&quot;</span>)</span>
<span id="cb463-2"><a href="ch6.html#cb463-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_split</span>(y, <span class="st">&quot; &quot;</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span>
<span id="cb463-3"><a href="ch6.html#cb463-3" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>]     [,<span class="dv">2</span>]    </span>
<span id="cb463-4"><a href="ch6.html#cb463-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="st">&quot;red&quot;</span>    <span class="st">&quot;apple&quot;</span> </span>
<span id="cb463-5"><a href="ch6.html#cb463-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,] <span class="st">&quot;yellow&quot;</span> <span class="st">&quot;banana&quot;</span></span></code></pre></div>
<p>벡터 ’y’의 두 문자열은 하나의 빈칸으로 구분되어 있기 때문에 함수 <code>str_split()</code>에 입력되는 패턴은 정확히 하나의 빈칸이 인용 부호로 감싸져 있어야 한다. 만일 두 칸 이상의 빈칸을 패턴으로 입력하면 문자열의 분리는 이루어지지 않는다.</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="ch6.html#cb464-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_split</span>(y, <span class="st">&quot;   &quot;</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span>
<span id="cb464-2"><a href="ch6.html#cb464-2" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>]           </span>
<span id="cb464-3"><a href="ch6.html#cb464-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="st">&quot;red apple&quot;</span>    </span>
<span id="cb464-4"><a href="ch6.html#cb464-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,] <span class="st">&quot;yellow banana&quot;</span></span></code></pre></div>
<p>주어진 문자열을 개별 영문자로 분리하고자 한다면 인용 부호 사이에 빈칸을 없애고 입력하면 된다.</p>
<div class="sourceCode" id="cb465"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb465-1"><a href="ch6.html#cb465-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_split</span>(y, <span class="st">&quot;&quot;</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span>
<span id="cb465-2"><a href="ch6.html#cb465-2" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>] [,<span class="dv">6</span>] [,<span class="dv">7</span>] [,<span class="dv">8</span>] [,<span class="dv">9</span>] [,<span class="dv">10</span>] [,<span class="dv">11</span>] [,<span class="dv">12</span>] [,<span class="dv">13</span>]</span>
<span id="cb465-3"><a href="ch6.html#cb465-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="st">&quot;r&quot;</span>  <span class="st">&quot;e&quot;</span>  <span class="st">&quot;d&quot;</span>  <span class="st">&quot; &quot;</span>  <span class="st">&quot;a&quot;</span>  <span class="st">&quot;p&quot;</span>  <span class="st">&quot;p&quot;</span>  <span class="st">&quot;l&quot;</span>  <span class="st">&quot;e&quot;</span>  <span class="st">&quot;&quot;</span>    <span class="st">&quot;&quot;</span>    <span class="st">&quot;&quot;</span>    <span class="st">&quot;&quot;</span>   </span>
<span id="cb465-4"><a href="ch6.html#cb465-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,] <span class="st">&quot;y&quot;</span>  <span class="st">&quot;e&quot;</span>  <span class="st">&quot;l&quot;</span>  <span class="st">&quot;l&quot;</span>  <span class="st">&quot;o&quot;</span>  <span class="st">&quot;w&quot;</span>  <span class="st">&quot; &quot;</span>  <span class="st">&quot;b&quot;</span>  <span class="st">&quot;a&quot;</span>  <span class="st">&quot;n&quot;</span>   <span class="st">&quot;a&quot;</span>   <span class="st">&quot;n&quot;</span>   <span class="st">&quot;a&quot;</span>  </span></code></pre></div>
<p><strong><span class="math inline">\(\bullet\)</span> <code>str_replace()</code>와 <code>str_replace_all()</code>: 문자열의 치환</strong></p>
<p>문자열의 일부분을 치환하는 작업을 하는 함수이며, 대응되는 base R 함수로는 <code>sub()</code>와 <code>gsub()</code>이다. 두 함수의 기본적인 사용법은 동일하다. 먼저 문자열 혹은 문자형 벡터를 입력하고 이어서 치환 대상이 되는 패턴을 입력한 후 새롭게 바꾸려는 문자열을 그 다음에 입력하면 된다. 두 함수의 차이는 <code>str_replace()</code>가 지정된 패턴과 첫 번째 매치가 되는 문자열만을 치환하는 데 반하여 <code>str_replace_all()</code>은 패턴과 매치가 되는 모든 문자열을 치환한다는 점이다.</p>
<p>다음의 벡터 <code>x</code>에서 소문자 a를 찾아서 대문자 A로 바꾸는 작업을 두 함수로 각각 시행해 보자.</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="ch6.html#cb466-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">&lt;-</span> <span class="fu">str_c</span>(<span class="st">&quot;banana&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb466-2"><a href="ch6.html#cb466-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_replace</span>(x, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;A&quot;</span>)</span>
<span id="cb466-3"><a href="ch6.html#cb466-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;bAnana1&quot;</span> <span class="st">&quot;bAnana2&quot;</span> <span class="st">&quot;bAnana3&quot;</span></span>
<span id="cb466-4"><a href="ch6.html#cb466-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_replace_all</span>(x, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;A&quot;</span>)</span>
<span id="cb466-5"><a href="ch6.html#cb466-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;bAnAnA1&quot;</span> <span class="st">&quot;bAnAnA2&quot;</span> <span class="st">&quot;bAnAnA3&quot;</span></span></code></pre></div>
<p>함수 <code>str_replace_all()</code>의 경우에는 문자형 벡터의 각 문자열마다 각기 다른 내용의 치환을 실시할 수 있다. 이 경우에는 치환 대상이 되는 패턴과 새롭게 바꾸려는 문자열을 각각 등호로 연결을 해야 한다.</p>
<div class="sourceCode" id="cb467"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb467-1"><a href="ch6.html#cb467-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> (x <span class="ot">&lt;-</span> <span class="fu">str_c</span>(<span class="st">&quot;banana&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>))</span>
<span id="cb467-2"><a href="ch6.html#cb467-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;banana1&quot;</span> <span class="st">&quot;banana2&quot;</span> <span class="st">&quot;banana3&quot;</span></span>
<span id="cb467-3"><a href="ch6.html#cb467-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_replace_all</span>(x, <span class="fu">c</span>(<span class="st">&quot;1&quot;</span> <span class="ot">=</span> <span class="st">&quot; one&quot;</span>, <span class="st">&quot;2&quot;</span> <span class="ot">=</span> <span class="st">&quot; two&quot;</span>, <span class="st">&quot;3&quot;</span> <span class="ot">=</span> <span class="st">&quot; three&quot;</span>))</span>
<span id="cb467-4"><a href="ch6.html#cb467-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;banana one&quot;</span>   <span class="st">&quot;banana two&quot;</span>   <span class="st">&quot;banana three&quot;</span></span></code></pre></div>
<p><strong><span class="math inline">\(\bullet\)</span> <code>str_detect( )</code>, <code>str_count()</code>: 매치되는 패턴의 존재 여부 확인 및 개수 계산</strong></p>
<p>주어진 문자열에서 매치되는 패턴의 존재 여부를 확인하는 작업과 매치되는 패턴의 개수를 세는 작업은 주어진 문자열의 특성을 파악하는데 큰 도움이 될 수 있다. 예를 들어 주어진 문장에 특정 단어의 포함 여부 및 포함 횟수를 파악함으로써 그 문장의 대략적인 의미를 미루어 짐작할 수 있을 것이다.</p>
<p>함수 <code>str_count()</code>의 사용법은 문자열을 먼저 입력하고 이어서 패턴을 입력하면 된다. 벡터 <code>x</code>를 구성하고 있는 각 문자열에 소문자 <code>"p"</code>의 존재 여부 확인 및 매치되는 패턴의 개수는 다음과 같이 확인할 수 있다.</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb468-1"><a href="ch6.html#cb468-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;apple&quot;</span>, <span class="st">&quot;banana&quot;</span>, <span class="st">&quot;pear&quot;</span>)</span>
<span id="cb468-2"><a href="ch6.html#cb468-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_detect</span>(x, <span class="st">&quot;p&quot;</span>)</span>
<span id="cb468-3"><a href="ch6.html#cb468-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="cn">TRUE</span> <span class="cn">FALSE</span>  <span class="cn">TRUE</span></span>
<span id="cb468-4"><a href="ch6.html#cb468-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_count</span>(x, <span class="st">&quot;p&quot;</span>)</span>
<span id="cb468-5"><a href="ch6.html#cb468-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">2</span> <span class="dv">0</span> <span class="dv">1</span></span></code></pre></div>
<p>패키지 <code>stringr</code>에 있는 <code>words</code>는 980개의 단어로 구성된 문자형 벡터로, 처음 5개 단어는 다음과 같다.</p>
<div class="sourceCode" id="cb469"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb469-1"><a href="ch6.html#cb469-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">length</span>(words)</span>
<span id="cb469-2"><a href="ch6.html#cb469-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">980</span></span>
<span id="cb469-3"><a href="ch6.html#cb469-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> words[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb469-4"><a href="ch6.html#cb469-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;a&quot;</span>        <span class="st">&quot;able&quot;</span>     <span class="st">&quot;about&quot;</span>    <span class="st">&quot;absolute&quot;</span> <span class="st">&quot;accept&quot;</span>  </span></code></pre></div>
<p>벡터 <code>words</code>의 980개 단어에 사용된 모음 중 가장 빈번하게 사용된 모음이 어떤 것인지 함수 <code>str_count()</code>로 다음과 같이 확인할 수 있다. 모음 <code>"e"</code>가 686번 사용되어 가장 빈번하게 사용되었음을 알 수 있다.</p>
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb470-1"><a href="ch6.html#cb470-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">sum</span>(<span class="fu">str_count</span>(words, <span class="st">&quot;a&quot;</span>))</span>
<span id="cb470-2"><a href="ch6.html#cb470-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">385</span></span>
<span id="cb470-3"><a href="ch6.html#cb470-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">sum</span>(<span class="fu">str_count</span>(words, <span class="st">&quot;e&quot;</span>))</span>
<span id="cb470-4"><a href="ch6.html#cb470-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">686</span></span>
<span id="cb470-5"><a href="ch6.html#cb470-5" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">sum</span>(<span class="fu">str_count</span>(words, <span class="st">&quot;i&quot;</span>))</span>
<span id="cb470-6"><a href="ch6.html#cb470-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">319</span></span>
<span id="cb470-7"><a href="ch6.html#cb470-7" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">sum</span>(<span class="fu">str_count</span>(words, <span class="st">&quot;o&quot;</span>))</span>
<span id="cb470-8"><a href="ch6.html#cb470-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">373</span></span>
<span id="cb470-9"><a href="ch6.html#cb470-9" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">sum</span>(<span class="fu">str_count</span>(words, <span class="st">&quot;u&quot;</span>))</span>
<span id="cb470-10"><a href="ch6.html#cb470-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">189</span></span></code></pre></div>
<p>모음 <code>"e"</code>가 포함된 단어의 개수는 다음과 같이 확인할 수 있다.</p>
<div class="sourceCode" id="cb471"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb471-1"><a href="ch6.html#cb471-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">sum</span>(<span class="fu">str_detect</span>(words, <span class="st">&quot;e&quot;</span>))</span>
<span id="cb471-2"><a href="ch6.html#cb471-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">536</span></span></code></pre></div>
<p><strong><span class="math inline">\(\bullet\)</span> <code>str_subset()</code>: 매치되는 패턴이 포함된 문자열 추출</strong></p>
<p>매치되는 패턴의 개수를 세는 것도 중요한 작업이지만 패턴이 포함된 문자열 자체를 추출하는 것 또한 매우 의미 있는 작업이다. 함수 <code>str_subset()</code>은 주어진 문자열 중에 지정한 패턴이 포함되어 있는 문자열 자체를 추출할 수 있는데, 예를 들어 문자형 벡터 <code>words</code>에서 소문자 <code>"x"</code>가 포함된 단어는 다음과 같이 찾을 수 있다.</p>
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb472-1"><a href="ch6.html#cb472-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_subset</span>(words, <span class="st">&quot;x&quot;</span>)</span>
<span id="cb472-2"><a href="ch6.html#cb472-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">&quot;box&quot;</span>        <span class="st">&quot;exact&quot;</span>      <span class="st">&quot;example&quot;</span>    <span class="st">&quot;except&quot;</span>     <span class="st">&quot;excuse&quot;</span>    </span>
<span id="cb472-3"><a href="ch6.html#cb472-3" aria-hidden="true" tabindex="-1"></a> [<span class="dv">6</span>] <span class="st">&quot;exercise&quot;</span>   <span class="st">&quot;exist&quot;</span>      <span class="st">&quot;expect&quot;</span>     <span class="st">&quot;expense&quot;</span>    <span class="st">&quot;experience&quot;</span></span>
<span id="cb472-4"><a href="ch6.html#cb472-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">11</span>] <span class="st">&quot;explain&quot;</span>    <span class="st">&quot;express&quot;</span>    <span class="st">&quot;extra&quot;</span>      <span class="st">&quot;next&quot;</span>       <span class="st">&quot;sex&quot;</span>       </span>
<span id="cb472-5"><a href="ch6.html#cb472-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">16</span>] <span class="st">&quot;six&quot;</span>        <span class="st">&quot;tax&quot;</span>       </span></code></pre></div>
<p><strong><span class="math inline">\(\bullet\)</span> <code>str_extract()</code>와 <code>str_exract_all()</code>: 매치되는 패턴 추출</strong></p>
<p>매치되는 패턴이 포함된 문자열 전체를 추출해내는 것도 의미가 있지만, 각 문자열에서 매치되는 패턴만을 추출하는 것도 상당히 의미가 있다. 함수 <code>str_extract()</code>는 각 문자열에서 첫 번째로 매치되는 패턴을 추출하여 벡터로 출력한다. 반면에 함수 <code>str_extract_all()</code>은 매치되는 모든 패턴을 추출하여 리스트로 출력하며, 만일 옵션 <code>simplify=TRUE</code>를 추가하면 결과를 문자형 행렬로 출력한다.</p>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb473-1"><a href="ch6.html#cb473-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;ab&quot;</span>, <span class="st">&quot;acb&quot;</span>, <span class="st">&quot;acab&quot;</span>)</span>
<span id="cb473-2"><a href="ch6.html#cb473-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_extract</span>(x, <span class="st">&quot;ab&quot;</span>)</span>
<span id="cb473-3"><a href="ch6.html#cb473-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;ab&quot;</span> <span class="cn">NA</span>   <span class="st">&quot;ab&quot;</span></span>
<span id="cb473-4"><a href="ch6.html#cb473-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_extract_all</span>(x, <span class="st">&quot;ab&quot;</span>)</span>
<span id="cb473-5"><a href="ch6.html#cb473-5" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb473-6"><a href="ch6.html#cb473-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;ab&quot;</span></span>
<span id="cb473-7"><a href="ch6.html#cb473-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb473-8"><a href="ch6.html#cb473-8" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb473-9"><a href="ch6.html#cb473-9" aria-hidden="true" tabindex="-1"></a><span class="fu">character</span>(<span class="dv">0</span>)</span>
<span id="cb473-10"><a href="ch6.html#cb473-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb473-11"><a href="ch6.html#cb473-11" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">3</span>]]</span>
<span id="cb473-12"><a href="ch6.html#cb473-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;ab&quot;</span></span></code></pre></div>
</div>
<div id="정규-표현식과-stringr의-함수" class="section level3 hasAnchor" number="6.3.2">
<h3><span class="header-section-number">6.3.2</span> 정규 표현식과 <code>stringr</code>의 함수<a href="ch6.html#정규-표현식과-stringr의-함수" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>정규 표현식(regular expression)은 문자열에 있는 패턴을 표현하는 방식을 의미하는 것으로써, R에서만 다뤄지는 것이 아니라 문자열을 다루는 모든 프로그램에서 공통적으로 사용되는 매우 강력하고 유용한 기법이다. 이 절에서는 정규 표현식의 기초적인 내용을 살펴보고, 패키지 <code>stringr</code>의 함수와 함께 사용해보고자 한다.</p>
<p>문자열의 패턴 중 가장 단순한 형태는 문자열 자체이다. 예를 들어 문자형 벡터 <code>words</code>에서 소문자 <code>"x"</code>가 포함된 단어를 찾는 경우, 함수 <code>str_subset()</code>에서 사용되는 패턴은 소문자 <code>"x"</code>가 된다. 앞 절에서 살펴본 패키지 <code>stringr</code>의 함수들에 대한 예제에서 사용된 패턴은 모두 문자열 자체였다.</p>
<p>조금 복잡해진 문자열 패턴의 예로서 문자형 벡터 <code>words</code>에서 소문자 <code>"x"</code>로 끝나는 단어를 찾는 경우를 생각해 볼 수 있다. 이 경우에는 정규 표현식의 메타 문자 <code>$</code>을 사용하면 다음과 같이 간단하게 해당 단어를 찾을 수 있다.</p>
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb474-1"><a href="ch6.html#cb474-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_subset</span>(words, <span class="st">&quot;x$&quot;</span>)</span>
<span id="cb474-2"><a href="ch6.html#cb474-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;box&quot;</span> <span class="st">&quot;sex&quot;</span> <span class="st">&quot;six&quot;</span> <span class="st">&quot;tax&quot;</span></span></code></pre></div>
<p>이와 같이 정규 표현식을 패키지 <code>stringr</code>의 함수들과 함께 사용하면 한층 업그레이드된 강력한 분석 능력을 가질 수 있게 된다.</p>
<p><strong><span class="math inline">\(\bullet\)</span> 메타 문자(Meta character)</strong></p>
<p>정규 표현식에서 메타 문자란 특별한 의미를 갖고 있는 문자를 지칭하는 것으로써 다음의 문자들이 메타 문자에 해당한다.</p>
<pre><code>.  \  |  (  )  [  ]  {  }  ^  $  *  +  ?</code></pre>
<p>이제 각 메타 문자의 의미를 살펴보자.</p>
<ol style="list-style-type: decimal">
<li>점(<code>.</code>) : 모든 문자와 매치</li>
</ol>
<p>점(<code>.</code>)은 모든 문자와 매치가 된다. 문자형 벡터 <code>x</code>의 문자열 중에 소문자 <code>"a"</code>에 이어서 임의의 문자가 오는 패턴이 있는 문자열을 추출해 보자.</p>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="ch6.html#cb476-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;abac&quot;</span>, <span class="st">&quot;adc&quot;</span>, <span class="st">&quot;cba&quot;</span>)</span>
<span id="cb476-2"><a href="ch6.html#cb476-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_subset</span>(x, <span class="st">&quot;a.&quot;</span>)</span>
<span id="cb476-3"><a href="ch6.html#cb476-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;abac&quot;</span> <span class="st">&quot;adc&quot;</span> </span></code></pre></div>
<p>벡터 <code>x</code>을 구성하는 각 문자열에서 소문자 <code>"a"</code>에 이어서 임의의 문자가 오는 패턴을 추출해 보자.</p>
<div class="sourceCode" id="cb477"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb477-1"><a href="ch6.html#cb477-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;abac&quot;</span>, <span class="st">&quot;adc&quot;</span>, <span class="st">&quot;cba&quot;</span>)</span>
<span id="cb477-2"><a href="ch6.html#cb477-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_extract</span>(x, <span class="st">&quot;a.&quot;</span>)</span>
<span id="cb477-3"><a href="ch6.html#cb477-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;ab&quot;</span> <span class="st">&quot;ad&quot;</span> <span class="cn">NA</span>  </span>
<span id="cb477-4"><a href="ch6.html#cb477-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_extract_all</span>(x, <span class="st">&quot;a.&quot;</span>)</span>
<span id="cb477-5"><a href="ch6.html#cb477-5" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb477-6"><a href="ch6.html#cb477-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;ab&quot;</span> <span class="st">&quot;ac&quot;</span></span>
<span id="cb477-7"><a href="ch6.html#cb477-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-8"><a href="ch6.html#cb477-8" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb477-9"><a href="ch6.html#cb477-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;ad&quot;</span></span>
<span id="cb477-10"><a href="ch6.html#cb477-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-11"><a href="ch6.html#cb477-11" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">3</span>]]</span>
<span id="cb477-12"><a href="ch6.html#cb477-12" aria-hidden="true" tabindex="-1"></a><span class="fu">character</span>(<span class="dv">0</span>)</span>
<span id="cb477-13"><a href="ch6.html#cb477-13" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_extract_all</span>(x, <span class="st">&quot;a.&quot;</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span>
<span id="cb477-14"><a href="ch6.html#cb477-14" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>]</span>
<span id="cb477-15"><a href="ch6.html#cb477-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="st">&quot;ab&quot;</span> <span class="st">&quot;ac&quot;</span></span>
<span id="cb477-16"><a href="ch6.html#cb477-16" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,] <span class="st">&quot;ad&quot;</span> <span class="st">&quot;&quot;</span>  </span>
<span id="cb477-17"><a href="ch6.html#cb477-17" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,] <span class="st">&quot;&quot;</span>   <span class="st">&quot;&quot;</span>  </span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>역슬래시(<code>\</code>): 탈출 문자(Escape character)</li>
</ol>
<p>점(<code>.</code>)은 메타 문자로서 모든 문자와 매치된다. 그렇다면 문자 자체로서의 <code>"."</code>은 어떻게 매치해야 하는가? 예를 들어 다음의 벡터 <code>x</code>에서 문자열 중에 있는 점(<code>.</code>)을 함수 <code>str_extract()</code>로 추출해 보자.</p>
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb478-1"><a href="ch6.html#cb478-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a.c&quot;</span>, <span class="st">&quot;abc&quot;</span>)</span>
<span id="cb478-2"><a href="ch6.html#cb478-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_extract</span>(x, <span class="st">&quot;.&quot;</span>)</span>
<span id="cb478-3"><a href="ch6.html#cb478-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;a&quot;</span> <span class="st">&quot;a&quot;</span></span></code></pre></div>
<p>추출 결과는 점이 아니라 각 문자열의 첫 문자인 <code>"a"</code>가 출력되었다. 이러한 경우에는 메타 문자의 기능을 없애고 문자 자체의 의미만을 남겨두는 것이 필요한데, 이때 사용되는 것이 메타 문자의 기능에서 탈출시킨다는 의미를 갖고 있어서 탈출 문자라고 불리는 역슬래시(<code>\</code>)이다.</p>
<p>여기에서 한 가지 문제는 정규 표현식에서 탈출 문자로 사용되는 역슬래시가 문자열 자체에서도 탈출 문자로 사용된다는 점이다. 예를 들어, <code>"\n"</code>은 줄을 바꾸는 기호이고, <code>"\t"</code>은 탭 기호를 의미한다.<br />
따라서 문자 자체로써의 역슬래시 하나를 문자열에 포함시키기 위해서는 <code>"\\"</code>와 같이 두 개를 연속해서 사용해야 하며, 이러한 이유로 해서 정규 표현식 <code>\.</code>을 작성하기 위한 문자열은 <code>"\\."</code>이 되어야 한다.</p>
<div class="sourceCode" id="cb479"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb479-1"><a href="ch6.html#cb479-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a.c&quot;</span>, <span class="st">&quot;abc&quot;</span>)</span>
<span id="cb479-2"><a href="ch6.html#cb479-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_extract</span>(x, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">.&quot;</span>)</span>
<span id="cb479-3"><a href="ch6.html#cb479-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;.&quot;</span> <span class="cn">NA</span> </span></code></pre></div>
<p>또한 탈출 문자로 사용되는 역슬래시를 문자 자체로써 매치하려는 정규 표현식은 <code>\\</code>이 되며, 이것을 작성하기 위한 문자열은 <code>"\\\\"</code>이 된다.</p>
<p>다음의 벡터 <code>x</code>를 구성하는 문자열 중에 있는 역슬래시를 추출해 보자.</p>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb480-1"><a href="ch6.html#cb480-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a</span><span class="sc">\\</span><span class="st">b&quot;</span>, <span class="st">&quot;a</span><span class="sc">\\</span><span class="st">.b&quot;</span>, <span class="st">&quot;aeb&quot;</span>)</span>
<span id="cb480-2"><a href="ch6.html#cb480-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_extract</span>(x, <span class="st">&quot;</span><span class="sc">\\\\</span><span class="st">&quot;</span>)</span>
<span id="cb480-3"><a href="ch6.html#cb480-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;</span><span class="sc">\\</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">&quot;</span> <span class="cn">NA</span>  </span></code></pre></div>
<p>문자열을 그냥 출력하면 탈출 문자가 포함된 상태에서의 결과를 보여준다. 탈출 문자를 제거한 문자열 실제 모습을 보기 위해서는 함수 <code>writeLines()</code>를 사용해야 한다.</p>
<div class="sourceCode" id="cb481"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb481-1"><a href="ch6.html#cb481-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x</span>
<span id="cb481-2"><a href="ch6.html#cb481-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;a</span><span class="sc">\\</span><span class="st">b&quot;</span>  <span class="st">&quot;a</span><span class="sc">\\</span><span class="st">.b&quot;</span> <span class="st">&quot;aeb&quot;</span>  </span>
<span id="cb481-3"><a href="ch6.html#cb481-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">writeLines</span>(x)</span>
<span id="cb481-4"><a href="ch6.html#cb481-4" aria-hidden="true" tabindex="-1"></a>a\b</span>
<span id="cb481-5"><a href="ch6.html#cb481-5" aria-hidden="true" tabindex="-1"></a>a\.b</span>
<span id="cb481-6"><a href="ch6.html#cb481-6" aria-hidden="true" tabindex="-1"></a>aeb</span>
<span id="cb481-7"><a href="ch6.html#cb481-7" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">writeLines</span>(<span class="fu">str_extract</span>(x, <span class="st">&quot;</span><span class="sc">\\\\</span><span class="st">&quot;</span>))</span>
<span id="cb481-8"><a href="ch6.html#cb481-8" aria-hidden="true" tabindex="-1"></a>\</span>
<span id="cb481-9"><a href="ch6.html#cb481-9" aria-hidden="true" tabindex="-1"></a>\</span>
<span id="cb481-10"><a href="ch6.html#cb481-10" aria-hidden="true" tabindex="-1"></a><span class="cn">NA</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li><code>^</code>과 <code>$</code>: 위치 지정</li>
</ol>
<p>정규 표현식은 문자열의 위치에 관계 없이 매치되는 것이 일반적이다. 하지만 어떤 경우에는 위치를 지정해서 문자열의 시작 부분 혹은 끝 부분과 매치가 되도록 하는 것이 매우 효과적일 수 있다. 메타 문자 <code>^</code>은 문자열의 시작 부분을, <code>$</code>는 문자열의 끝 부분을 각각 지정하는 데에 사용된다.</p>
<p>다음의 벡터 <code>x</code>에서 <code>"a"</code>로 시작하는 문자열과 <code>"a"</code>로 끝나는 문자열에서 문자 <code>"a"</code>를 각각 추출해 보자.</p>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb482-1"><a href="ch6.html#cb482-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;apple&quot;</span>, <span class="st">&quot;banana&quot;</span>, <span class="st">&quot;pear&quot;</span>)</span>
<span id="cb482-2"><a href="ch6.html#cb482-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_extract</span>(x, <span class="st">&quot;^a&quot;</span>)</span>
<span id="cb482-3"><a href="ch6.html#cb482-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;a&quot;</span> <span class="cn">NA</span>  <span class="cn">NA</span> </span>
<span id="cb482-4"><a href="ch6.html#cb482-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_extract</span>(x, <span class="st">&quot;a$&quot;</span>)</span>
<span id="cb482-5"><a href="ch6.html#cb482-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">NA</span>  <span class="st">&quot;a&quot;</span> <span class="cn">NA</span> </span></code></pre></div>
<p>지정된 문자열만이 매치되도록 하기 위해서는 <code>^</code>와 <code>$</code>을 함께 사용하면 된다.</p>
<div class="sourceCode" id="cb483"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb483-1"><a href="ch6.html#cb483-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;apple pie&quot;</span>, <span class="st">&quot;apple&quot;</span>, <span class="st">&quot;apple cake&quot;</span>)</span>
<span id="cb483-2"><a href="ch6.html#cb483-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_extract</span>(x,<span class="st">&quot;apple&quot;</span>)</span>
<span id="cb483-3"><a href="ch6.html#cb483-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;apple&quot;</span> <span class="st">&quot;apple&quot;</span> <span class="st">&quot;apple&quot;</span></span>
<span id="cb483-4"><a href="ch6.html#cb483-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_extract</span>(x,<span class="st">&quot;^apple$&quot;</span>)</span>
<span id="cb483-5"><a href="ch6.html#cb483-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">NA</span>      <span class="st">&quot;apple&quot;</span> <span class="cn">NA</span>     </span></code></pre></div>
<p>벡터 <code>words</code>에 있는 단어 중 문자 <code>"y"</code>로 시작하는 단어와 <code>"x"</code>로 끝나는 단어, 그리고 두 문자로 이루어진 단어를 각각 추출해 보자.</p>
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb484-1"><a href="ch6.html#cb484-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_subset</span>(words, <span class="st">&quot;^y&quot;</span>)</span>
<span id="cb484-2"><a href="ch6.html#cb484-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;year&quot;</span>      <span class="st">&quot;yes&quot;</span>       <span class="st">&quot;yesterday&quot;</span> <span class="st">&quot;yet&quot;</span>       <span class="st">&quot;you&quot;</span>       <span class="st">&quot;young&quot;</span>    </span>
<span id="cb484-3"><a href="ch6.html#cb484-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_subset</span>(words, <span class="st">&quot;x$&quot;</span>)</span>
<span id="cb484-4"><a href="ch6.html#cb484-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;box&quot;</span> <span class="st">&quot;sex&quot;</span> <span class="st">&quot;six&quot;</span> <span class="st">&quot;tax&quot;</span></span>
<span id="cb484-5"><a href="ch6.html#cb484-5" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_subset</span>(words, <span class="st">&quot;^..$&quot;</span>)</span>
<span id="cb484-6"><a href="ch6.html#cb484-6" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">&quot;as&quot;</span> <span class="st">&quot;at&quot;</span> <span class="st">&quot;be&quot;</span> <span class="st">&quot;by&quot;</span> <span class="st">&quot;do&quot;</span> <span class="st">&quot;go&quot;</span> <span class="st">&quot;he&quot;</span> <span class="st">&quot;if&quot;</span> <span class="st">&quot;in&quot;</span> <span class="st">&quot;it&quot;</span> <span class="st">&quot;no&quot;</span> <span class="st">&quot;of&quot;</span> <span class="st">&quot;on&quot;</span> <span class="st">&quot;or&quot;</span> <span class="st">&quot;so&quot;</span></span>
<span id="cb484-7"><a href="ch6.html#cb484-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">16</span>] <span class="st">&quot;to&quot;</span> <span class="st">&quot;up&quot;</span> <span class="st">&quot;we&quot;</span></span></code></pre></div>
<p>벡터 <code>words</code>에 있는 단어 중 세 문자로 이루어진 단어의 개수를 알아보자.</p>
<div class="sourceCode" id="cb485"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb485-1"><a href="ch6.html#cb485-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> words <span class="sc">%&gt;%</span> </span>
<span id="cb485-2"><a href="ch6.html#cb485-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">str_count</span>(<span class="st">&quot;^...$&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb485-3"><a href="ch6.html#cb485-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">sum</span>()</span>
<span id="cb485-4"><a href="ch6.html#cb485-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">110</span></span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li><code>[ ]</code>: 문자 클래스</li>
</ol>
<p>문자 클래스는 대괄호 안에 나열된 문자를 의미하는 것인데, 나열된 문자 중 한 문자와 매치가 된다.</p>
<p>다음의 벡터 <code>x</code>에서 <code>"e"</code> 또는 <code>"o"</code>가 있는 문자열을 추출해 보자.</p>
<div class="sourceCode" id="cb486"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb486-1"><a href="ch6.html#cb486-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;adapt&quot;</span>, <span class="st">&quot;adept&quot;</span>, <span class="st">&quot;adopt&quot;</span>)</span>
<span id="cb486-2"><a href="ch6.html#cb486-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_subset</span>(x, <span class="st">&quot;[eo]&quot;</span>)</span>
<span id="cb486-3"><a href="ch6.html#cb486-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;adept&quot;</span> <span class="st">&quot;adopt&quot;</span></span></code></pre></div>
<p>패키지 <code>stringr</code>의 <code>fruit</code>은 80가지의 과일 이름으로 구성되어 있는 문자형 벡터이다. 이름이 모음으로 시작하는 과일을 <code>fruit</code>에서 찾아보자.</p>
<div class="sourceCode" id="cb487"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb487-1"><a href="ch6.html#cb487-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_subset</span>(fruit, <span class="st">&quot;^[aeiou]&quot;</span>)</span>
<span id="cb487-2"><a href="ch6.html#cb487-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;apple&quot;</span>      <span class="st">&quot;apricot&quot;</span>    <span class="st">&quot;avocado&quot;</span>    <span class="st">&quot;eggplant&quot;</span>   <span class="st">&quot;elderberry&quot;</span></span>
<span id="cb487-3"><a href="ch6.html#cb487-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">6</span>] <span class="st">&quot;olive&quot;</span>      <span class="st">&quot;orange&quot;</span>     <span class="st">&quot;ugli fruit&quot;</span></span></code></pre></div>
<p>문자 클래스에는 어떤 문자도 올 수 있지만 첫 문자가 <code>^</code>이면 정반대 의미의 매치가 이루어진다. 예를 들어 <code>[abc]</code>는 셋 중 어느 하나와 매치가 되지만 <code>[^abc]</code>는 세 문자를 제외한 다른 문자와 매치가 된다. 다음의 벡터 <code>x</code>에서 첫 문자가 <code>"a"</code> 또는 <code>"b"</code>가 아닌 문자열을 추출해 보자.</p>
<div class="sourceCode" id="cb488"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb488-1"><a href="ch6.html#cb488-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;abc&quot;</span>, <span class="st">&quot;bcd&quot;</span>, <span class="st">&quot;cde&quot;</span>)</span>
<span id="cb488-2"><a href="ch6.html#cb488-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_subset</span>(x, <span class="st">&quot;^[^ab]&quot;</span>)</span>
<span id="cb488-3"><a href="ch6.html#cb488-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;cde&quot;</span></span></code></pre></div>
<p>소문자 <code>"a"</code> 부터 <code>"z"</code>까지 중 어느 한 문자와의 매치를 <code>[abcdefghijklmnopqrstuvwxyz]</code>와 같이 구성할 수 있지만, 효율적인 방식은 아니라고 하겠고, 대신 하이픈을 이용해서 <code>[a-z]</code>로 할 수 있다. 따라서 소문자와 대문자를 포함한 모든 영문자 중 어느한 문자와의 매치는 <code>[A-Za-z]</code>로 작성할 수 있고, 숫자까지 포함시키고자 한다면, <code>[0-9A-Za-z]</code>로 작성할 수 있다.</p>
<p>하지만 더 효율적인 방식은 다음과 같이 미리 설정된 문자 클래스를 사용하는 것이다.</p>
<ul>
<li><p><code>[:punct:]</code> : 마침표, 쉼표 등의 구두점과 매치</p></li>
<li><p><code>[:alpha:]</code> : 글자와 매치</p></li>
<li><p><code>[:digit:]</code> : 숫자와 매치</p></li>
<li><p><code>[:alnum:]</code> : 숫자 및 글자와 매치</p></li>
<li><p><code>[:space:]</code> : 빈칸과 매치</p></li>
</ul>
<div class="sourceCode" id="cb489"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb489-1"><a href="ch6.html#cb489-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;I have $20.&quot;</span>, <span class="st">&quot;내 키는 175cm 이다.&quot;</span>)</span>
<span id="cb489-2"><a href="ch6.html#cb489-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_extract_all</span>(x, <span class="st">&quot;[:punct:]&quot;</span>)</span>
<span id="cb489-3"><a href="ch6.html#cb489-3" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb489-4"><a href="ch6.html#cb489-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;.&quot;</span></span>
<span id="cb489-5"><a href="ch6.html#cb489-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb489-6"><a href="ch6.html#cb489-6" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb489-7"><a href="ch6.html#cb489-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;.&quot;</span></span>
<span id="cb489-8"><a href="ch6.html#cb489-8" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_extract_all</span>(x, <span class="st">&quot;[:alpha:]&quot;</span>)</span>
<span id="cb489-9"><a href="ch6.html#cb489-9" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb489-10"><a href="ch6.html#cb489-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;I&quot;</span> <span class="st">&quot;h&quot;</span> <span class="st">&quot;a&quot;</span> <span class="st">&quot;v&quot;</span> <span class="st">&quot;e&quot;</span></span>
<span id="cb489-11"><a href="ch6.html#cb489-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb489-12"><a href="ch6.html#cb489-12" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb489-13"><a href="ch6.html#cb489-13" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;내&quot;</span> <span class="st">&quot;키&quot;</span> <span class="st">&quot;는&quot;</span> <span class="st">&quot;c&quot;</span>  <span class="st">&quot;m&quot;</span>  <span class="st">&quot;이&quot;</span> <span class="st">&quot;다&quot;</span></span>
<span id="cb489-14"><a href="ch6.html#cb489-14" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_extract_all</span>(x, <span class="st">&quot;[:digit:]&quot;</span>)</span>
<span id="cb489-15"><a href="ch6.html#cb489-15" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb489-16"><a href="ch6.html#cb489-16" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;2&quot;</span> <span class="st">&quot;0&quot;</span></span>
<span id="cb489-17"><a href="ch6.html#cb489-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb489-18"><a href="ch6.html#cb489-18" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb489-19"><a href="ch6.html#cb489-19" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;1&quot;</span> <span class="st">&quot;7&quot;</span> <span class="st">&quot;5&quot;</span></span>
<span id="cb489-20"><a href="ch6.html#cb489-20" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_extract_all</span>(x, <span class="st">&quot;[:alnum:]&quot;</span>)</span>
<span id="cb489-21"><a href="ch6.html#cb489-21" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb489-22"><a href="ch6.html#cb489-22" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;I&quot;</span> <span class="st">&quot;h&quot;</span> <span class="st">&quot;a&quot;</span> <span class="st">&quot;v&quot;</span> <span class="st">&quot;e&quot;</span> <span class="st">&quot;2&quot;</span> <span class="st">&quot;0&quot;</span></span>
<span id="cb489-23"><a href="ch6.html#cb489-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb489-24"><a href="ch6.html#cb489-24" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb489-25"><a href="ch6.html#cb489-25" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">&quot;내&quot;</span> <span class="st">&quot;키&quot;</span> <span class="st">&quot;는&quot;</span> <span class="st">&quot;1&quot;</span>  <span class="st">&quot;7&quot;</span>  <span class="st">&quot;5&quot;</span>  <span class="st">&quot;c&quot;</span>  <span class="st">&quot;m&quot;</span>  <span class="st">&quot;이&quot;</span> <span class="st">&quot;다&quot;</span></span>
<span id="cb489-26"><a href="ch6.html#cb489-26" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_split</span>(x, <span class="st">&quot;[:space:]&quot;</span>)</span>
<span id="cb489-27"><a href="ch6.html#cb489-27" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb489-28"><a href="ch6.html#cb489-28" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;I&quot;</span>    <span class="st">&quot;have&quot;</span> <span class="st">&quot;$20.&quot;</span></span>
<span id="cb489-29"><a href="ch6.html#cb489-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb489-30"><a href="ch6.html#cb489-30" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb489-31"><a href="ch6.html#cb489-31" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;내&quot;</span>    <span class="st">&quot;키는&quot;</span>  <span class="st">&quot;175cm&quot;</span> <span class="st">&quot;이다.&quot;</span></span></code></pre></div>
<p>탈출 문자를 사용한 다음과 같은 방식도 사용할 수 있다.</p>
<ul>
<li><p><code>\d</code> : 숫자와 매치</p></li>
<li><p><code>\D</code> : 숫자가 아닌 것과 매치</p></li>
<li><p><code>\w</code> : 숫자 및 글자와 매치</p></li>
<li><p><code>\W</code> : 숫자 및 글자가 아닌 것과 매치</p></li>
<li><p><code>\s</code> : 빈칸과 매치</p></li>
</ul>
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb490-1"><a href="ch6.html#cb490-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Don&#39;t eat!&quot;</span>, <span class="st">&quot;1+2=3&quot;</span>)</span>
<span id="cb490-2"><a href="ch6.html#cb490-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_extract_all</span>(x, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">d&quot;</span>)</span>
<span id="cb490-3"><a href="ch6.html#cb490-3" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb490-4"><a href="ch6.html#cb490-4" aria-hidden="true" tabindex="-1"></a><span class="fu">character</span>(<span class="dv">0</span>)</span>
<span id="cb490-5"><a href="ch6.html#cb490-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-6"><a href="ch6.html#cb490-6" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb490-7"><a href="ch6.html#cb490-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;1&quot;</span> <span class="st">&quot;2&quot;</span> <span class="st">&quot;3&quot;</span></span>
<span id="cb490-8"><a href="ch6.html#cb490-8" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_extract_all</span>(x, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">D&quot;</span>)</span>
<span id="cb490-9"><a href="ch6.html#cb490-9" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb490-10"><a href="ch6.html#cb490-10" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">&quot;D&quot;</span> <span class="st">&quot;o&quot;</span> <span class="st">&quot;n&quot;</span> <span class="st">&quot;&#39;&quot;</span> <span class="st">&quot;t&quot;</span> <span class="st">&quot; &quot;</span> <span class="st">&quot;e&quot;</span> <span class="st">&quot;a&quot;</span> <span class="st">&quot;t&quot;</span> <span class="st">&quot;!&quot;</span></span>
<span id="cb490-11"><a href="ch6.html#cb490-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-12"><a href="ch6.html#cb490-12" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb490-13"><a href="ch6.html#cb490-13" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;+&quot;</span> <span class="st">&quot;=&quot;</span></span>
<span id="cb490-14"><a href="ch6.html#cb490-14" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_extract_all</span>(x, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">w&quot;</span>)</span>
<span id="cb490-15"><a href="ch6.html#cb490-15" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb490-16"><a href="ch6.html#cb490-16" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;D&quot;</span> <span class="st">&quot;o&quot;</span> <span class="st">&quot;n&quot;</span> <span class="st">&quot;t&quot;</span> <span class="st">&quot;e&quot;</span> <span class="st">&quot;a&quot;</span> <span class="st">&quot;t&quot;</span></span>
<span id="cb490-17"><a href="ch6.html#cb490-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-18"><a href="ch6.html#cb490-18" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb490-19"><a href="ch6.html#cb490-19" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;1&quot;</span> <span class="st">&quot;2&quot;</span> <span class="st">&quot;3&quot;</span></span>
<span id="cb490-20"><a href="ch6.html#cb490-20" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_extract_all</span>(x, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">W&quot;</span>)</span>
<span id="cb490-21"><a href="ch6.html#cb490-21" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb490-22"><a href="ch6.html#cb490-22" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;&#39;&quot;</span> <span class="st">&quot; &quot;</span> <span class="st">&quot;!&quot;</span></span>
<span id="cb490-23"><a href="ch6.html#cb490-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-24"><a href="ch6.html#cb490-24" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb490-25"><a href="ch6.html#cb490-25" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;+&quot;</span> <span class="st">&quot;=&quot;</span></span>
<span id="cb490-26"><a href="ch6.html#cb490-26" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_split</span>(x, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">s&quot;</span>)</span>
<span id="cb490-27"><a href="ch6.html#cb490-27" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb490-28"><a href="ch6.html#cb490-28" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Don&#39;t&quot;</span> <span class="st">&quot;eat!&quot;</span> </span>
<span id="cb490-29"><a href="ch6.html#cb490-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-30"><a href="ch6.html#cb490-30" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb490-31"><a href="ch6.html#cb490-31" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;1+2=3&quot;</span></span></code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li><code>|</code> : 대안 제시</li>
</ol>
<p>메타 문자 <code>|</code>은 OR의 의미를 갖고 있다.
한 개 이상의 패턴을 문자 <code>|</code>으로 연결해 놓으면, 그 중 어느 하나와 매치가 된다.
예를 들어 <code>"abc|def"</code>는 <code>"abc"</code> 혹은 <code>"def"</code>와 매치가 된다.</p>
<div class="sourceCode" id="cb491"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb491-1"><a href="ch6.html#cb491-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;abc&quot;</span>, <span class="st">&quot;def&quot;</span> , <span class="st">&quot;ghi&quot;</span>)</span>
<span id="cb491-2"><a href="ch6.html#cb491-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_detect</span>(x, <span class="st">&quot;a|d&quot;</span>)</span>
<span id="cb491-3"><a href="ch6.html#cb491-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="cn">TRUE</span>  <span class="cn">TRUE</span> <span class="cn">FALSE</span></span>
<span id="cb491-4"><a href="ch6.html#cb491-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_detect</span>(x, <span class="st">&quot;a|d|g&quot;</span>)</span>
<span id="cb491-5"><a href="ch6.html#cb491-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span> <span class="cn">TRUE</span> <span class="cn">TRUE</span></span></code></pre></div>
<p>문자 <code>|</code>은 우선 순위가 낮은 연산자이다.
이것 때문에 제시되는 패턴의 범위가 명확하지 않은 경우에는 괄호를 사용하여 범위를 명확하게 할 수 있다.
예를 들어 <code>"ab(c|d)ef"</code>는 <code>"abcef"</code> 또는 <code>"abdef"</code>와 매치가 된다.</p>
<div class="sourceCode" id="cb492"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb492-1"><a href="ch6.html#cb492-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;abd&quot;</span>, <span class="st">&quot;acd&quot;</span>, <span class="st">&quot;abc&quot;</span>)</span>
<span id="cb492-2"><a href="ch6.html#cb492-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_detect</span>(x, <span class="st">&quot;ab|cd&quot;</span>)</span>
<span id="cb492-3"><a href="ch6.html#cb492-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span> <span class="cn">TRUE</span> <span class="cn">TRUE</span></span>
<span id="cb492-4"><a href="ch6.html#cb492-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_detect</span>(x, <span class="st">&quot;a(b|c)d&quot;</span>)</span>
<span id="cb492-5"><a href="ch6.html#cb492-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="cn">TRUE</span>  <span class="cn">TRUE</span> <span class="cn">FALSE</span></span></code></pre></div>
<ol start="6" style="list-style-type: decimal">
<li><code>?</code>, <code>+</code>, <code>*</code> : 반복 연산자</li>
</ol>
<p>반복 연산자를 이용하면 제시되는 패턴의 매치 횟수를 조절할 수 있다.
반복 연산자로 사용되는 각 메타 문자의 의미는 다음과 같다.</p>
<ul>
<li><p><code>?</code> : 한 번 이하의 반복 (가능한 반복 횟수 = 0, 1)</p></li>
<li><p><code>+</code> : 한 번 이상의 반복 (가능한 반복 횟수 ≥ 1)</p></li>
<li><p><code>*</code> : 0번 이상의 반복 (가능한 반복 횟수 ≥ 0)</p></li>
</ul>
<p>반복 연산자는 반복 대상이 되는 패턴 바로 뒤에 붙이면 된다.
예를 들어 <code>colou?r</code>은 <code>u</code>의 1회 반복으로 <code>colour</code>과 매치가 되기도 하고,
0회 반복, 즉 제거되어 <code>color</code>와도 매치가 된다.</p>
<div class="sourceCode" id="cb493"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb493-1"><a href="ch6.html#cb493-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;color&quot;</span>, <span class="st">&quot;colour&quot;</span>)</span>
<span id="cb493-2"><a href="ch6.html#cb493-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_extract</span>(x, <span class="st">&quot;colou?r&quot;</span>)</span>
<span id="cb493-3"><a href="ch6.html#cb493-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;color&quot;</span>  <span class="st">&quot;colour&quot;</span></span></code></pre></div>
<p>반복 대상이 되는 패턴이 두 개 이상의 문자인 경우에는 반드시 괄호로 감싸야 한다.</p>
<div class="sourceCode" id="cb494"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb494-1"><a href="ch6.html#cb494-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;ba&quot;</span>, <span class="st">&quot;bana&quot;</span>, <span class="st">&quot;banana&quot;</span>, <span class="st">&quot;bananana&quot;</span>)</span>
<span id="cb494-2"><a href="ch6.html#cb494-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_extract</span>(x, <span class="st">&quot;bana(na)?&quot;</span>)</span>
<span id="cb494-3"><a href="ch6.html#cb494-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">NA</span>       <span class="st">&quot;bana&quot;</span>   <span class="st">&quot;banana&quot;</span> <span class="st">&quot;banana&quot;</span></span>
<span id="cb494-4"><a href="ch6.html#cb494-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_extract</span>(x, <span class="st">&quot;bana(na)+&quot;</span>)</span>
<span id="cb494-5"><a href="ch6.html#cb494-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">NA</span>         <span class="cn">NA</span>         <span class="st">&quot;banana&quot;</span>   <span class="st">&quot;bananana&quot;</span></span>
<span id="cb494-6"><a href="ch6.html#cb494-6" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_extract</span>(x, <span class="st">&quot;bana(na)*&quot;</span>)</span>
<span id="cb494-7"><a href="ch6.html#cb494-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">NA</span>         <span class="st">&quot;bana&quot;</span>     <span class="st">&quot;banana&quot;</span>   <span class="st">&quot;bananana&quot;</span></span></code></pre></div>
<p>반복 횟수를 정확하게 정하려면 중괄호 <code>{ }</code>를 사용하면 된다.</p>
<ul>
<li><p><code>{n}</code> : 정확히 n번 반복</p></li>
<li><p><code>{n, m}</code> : n번에서 m번 사이 반복</p></li>
<li><p><code>{n,}</code> : n번 이상 반복</p></li>
<li><p><code>{,m}</code> : m번 이하 반복</p></li>
</ul>
<p>벡터 <code>words</code>에서 세 개의 자음으로 시작하는 단어는 다음과 같이 찾을 수 있다.</p>
<div class="sourceCode" id="cb495"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb495-1"><a href="ch6.html#cb495-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_subset</span>(words, <span class="st">&quot;^[^aeiou]{3}&quot;</span>)</span>
<span id="cb495-2"><a href="ch6.html#cb495-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">&quot;Christ&quot;</span>    <span class="st">&quot;Christmas&quot;</span> <span class="st">&quot;dry&quot;</span>       <span class="st">&quot;fly&quot;</span>       <span class="st">&quot;mrs&quot;</span>       <span class="st">&quot;scheme&quot;</span>   </span>
<span id="cb495-3"><a href="ch6.html#cb495-3" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>] <span class="st">&quot;school&quot;</span>    <span class="st">&quot;straight&quot;</span>  <span class="st">&quot;strategy&quot;</span>  <span class="st">&quot;street&quot;</span>    <span class="st">&quot;strike&quot;</span>    <span class="st">&quot;strong&quot;</span>   </span>
<span id="cb495-4"><a href="ch6.html#cb495-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">13</span>] <span class="st">&quot;structure&quot;</span> <span class="st">&quot;system&quot;</span>    <span class="st">&quot;three&quot;</span>     <span class="st">&quot;through&quot;</span>   <span class="st">&quot;throw&quot;</span>     <span class="st">&quot;try&quot;</span>      </span>
<span id="cb495-5"><a href="ch6.html#cb495-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">19</span>] <span class="st">&quot;type&quot;</span>      <span class="st">&quot;why&quot;</span>      </span></code></pre></div>
<p>세 개 이상의 모음이 연속으로 있는 단어는 다음과 같이 찾을 수 있다.</p>
<div class="sourceCode" id="cb496"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb496-1"><a href="ch6.html#cb496-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_subset</span>(words, <span class="st">&quot;[aeiou]{3,}&quot;</span>)</span>
<span id="cb496-2"><a href="ch6.html#cb496-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;beauty&quot;</span>   <span class="st">&quot;obvious&quot;</span>  <span class="st">&quot;previous&quot;</span> <span class="st">&quot;quiet&quot;</span>    <span class="st">&quot;serious&quot;</span>  <span class="st">&quot;various&quot;</span> </span></code></pre></div>
<p>모음-자음의 쌍이 세 번 이상 연속으로 나타나는 단어는 다음과 같이 찾을 수 있다</p>
<div class="sourceCode" id="cb497"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb497-1"><a href="ch6.html#cb497-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_subset</span>(words, <span class="st">&quot;([aeiou][^aeiou]){3,}&quot;</span>)</span>
<span id="cb497-2"><a href="ch6.html#cb497-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">&quot;america&quot;</span>    <span class="st">&quot;benefit&quot;</span>    <span class="st">&quot;business&quot;</span>   <span class="st">&quot;definite&quot;</span>   <span class="st">&quot;develop&quot;</span>   </span>
<span id="cb497-3"><a href="ch6.html#cb497-3" aria-hidden="true" tabindex="-1"></a> [<span class="dv">6</span>] <span class="st">&quot;document&quot;</span>   <span class="st">&quot;economy&quot;</span>    <span class="st">&quot;educate&quot;</span>    <span class="st">&quot;eleven&quot;</span>     <span class="st">&quot;evening&quot;</span>   </span>
<span id="cb497-4"><a href="ch6.html#cb497-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">11</span>] <span class="st">&quot;evidence&quot;</span>   <span class="st">&quot;general&quot;</span>    <span class="st">&quot;holiday&quot;</span>    <span class="st">&quot;however&quot;</span>    <span class="st">&quot;imagine&quot;</span>   </span>
<span id="cb497-5"><a href="ch6.html#cb497-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">16</span>] <span class="st">&quot;operate&quot;</span>    <span class="st">&quot;original&quot;</span>   <span class="st">&quot;particular&quot;</span> <span class="st">&quot;politic&quot;</span>    <span class="st">&quot;positive&quot;</span>  </span>
<span id="cb497-6"><a href="ch6.html#cb497-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">21</span>] <span class="st">&quot;separate&quot;</span>   <span class="st">&quot;similar&quot;</span>    <span class="st">&quot;specific&quot;</span>   <span class="st">&quot;television&quot;</span> <span class="st">&quot;therefore&quot;</span> </span>
<span id="cb497-7"><a href="ch6.html#cb497-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">26</span>] <span class="st">&quot;university&quot;</span></span></code></pre></div>
<ol start="7" style="list-style-type: decimal">
<li><code>( )</code>: 그룹 지정 및 재참조(backreference)</li>
</ol>
<p>괄호는 문자 <code>|</code>와 패턴의 우선 순위를 조절하기 위하여 패턴의 그룹을 구성할 때 사용됐고,
문자 <code>+</code> 또는 <code>*</code> 등의 반복 연산자의 경우에도 반복 대상이 되는 패턴을 그룹으로 구성할 때 사용됐다.
이와 같이 그룹을 구성하는 것은 나름의 목적이 있는 것이지만, 또 다른 이점은 그룹으로 구성된 패턴을 재참조할 수 있다는 점이다.
재참조는 매치된 패턴을 반복할 때 매우 유용하게 사용되는 것으로써, 재참조의 표현식은 <code>\1</code>, <code>\2</code> 등으로 나타낼 수 있다.
여기서 <code>\1</code>은 첫 번째 매치된 패턴의 그룹을, 그리고 <code>\2</code>은 두 번째 매치된 패턴의 그룹을 각각 의미한다.</p>
<p>예를 들어 벡터 <code>fruit</code>에서 한 개의 문자가 두 번 반복해서 나타나는 과일 이름은 다음과 같이 찾을 수 있다.
<code>"(.)"</code>으로 매치된 한 문자를 <code>"\\1"</code>로 재참조, 즉 동일한 문자를 다시 매치하는 패턴을 구성하여, 한 개의 문자가 두 번 반복해서 나타나는 문자열을 찾아낸 것이다.</p>
<div class="sourceCode" id="cb498"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb498-1"><a href="ch6.html#cb498-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_subset</span>(fruit, <span class="st">&quot;(.)</span><span class="sc">\\</span><span class="st">1&quot;</span>)</span>
<span id="cb498-2"><a href="ch6.html#cb498-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">&quot;apple&quot;</span>             <span class="st">&quot;bell pepper&quot;</span>       <span class="st">&quot;bilberry&quot;</span>         </span>
<span id="cb498-3"><a href="ch6.html#cb498-3" aria-hidden="true" tabindex="-1"></a> [<span class="dv">4</span>] <span class="st">&quot;blackberry&quot;</span>        <span class="st">&quot;blackcurrant&quot;</span>      <span class="st">&quot;blood orange&quot;</span>     </span>
<span id="cb498-4"><a href="ch6.html#cb498-4" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>] <span class="st">&quot;blueberry&quot;</span>         <span class="st">&quot;boysenberry&quot;</span>       <span class="st">&quot;cherry&quot;</span>           </span>
<span id="cb498-5"><a href="ch6.html#cb498-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">10</span>] <span class="st">&quot;chili pepper&quot;</span>      <span class="st">&quot;cloudberry&quot;</span>        <span class="st">&quot;cranberry&quot;</span>        </span>
<span id="cb498-6"><a href="ch6.html#cb498-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">13</span>] <span class="st">&quot;currant&quot;</span>           <span class="st">&quot;eggplant&quot;</span>          <span class="st">&quot;elderberry&quot;</span>       </span>
<span id="cb498-7"><a href="ch6.html#cb498-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">16</span>] <span class="st">&quot;goji berry&quot;</span>        <span class="st">&quot;gooseberry&quot;</span>        <span class="st">&quot;huckleberry&quot;</span>      </span>
<span id="cb498-8"><a href="ch6.html#cb498-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">19</span>] <span class="st">&quot;lychee&quot;</span>            <span class="st">&quot;mulberry&quot;</span>          <span class="st">&quot;passionfruit&quot;</span>     </span>
<span id="cb498-9"><a href="ch6.html#cb498-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">22</span>] <span class="st">&quot;persimmon&quot;</span>         <span class="st">&quot;pineapple&quot;</span>         <span class="st">&quot;purple mangosteen&quot;</span></span>
<span id="cb498-10"><a href="ch6.html#cb498-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">25</span>] <span class="st">&quot;raspberry&quot;</span>         <span class="st">&quot;redcurrant&quot;</span>        <span class="st">&quot;salal berry&quot;</span>      </span>
<span id="cb498-11"><a href="ch6.html#cb498-11" aria-hidden="true" tabindex="-1"></a>[<span class="dv">28</span>] <span class="st">&quot;strawberry&quot;</span>        <span class="st">&quot;tamarillo&quot;</span>        </span></code></pre></div>
<p>두 개의 문자가 두 번 반복해서 나타나는 과일 이름은 다음과 같이 찾을 수 있다.</p>
<div class="sourceCode" id="cb499"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb499-1"><a href="ch6.html#cb499-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_subset</span>(fruit, <span class="st">&quot;(..)</span><span class="sc">\\</span><span class="st">1&quot;</span>)</span>
<span id="cb499-2"><a href="ch6.html#cb499-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;banana&quot;</span>      <span class="st">&quot;coconut&quot;</span>     <span class="st">&quot;cucumber&quot;</span>    <span class="st">&quot;jujube&quot;</span>      <span class="st">&quot;papaya&quot;</span>     </span>
<span id="cb499-3"><a href="ch6.html#cb499-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">6</span>] <span class="st">&quot;salal berry&quot;</span></span></code></pre></div>
<p>벡터 <code>words</code>에서 첫 글자와 마지막 글자가 같은 글자인 단어는 다음과 같이 찾을 수 있다.</p>
<div class="sourceCode" id="cb500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb500-1"><a href="ch6.html#cb500-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_subset</span>(words, <span class="st">&quot;^(.).*</span><span class="sc">\\</span><span class="st">1$&quot;</span>)</span>
<span id="cb500-2"><a href="ch6.html#cb500-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">&quot;america&quot;</span>    <span class="st">&quot;area&quot;</span>       <span class="st">&quot;dad&quot;</span>        <span class="st">&quot;dead&quot;</span>       <span class="st">&quot;depend&quot;</span>    </span>
<span id="cb500-3"><a href="ch6.html#cb500-3" aria-hidden="true" tabindex="-1"></a> [<span class="dv">6</span>] <span class="st">&quot;educate&quot;</span>    <span class="st">&quot;else&quot;</span>       <span class="st">&quot;encourage&quot;</span>  <span class="st">&quot;engine&quot;</span>     <span class="st">&quot;europe&quot;</span>    </span>
<span id="cb500-4"><a href="ch6.html#cb500-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">11</span>] <span class="st">&quot;evidence&quot;</span>   <span class="st">&quot;example&quot;</span>    <span class="st">&quot;excuse&quot;</span>     <span class="st">&quot;exercise&quot;</span>   <span class="st">&quot;expense&quot;</span>   </span>
<span id="cb500-5"><a href="ch6.html#cb500-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">16</span>] <span class="st">&quot;experience&quot;</span> <span class="st">&quot;eye&quot;</span>        <span class="st">&quot;health&quot;</span>     <span class="st">&quot;high&quot;</span>       <span class="st">&quot;knock&quot;</span>     </span>
<span id="cb500-6"><a href="ch6.html#cb500-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">21</span>] <span class="st">&quot;level&quot;</span>      <span class="st">&quot;local&quot;</span>      <span class="st">&quot;nation&quot;</span>     <span class="st">&quot;non&quot;</span>        <span class="st">&quot;rather&quot;</span>    </span>
<span id="cb500-7"><a href="ch6.html#cb500-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">26</span>] <span class="st">&quot;refer&quot;</span>      <span class="st">&quot;remember&quot;</span>   <span class="st">&quot;serious&quot;</span>    <span class="st">&quot;stairs&quot;</span>     <span class="st">&quot;test&quot;</span>      </span>
<span id="cb500-8"><a href="ch6.html#cb500-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">31</span>] <span class="st">&quot;tonight&quot;</span>    <span class="st">&quot;transport&quot;</span>  <span class="st">&quot;treat&quot;</span>      <span class="st">&quot;trust&quot;</span>      <span class="st">&quot;window&quot;</span>    </span>
<span id="cb500-9"><a href="ch6.html#cb500-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">36</span>] <span class="st">&quot;yesterday&quot;</span> </span></code></pre></div>
<p>또한<code>words</code>에서 한 문자가 세 번 이상 사용된 단어는 다음과 같이 찾을 수 있다.</p>
<div class="sourceCode" id="cb501"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb501-1"><a href="ch6.html#cb501-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str_subset</span>(words, <span class="st">&quot;(.).*</span><span class="sc">\\</span><span class="st">1.*</span><span class="sc">\\</span><span class="st">1&quot;</span>)</span>
<span id="cb501-2"><a href="ch6.html#cb501-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">&quot;appropriate&quot;</span> <span class="st">&quot;available&quot;</span>   <span class="st">&quot;believe&quot;</span>     <span class="st">&quot;between&quot;</span>     <span class="st">&quot;business&quot;</span>   </span>
<span id="cb501-3"><a href="ch6.html#cb501-3" aria-hidden="true" tabindex="-1"></a> [<span class="dv">6</span>] <span class="st">&quot;degree&quot;</span>      <span class="st">&quot;difference&quot;</span>  <span class="st">&quot;discuss&quot;</span>     <span class="st">&quot;eleven&quot;</span>      <span class="st">&quot;environment&quot;</span></span>
<span id="cb501-4"><a href="ch6.html#cb501-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">11</span>] <span class="st">&quot;evidence&quot;</span>    <span class="st">&quot;exercise&quot;</span>    <span class="st">&quot;expense&quot;</span>     <span class="st">&quot;experience&quot;</span>  <span class="st">&quot;individual&quot;</span> </span>
<span id="cb501-5"><a href="ch6.html#cb501-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">16</span>] <span class="st">&quot;paragraph&quot;</span>   <span class="st">&quot;receive&quot;</span>     <span class="st">&quot;remember&quot;</span>    <span class="st">&quot;represent&quot;</span>   <span class="st">&quot;telephone&quot;</span>  </span>
<span id="cb501-6"><a href="ch6.html#cb501-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">21</span>] <span class="st">&quot;therefore&quot;</span>   <span class="st">&quot;tomorrow&quot;</span>   </span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chapter-ggplot2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chapter-programming.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
