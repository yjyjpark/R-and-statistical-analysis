<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 dplyr에 의한 데이터 다듬기 | R과 통계분석</title>
  <meta name="description" content="null" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 dplyr에 의한 데이터 다듬기 | R과 통계분석" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="null" />
  <meta name="github-repo" content="yjyjpark/R-and-statistical-analysis" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 dplyr에 의한 데이터 다듬기 | R과 통계분석" />
  
  <meta name="twitter:description" content="null" />
  

<meta name="author" content="박동련" />


<meta name="date" content="2022-02-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="데이터-입력.html"/>

<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>소개하기</a></li>
<li class="chapter" data-level="1" data-path="r-시작하기.html"><a href="r-시작하기.html"><i class="fa fa-check"></i><b>1</b> R 시작하기</a>
<ul>
<li class="chapter" data-level="1.1" data-path="r-시작하기.html"><a href="r-시작하기.html#r의-소개"><i class="fa fa-check"></i><b>1.1</b> R의 소개</a></li>
<li class="chapter" data-level="1.2" data-path="r-시작하기.html"><a href="r-시작하기.html#r의-설치"><i class="fa fa-check"></i><b>1.2</b> R의 설치</a></li>
<li class="chapter" data-level="1.3" data-path="r-시작하기.html"><a href="r-시작하기.html#rstudio의-설치-및-r의-실행"><i class="fa fa-check"></i><b>1.3</b> RStudio의 설치 및 R의 실행</a></li>
<li class="chapter" data-level="1.4" data-path="r-시작하기.html"><a href="r-시작하기.html#작업공간"><i class="fa fa-check"></i><b>1.4</b> 작업공간</a></li>
<li class="chapter" data-level="1.5" data-path="r-시작하기.html"><a href="r-시작하기.html#스크립트-파일의-활용"><i class="fa fa-check"></i><b>1.5</b> 스크립트 파일의 활용</a></li>
<li class="chapter" data-level="1.6" data-path="r-시작하기.html"><a href="r-시작하기.html#section-batch"><i class="fa fa-check"></i><b>1.6</b> 일괄처리</a></li>
<li class="chapter" data-level="1.7" data-path="r-시작하기.html"><a href="r-시작하기.html#section-package"><i class="fa fa-check"></i><b>1.7</b> R의 확장: 패키지</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="r-시작하기.html"><a href="r-시작하기.html#패키지의-종류"><i class="fa fa-check"></i><b>1.7.1</b> 패키지의 종류</a></li>
<li class="chapter" data-level="1.7.2" data-path="r-시작하기.html"><a href="r-시작하기.html#패키지의-설치-및-사용"><i class="fa fa-check"></i><b>1.7.2</b> 패키지의 설치 및 사용</a></li>
<li class="chapter" data-level="1.7.3" data-path="r-시작하기.html"><a href="r-시작하기.html#패키지-tidyverse의-소개"><i class="fa fa-check"></i><b>1.7.3</b> 패키지 tidyverse의 소개</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-structure.html"><a href="data-structure.html"><i class="fa fa-check"></i><b>2</b> R 데이터 구조</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-structure.html"><a href="data-structure.html#벡터"><i class="fa fa-check"></i><b>2.1</b> 벡터</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data-structure.html"><a href="data-structure.html#벡터의-기본-특성"><i class="fa fa-check"></i><b>2.1.1</b> 벡터의 기본 특성</a></li>
<li class="chapter" data-level="2.1.2" data-path="data-structure.html"><a href="data-structure.html#다양한-형태를-갖는-벡터의-생성"><i class="fa fa-check"></i><b>2.1.2</b> 다양한 형태를 갖는 벡터의 생성</a></li>
<li class="chapter" data-level="2.1.3" data-path="data-structure.html"><a href="data-structure.html#문자열을-위한-함수"><i class="fa fa-check"></i><b>2.1.3</b> 문자열을 위한 함수</a></li>
<li class="chapter" data-level="2.1.4" data-path="data-structure.html"><a href="data-structure.html#벡터의-연산"><i class="fa fa-check"></i><b>2.1.4</b> 벡터의 연산</a></li>
<li class="chapter" data-level="2.1.5" data-path="data-structure.html"><a href="data-structure.html#벡터의-비교"><i class="fa fa-check"></i><b>2.1.5</b> 벡터의 비교</a></li>
<li class="chapter" data-level="2.1.6" data-path="data-structure.html"><a href="data-structure.html#벡터의-인덱싱"><i class="fa fa-check"></i><b>2.1.6</b> 벡터의 인덱싱</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-structure.html"><a href="data-structure.html#요인"><i class="fa fa-check"></i><b>2.2</b> 요인</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data-structure.html"><a href="data-structure.html#요인의-기본-특성"><i class="fa fa-check"></i><b>2.2.1</b> 요인의 기본 특성</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-structure.html"><a href="data-structure.html#숫자형-벡터를-요인으로-변환"><i class="fa fa-check"></i><b>2.2.2</b> 숫자형 벡터를 요인으로 변환</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-structure.html"><a href="data-structure.html#날짜"><i class="fa fa-check"></i><b>2.3</b> 날짜</a></li>
<li class="chapter" data-level="2.4" data-path="data-structure.html"><a href="data-structure.html#행렬-및-배열"><i class="fa fa-check"></i><b>2.4</b> 행렬 및 배열</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="data-structure.html"><a href="data-structure.html#행렬과-배열의-기본-특성"><i class="fa fa-check"></i><b>2.4.1</b> 행렬과 배열의 기본 특성</a></li>
<li class="chapter" data-level="2.4.2" data-path="data-structure.html"><a href="data-structure.html#행렬의-연산"><i class="fa fa-check"></i><b>2.4.2</b> 행렬의 연산</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="data-structure.html"><a href="data-structure.html#section-dataframe"><i class="fa fa-check"></i><b>2.5</b> 데이터 프레임</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="data-structure.html"><a href="data-structure.html#데이터-프레임의-생성"><i class="fa fa-check"></i><b>2.5.1</b> 데이터 프레임의 생성</a></li>
<li class="chapter" data-level="2.5.2" data-path="data-structure.html"><a href="data-structure.html#데이터-프레임의-인덱싱"><i class="fa fa-check"></i><b>2.5.2</b> 데이터 프레임의 인덱싱</a></li>
<li class="chapter" data-level="2.5.3" data-path="data-structure.html"><a href="data-structure.html#함수-with"><i class="fa fa-check"></i><b>2.5.3</b> 함수 <code>with()</code></a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="data-structure.html"><a href="data-structure.html#tibble-개선된-형태의-데이터-프레임"><i class="fa fa-check"></i><b>2.6</b> Tibble: 개선된 형태의 데이터 프레임</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="data-structure.html"><a href="data-structure.html#tibble-생성"><i class="fa fa-check"></i><b>2.6.1</b> Tibble 생성</a></li>
<li class="chapter" data-level="2.6.2" data-path="data-structure.html"><a href="data-structure.html#tibble과-전통적인-데이터-프레임의-차이"><i class="fa fa-check"></i><b>2.6.2</b> Tibble과 전통적인 데이터 프레임의 차이</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="data-structure.html"><a href="data-structure.html#section-list"><i class="fa fa-check"></i><b>2.7</b> 리스트</a></li>
<li class="chapter" data-level="2.8" data-path="data-structure.html"><a href="data-structure.html#연습문제"><i class="fa fa-check"></i><b>2.8</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="데이터-입력.html"><a href="데이터-입력.html"><i class="fa fa-check"></i><b>3</b> 데이터 입력</a>
<ul>
<li class="chapter" data-level="3.1" data-path="데이터-입력.html"><a href="데이터-입력.html#텍스트-파일-불러오기-패키지-readr-함수의-활용"><i class="fa fa-check"></i><b>3.1</b> 텍스트 파일 불러오기: 패키지 <code>readr</code> 함수의 활용</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="데이터-입력.html"><a href="데이터-입력.html#함수-read_table로-데이터-파일-불러오기"><i class="fa fa-check"></i><b>3.1.1</b> 함수 <code>read_table()</code>로 데이터 파일 불러오기</a></li>
<li class="chapter" data-level="3.1.2" data-path="데이터-입력.html"><a href="데이터-입력.html#함수-read_csv로-csv-데이터-파일-불러오기"><i class="fa fa-check"></i><b>3.1.2</b> 함수 <code>read_csv()</code>로 CSV 데이터 파일 불러오기</a></li>
<li class="chapter" data-level="3.1.3" data-path="데이터-입력.html"><a href="데이터-입력.html#함수-read_fwf로-고정-포맷-구조를-갖는-데이터-파일-불러오기"><i class="fa fa-check"></i><b>3.1.3</b> 함수 <code>read_fwf()</code>로 고정 포맷 구조를 갖는 데이터 파일 불러오기</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="데이터-입력.html"><a href="데이터-입력.html#excel-파일-불러오기"><i class="fa fa-check"></i><b>3.2</b> Excel 파일 불러오기</a></li>
<li class="chapter" data-level="3.3" data-path="데이터-입력.html"><a href="데이터-입력.html#sas-데이터-파일-불러오기"><i class="fa fa-check"></i><b>3.3</b> SAS 데이터 파일 불러오기</a></li>
<li class="chapter" data-level="3.4" data-path="데이터-입력.html"><a href="데이터-입력.html#html-테이블-불러오기"><i class="fa fa-check"></i><b>3.4</b> HTML 테이블 불러오기</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html"><i class="fa fa-check"></i><b>4</b> <code>dplyr</code>에 의한 데이터 다듬기</a>
<ul>
<li class="chapter" data-level="4.1" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#행을-작업-대상으로-하는-함수"><i class="fa fa-check"></i><b>4.1</b> 행을 작업 대상으로 하는 함수</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#조건에-의한-행-선택-filter"><i class="fa fa-check"></i><b>4.1.1</b> 조건에 의한 행 선택: <code>filter()</code></a></li>
<li class="chapter" data-level="4.1.2" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#위치에-의한-행-선택-slice-및-그와-관련된-함수"><i class="fa fa-check"></i><b>4.1.2</b> 위치에 의한 행 선택: <code>slice()</code> 및 그와 관련된 함수</a></li>
<li class="chapter" data-level="4.1.3" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#행의-정렬-arrange"><i class="fa fa-check"></i><b>4.1.3</b> 행의 정렬: <code>arrange()</code></a></li>
<li class="chapter" data-level="4.1.4" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#중복된-행의-제거-distinct"><i class="fa fa-check"></i><b>4.1.4</b> 중복된 행의 제거: <code>distinct()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#열을-작업-대상으로-하는-함수"><i class="fa fa-check"></i><b>4.2</b> 열을 작업 대상으로 하는 함수</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#열의-선택-select"><i class="fa fa-check"></i><b>4.2.1</b> 열의 선택: <code>select()</code></a></li>
<li class="chapter" data-level="4.2.2" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#열-이름-변경-rename과-rename_with"><i class="fa fa-check"></i><b>4.2.2</b> 열 이름 변경: <code>rename()</code>과 <code>rename_with()</code></a></li>
<li class="chapter" data-level="4.2.3" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#열의-위치-변경-relocate"><i class="fa fa-check"></i><b>4.2.3</b> 열의 위치 변경: <code>relocate()</code></a></li>
<li class="chapter" data-level="4.2.4" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#새로운-열의-추가-mutate와-transmute"><i class="fa fa-check"></i><b>4.2.4</b> 새로운 열의 추가: <code>mutate()</code>와 <code>transmute()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#여러-행-자료의-요약-summarise"><i class="fa fa-check"></i><b>4.3</b> 여러 행 자료의 요약: <code>summarise()</code></a></li>
<li class="chapter" data-level="4.4" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#그룹-데이터-프레임"><i class="fa fa-check"></i><b>4.4</b> 그룹 데이터 프레임</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#그룹-데이터-프레임의-생성-group_by"><i class="fa fa-check"></i><b>4.4.1</b> 그룹 데이터 프레임의 생성: <code>group_by()</code></a></li>
<li class="chapter" data-level="4.4.2" data-path="dplyr에-의한-데이터-다듬기.html"><a href="dplyr에-의한-데이터-다듬기.html#그룹-데이터-프레임에서-기본-함수들의-작동-방식"><i class="fa fa-check"></i><b>4.4.2</b> 그룹 데이터 프레임에서 기본 함수들의 작동 방식</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R과 통계분석</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="dplyr에-의한-데이터-다듬기" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> <code>dplyr</code>에 의한 데이터 다듬기</h1>
<p>R에 입력된 데이터 세트는 대부분의 경우 바로 통계분석이 가능한 상태가 아니다. 분석에
필요한 적절한 변수가 없거나, 특정 조건을 만족하는 자료만을 선택해야 하거나, 자료의
순서를 바꿔야 하거나, 그룹별로 자료를 합치거나 또는 나눠야 하는 등등의 작업이 필요한
경우가 대부분이다. 이러한 데이터 다듬기는 최적의 통계 예측모형적합 등을 위해 반드시
필요한 절차이지만, 시간이 매우 많이 소요되는 힘든 작업이다. 따라서 일관된 법칙에 따라 편리하고 효율적으로 적용할 수 있는 데이터 다듬기 기법이 절실하게 필요한 상황이라고 하겠다.</p>
<p>통계 데이터 세트는 변수가 열, 관찰값이 행을 이루고 있는 2차원 구조를 가지고 있으며
데이터 프레임으로 입력된다. 이 장에서 살펴볼 내용은 패키지 <code>dplyr</code>에서 수행할 수 있는
다양한 데이터 프레임 다듬기 기법이다. 먼저 데이터 프레임 다듬기 작업에 사용되는 매우
중요하면서도 기본적인 <code>dplyr</code> 함수들을 살펴볼 것이다. 이어서 이러한 기본 <code>dplyr</code> 함수들
이 그룹으로 구분된 데이터에 대해서는 어떻게 작용을 하는지 살펴볼 것이며, 여러 개의
변수들을 대상으로 반복적으로 실행해야 하는 동일한 작업을 함수 <code>across()</code>를 이용하면
얼마나 간편하게 할 수 있는지를 살펴볼 것이다. 또한 행 단위로 작업이 이루어져야 하는
경우에 함수 <code>rowwise()</code>가 어떤 역할을 하는지도 살펴볼 것이다.</p>
<p>기본 <code>dplyr</code> 함수들은 세 가지 그룹으로 나누어 볼 수 있다. 함수 <code>filter()</code>, <code>slice()</code>,
<code>arrange()</code>, <code>distinct()</code>와 같이 데이터 프레임의 행을 작업 대상으로 하는 함수가 있고,
함수 <code>select()</code>, <code>rename()</code>, <code>mutate()</code>, <code>relocate()</code>와 같이 열을 대상으로 작업을 하는
함수가 있으며, 요약 통계량을 계산하는 함수 <code>summarise()</code>가 있다.</p>
<p>기본 <code>dplyr</code> 함수들이 공통으로 갖고 있는 특징은 데이터 프레임(또는 tibble)이 함수들의 첫 번째 입력요소라는 것이다. 두 번째 특징은 각 함수 안에서 입력된 데이터 프레임의
변수를 인덱싱 기호(<code>$</code>) 없이 사용할 수 있다는 것이다. 마지막 특징은 이 함수들이 생성하는 결과는 또 다른 데이터 프레임(또는 tibble)이라는 것이다. 기본 함수들이 갖고 있는 이러한 특징을 이용해서 조금 더 효율적인 프로그램이 가능하도록 dplyr에서는 pipe 기능을 사용할 수 있다.</p>
<ul>
<li>Pipe 기능</li>
</ul>
<p>Pipe 기능이란 한 명령문의 결과물을 바로 다음 명령문의 입력 요소로 직접 사용할 수 있도록 명령문들을 서로 연결하는 기능을 의미한다. 이것이 가능하다면, 분석 중간 단계로
생성되는 무수한 객체들을 따로 저장할 필요가 없기 때문에 프로그램 자체가 매우 깔끔하게 정리되며, 분석 흐름을 쉽게 이해할 수 있게 된다. Pipe 연산자 <code>%&gt;%</code>는 <code>tidyverse</code>에 속한 패키지인 <code>magrittr</code>에서 정의된 것으로 <code>tidyverse</code>에 속한 다른 패키지에서도 사용이 가능하다. RStudio에서 pipe 연산자 <code>%&gt;%</code>의 입력은 Shift+Ctrl+M 키를 함께 누르면 된다.</p>
<p>기본적인 형태는 <code>lhs %&gt;% rhs</code>인데, <code>lhs</code>는 데이터 객체이거나 데이터 객체를 생성하는
함수가 되고, <code>rhs</code>는 <code>lhs</code>를 입력 요소로 하는 함수가 된다. 예를 들어 <code>x %&gt;% f()</code>는 객체 <code>x</code>를 함수 <code>f()</code>의 입력 요소로 하는 <code>f(x)</code>를 의미한다. 만일 <code>rhs</code>에 다른 요소가 있다면 <code>lhs</code>는
<code>rhs</code>의 첫 번째 입력 요소가 된다. 따라서 <code>x %&gt;% f(y)</code>는 <code>f(x,y)</code>를 의미한다. 만일 <code>lhs</code>가
<code>rhs</code>의 첫 번째 요소가 아닌 경우에는 원하는 위치에 점(.)을 찍어야 한다. 예를 들어, <code>x %&gt;% f(y,.)</code>은 <code>f(y,x)</code>를 의미한다.</p>
<div id="행을-작업-대상으로-하는-함수" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> 행을 작업 대상으로 하는 함수</h2>
<div id="조건에-의한-행-선택-filter" class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> 조건에 의한 행 선택: <code>filter()</code></h3>
<p>함수 <code>filter()</code>를 이용하면, 주어진 데이터 프레임에서 특정한 조건을 만족하는 행을 선택
할 수 있다. 조건을 설정할 때는 비교 연산자(<code>&gt;, &gt;=, &lt;, &lt;=, !=, ==</code>)와 논리 연산자(<code>&amp;, |, !</code>)가 사용되며, 연산자 <code>%in%</code>이 매우 유용하게 사용된다.
예제를 통해 자세한 사용법을 확인해 보자.</p>
<ul>
<li>예제: <code>mtcars</code></li>
</ul>
<p>변수 <code>mpg</code>의 값이 30 이상인 자동차를 선택해 보자. 함수 <code>filter()</code>에 전통적인 데이터 프레임을 입력하면 결과로 전통적인 데이터 프레임이 출력되고, tibble을 입력하면 결과가
tibble로 출력된다. 데이터 프레임 <code>mtcars</code>를 tibble로 전환하고 선택 조건과 더불어 함수
<code>filter()</code>에 입력해 보자.</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="dplyr에-의한-데이터-다듬기.html#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(tidyverse)</span></code></pre></div>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="dplyr에-의한-데이터-다듬기.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(mtcars)</span>
<span id="cb166-2"><a href="dplyr에-의한-데이터-다듬기.html#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> <span class="fu">filter</span>(mpg <span class="sc">&gt;=</span> <span class="dv">30</span>)</span>
<span id="cb166-3"><a href="dplyr에-의한-데이터-다듬기.html#cb166-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 4 x 11</span></span>
<span id="cb166-4"><a href="dplyr에-의한-데이터-다듬기.html#cb166-4" aria-hidden="true" tabindex="-1"></a>    mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span>
<span id="cb166-5"><a href="dplyr에-의한-데이터-다듬기.html#cb166-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb166-6"><a href="dplyr에-의한-데이터-다듬기.html#cb166-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="fl">32.4</span>     <span class="dv">4</span>  <span class="fl">78.7</span>    <span class="dv">66</span>  <span class="fl">4.08</span>  <span class="fl">2.2</span>   <span class="fl">19.5</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">1</span></span>
<span id="cb166-7"><a href="dplyr에-의한-데이터-다듬기.html#cb166-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="fl">30.4</span>     <span class="dv">4</span>  <span class="fl">75.7</span>    <span class="dv">52</span>  <span class="fl">4.93</span>  <span class="fl">1.62</span>  <span class="fl">18.5</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">2</span></span>
<span id="cb166-8"><a href="dplyr에-의한-데이터-다듬기.html#cb166-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  <span class="fl">33.9</span>     <span class="dv">4</span>  <span class="fl">71.1</span>    <span class="dv">65</span>  <span class="fl">4.22</span>  <span class="fl">1.84</span>  <span class="fl">19.9</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">1</span></span>
<span id="cb166-9"><a href="dplyr에-의한-데이터-다듬기.html#cb166-9" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>  <span class="fl">30.4</span>     <span class="dv">4</span>  <span class="fl">95.1</span>   <span class="dv">113</span>  <span class="fl">3.77</span>  <span class="fl">1.51</span>  <span class="fl">16.9</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">5</span>     <span class="dv">2</span></span></code></pre></div>
<p>변수 <code>mpg</code>의 값이 30 이상이고 변수 wt의 값이 1.8 미만인 자동차를 선택해 보자.
논리 연산자 <code>&amp;</code> 대신에 콤마(,)를 사용할 수 있다.</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="dplyr에-의한-데이터-다듬기.html#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> <span class="fu">filter</span>(mpg <span class="sc">&gt;=</span> <span class="dv">30</span>, wt <span class="sc">&lt;</span> <span class="fl">1.8</span>)</span>
<span id="cb167-2"><a href="dplyr에-의한-데이터-다듬기.html#cb167-2" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 2 x 11</span></span>
<span id="cb167-3"><a href="dplyr에-의한-데이터-다듬기.html#cb167-3" aria-hidden="true" tabindex="-1"></a>    mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span>
<span id="cb167-4"><a href="dplyr에-의한-데이터-다듬기.html#cb167-4" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb167-5"><a href="dplyr에-의한-데이터-다듬기.html#cb167-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="fl">30.4</span>     <span class="dv">4</span>  <span class="fl">75.7</span>    <span class="dv">52</span>  <span class="fl">4.93</span>  <span class="fl">1.62</span>  <span class="fl">18.5</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">2</span></span>
<span id="cb167-6"><a href="dplyr에-의한-데이터-다듬기.html#cb167-6" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="fl">30.4</span>     <span class="dv">4</span>  <span class="fl">95.1</span>   <span class="dv">113</span>  <span class="fl">3.77</span>  <span class="fl">1.51</span>  <span class="fl">16.9</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">5</span>     <span class="dv">2</span></span></code></pre></div>
<p>변수 <code>mpg</code>의 값이 30 이하이고, 변수 <code>cyl</code>의 값이 6 또는 8이며, 변수 <code>am</code>의 값이 1인 자동차를 선택해 보자. 이 경우에, 변수 <code>cyl</code>의 값이 6 또는 8인 사건에 대하여 논리 연산자를
사용해서 <code>cyl == 6|cyl == 8</code>으로 조건을 설정하는 것보다는, <code>cyl %in% c(6,8)</code>로 쓰는 것이 훨씬 간단한 방법이 된다.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="dplyr에-의한-데이터-다듬기.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> <span class="fu">filter</span>(mpg <span class="sc">&lt;=</span> <span class="dv">30</span>, cyl <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">8</span>), am <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb168-2"><a href="dplyr에-의한-데이터-다듬기.html#cb168-2" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 5 x 11</span></span>
<span id="cb168-3"><a href="dplyr에-의한-데이터-다듬기.html#cb168-3" aria-hidden="true" tabindex="-1"></a>    mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span>
<span id="cb168-4"><a href="dplyr에-의한-데이터-다듬기.html#cb168-4" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb168-5"><a href="dplyr에-의한-데이터-다듬기.html#cb168-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="dv">21</span>       <span class="dv">6</span>   <span class="dv">160</span>   <span class="dv">110</span>  <span class="fl">3.9</span>   <span class="fl">2.62</span>  <span class="fl">16.5</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb168-6"><a href="dplyr에-의한-데이터-다듬기.html#cb168-6" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="dv">21</span>       <span class="dv">6</span>   <span class="dv">160</span>   <span class="dv">110</span>  <span class="fl">3.9</span>   <span class="fl">2.88</span>  <span class="fl">17.0</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb168-7"><a href="dplyr에-의한-데이터-다듬기.html#cb168-7" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  <span class="fl">15.8</span>     <span class="dv">8</span>   <span class="dv">351</span>   <span class="dv">264</span>  <span class="fl">4.22</span>  <span class="fl">3.17</span>  <span class="fl">14.5</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">5</span>     <span class="dv">4</span></span>
<span id="cb168-8"><a href="dplyr에-의한-데이터-다듬기.html#cb168-8" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>  <span class="fl">19.7</span>     <span class="dv">6</span>   <span class="dv">145</span>   <span class="dv">175</span>  <span class="fl">3.62</span>  <span class="fl">2.77</span>  <span class="fl">15.5</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">5</span>     <span class="dv">6</span></span>
<span id="cb168-9"><a href="dplyr에-의한-데이터-다듬기.html#cb168-9" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>  <span class="dv">15</span>       <span class="dv">8</span>   <span class="dv">301</span>   <span class="dv">335</span>  <span class="fl">3.54</span>  <span class="fl">3.57</span>  <span class="fl">14.6</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">5</span>     <span class="dv">8</span></span></code></pre></div>
<p>변수 <code>mpg</code>의 값이 <code>mpg</code>의 중앙값과 <span class="math inline">\(Q_{3}\)</span> 사이에 있는 자동차를 선택해 보자.
여기서 <span class="math inline">\(Q_{3}\)</span>는 0.75분위수를 의미하는 것으로서, <span class="math inline">\(p\)</span> 분위수란 전체 데이터 중 <span class="math inline">\((100 \times p)\)</span>%데이터보다는 크고, 나머지 <span class="math inline">\((100 \times (1-p))\)</span>% 데이터보다는 작은 수를 의미한다.
분위수의 계산은 함수 <code>quantile()</code>로 하는데, 벡터 <code>x</code>의 0.75분위수의 계산은 <code>quantile(x, probs=0.75)</code>로 할 수 있다.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="dplyr에-의한-데이터-다듬기.html#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> </span>
<span id="cb169-2"><a href="dplyr에-의한-데이터-다듬기.html#cb169-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">filter</span>(</span>
<span id="cb169-3"><a href="dplyr에-의한-데이터-다듬기.html#cb169-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     mpg <span class="sc">&gt;=</span> <span class="fu">median</span>(mpg), mpg <span class="sc">&lt;=</span> <span class="fu">quantile</span>(mpg, <span class="at">probs =</span> <span class="fl">0.75</span>)</span>
<span id="cb169-4"><a href="dplyr에-의한-데이터-다듬기.html#cb169-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   )</span>
<span id="cb169-5"><a href="dplyr에-의한-데이터-다듬기.html#cb169-5" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 10 x 11</span></span>
<span id="cb169-6"><a href="dplyr에-의한-데이터-다듬기.html#cb169-6" aria-hidden="true" tabindex="-1"></a>     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span>
<span id="cb169-7"><a href="dplyr에-의한-데이터-다듬기.html#cb169-7" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb169-8"><a href="dplyr에-의한-데이터-다듬기.html#cb169-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span>  <span class="dv">21</span>       <span class="dv">6</span>  <span class="dv">160</span>    <span class="dv">110</span>  <span class="fl">3.9</span>   <span class="fl">2.62</span>  <span class="fl">16.5</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb169-9"><a href="dplyr에-의한-데이터-다듬기.html#cb169-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span>  <span class="dv">21</span>       <span class="dv">6</span>  <span class="dv">160</span>    <span class="dv">110</span>  <span class="fl">3.9</span>   <span class="fl">2.88</span>  <span class="fl">17.0</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb169-10"><a href="dplyr에-의한-데이터-다듬기.html#cb169-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span>  <span class="fl">22.8</span>     <span class="dv">4</span>  <span class="dv">108</span>     <span class="dv">93</span>  <span class="fl">3.85</span>  <span class="fl">2.32</span>  <span class="fl">18.6</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">1</span></span>
<span id="cb169-11"><a href="dplyr에-의한-데이터-다듬기.html#cb169-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span>  <span class="fl">21.4</span>     <span class="dv">6</span>  <span class="dv">258</span>    <span class="dv">110</span>  <span class="fl">3.08</span>  <span class="fl">3.22</span>  <span class="fl">19.4</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">1</span></span>
<span id="cb169-12"><a href="dplyr에-의한-데이터-다듬기.html#cb169-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span>  <span class="fl">22.8</span>     <span class="dv">4</span>  <span class="fl">141.</span>    <span class="dv">95</span>  <span class="fl">3.92</span>  <span class="fl">3.15</span>  <span class="fl">22.9</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">4</span>     <span class="dv">2</span></span>
<span id="cb169-13"><a href="dplyr에-의한-데이터-다듬기.html#cb169-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span>  <span class="fl">19.2</span>     <span class="dv">6</span>  <span class="fl">168.</span>   <span class="dv">123</span>  <span class="fl">3.92</span>  <span class="fl">3.44</span>  <span class="fl">18.3</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb169-14"><a href="dplyr에-의한-데이터-다듬기.html#cb169-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span>  <span class="fl">21.5</span>     <span class="dv">4</span>  <span class="fl">120.</span>    <span class="dv">97</span>  <span class="fl">3.7</span>   <span class="fl">2.46</span>  <span class="fl">20.0</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">1</span></span>
<span id="cb169-15"><a href="dplyr에-의한-데이터-다듬기.html#cb169-15" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span>  <span class="fl">19.2</span>     <span class="dv">8</span>  <span class="dv">400</span>    <span class="dv">175</span>  <span class="fl">3.08</span>  <span class="fl">3.84</span>  <span class="fl">17.0</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">2</span></span>
<span id="cb169-16"><a href="dplyr에-의한-데이터-다듬기.html#cb169-16" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span>  <span class="fl">19.7</span>     <span class="dv">6</span>  <span class="dv">145</span>    <span class="dv">175</span>  <span class="fl">3.62</span>  <span class="fl">2.77</span>  <span class="fl">15.5</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">5</span>     <span class="dv">6</span></span>
<span id="cb169-17"><a href="dplyr에-의한-데이터-다듬기.html#cb169-17" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>  <span class="fl">21.4</span>     <span class="dv">4</span>  <span class="dv">121</span>    <span class="dv">109</span>  <span class="fl">4.11</span>  <span class="fl">2.78</span>  <span class="fl">18.6</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">2</span></span></code></pre></div>
<p>벡터 <code>x</code>가 특정 두 숫자 사이에 있는지를 확인하는 방법은 <code>x &gt;= left &amp; x &lt;= right</code>가 되는데, 이것을 함수 <code>between()</code>을 이용해서 <code>between(x,left,right)</code>로 할 수 있다.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="dplyr에-의한-데이터-다듬기.html#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">between</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">4</span>)</span>
<span id="cb170-2"><a href="dplyr에-의한-데이터-다듬기.html#cb170-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span>  <span class="cn">TRUE</span>  <span class="cn">TRUE</span>  <span class="cn">TRUE</span> <span class="cn">FALSE</span></span></code></pre></div>
<p>따라서 위 예제는 다음과 같이 실행해도 동일한 결과를 얻는다.</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="dplyr에-의한-데이터-다듬기.html#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> </span>
<span id="cb171-2"><a href="dplyr에-의한-데이터-다듬기.html#cb171-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">filter</span>(</span>
<span id="cb171-3"><a href="dplyr에-의한-데이터-다듬기.html#cb171-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">between</span>(mpg, <span class="fu">median</span>(mpg), <span class="fu">quantile</span>(mpg, <span class="at">probs =</span> <span class="fl">0.75</span>))</span>
<span id="cb171-4"><a href="dplyr에-의한-데이터-다듬기.html#cb171-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     )</span>
<span id="cb171-5"><a href="dplyr에-의한-데이터-다듬기.html#cb171-5" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 10 x 11</span></span>
<span id="cb171-6"><a href="dplyr에-의한-데이터-다듬기.html#cb171-6" aria-hidden="true" tabindex="-1"></a>     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span>
<span id="cb171-7"><a href="dplyr에-의한-데이터-다듬기.html#cb171-7" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb171-8"><a href="dplyr에-의한-데이터-다듬기.html#cb171-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span>  <span class="dv">21</span>       <span class="dv">6</span>  <span class="dv">160</span>    <span class="dv">110</span>  <span class="fl">3.9</span>   <span class="fl">2.62</span>  <span class="fl">16.5</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb171-9"><a href="dplyr에-의한-데이터-다듬기.html#cb171-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span>  <span class="dv">21</span>       <span class="dv">6</span>  <span class="dv">160</span>    <span class="dv">110</span>  <span class="fl">3.9</span>   <span class="fl">2.88</span>  <span class="fl">17.0</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb171-10"><a href="dplyr에-의한-데이터-다듬기.html#cb171-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span>  <span class="fl">22.8</span>     <span class="dv">4</span>  <span class="dv">108</span>     <span class="dv">93</span>  <span class="fl">3.85</span>  <span class="fl">2.32</span>  <span class="fl">18.6</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">1</span></span>
<span id="cb171-11"><a href="dplyr에-의한-데이터-다듬기.html#cb171-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span>  <span class="fl">21.4</span>     <span class="dv">6</span>  <span class="dv">258</span>    <span class="dv">110</span>  <span class="fl">3.08</span>  <span class="fl">3.22</span>  <span class="fl">19.4</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">1</span></span>
<span id="cb171-12"><a href="dplyr에-의한-데이터-다듬기.html#cb171-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span>  <span class="fl">22.8</span>     <span class="dv">4</span>  <span class="fl">141.</span>    <span class="dv">95</span>  <span class="fl">3.92</span>  <span class="fl">3.15</span>  <span class="fl">22.9</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">4</span>     <span class="dv">2</span></span>
<span id="cb171-13"><a href="dplyr에-의한-데이터-다듬기.html#cb171-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span>  <span class="fl">19.2</span>     <span class="dv">6</span>  <span class="fl">168.</span>   <span class="dv">123</span>  <span class="fl">3.92</span>  <span class="fl">3.44</span>  <span class="fl">18.3</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb171-14"><a href="dplyr에-의한-데이터-다듬기.html#cb171-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span>  <span class="fl">21.5</span>     <span class="dv">4</span>  <span class="fl">120.</span>    <span class="dv">97</span>  <span class="fl">3.7</span>   <span class="fl">2.46</span>  <span class="fl">20.0</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">1</span></span>
<span id="cb171-15"><a href="dplyr에-의한-데이터-다듬기.html#cb171-15" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span>  <span class="fl">19.2</span>     <span class="dv">8</span>  <span class="dv">400</span>    <span class="dv">175</span>  <span class="fl">3.08</span>  <span class="fl">3.84</span>  <span class="fl">17.0</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">2</span></span>
<span id="cb171-16"><a href="dplyr에-의한-데이터-다듬기.html#cb171-16" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span>  <span class="fl">19.7</span>     <span class="dv">6</span>  <span class="dv">145</span>    <span class="dv">175</span>  <span class="fl">3.62</span>  <span class="fl">2.77</span>  <span class="fl">15.5</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">5</span>     <span class="dv">6</span></span>
<span id="cb171-17"><a href="dplyr에-의한-데이터-다듬기.html#cb171-17" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>  <span class="fl">21.4</span>     <span class="dv">4</span>  <span class="dv">121</span>    <span class="dv">109</span>  <span class="fl">4.11</span>  <span class="fl">2.78</span>  <span class="fl">18.6</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">2</span></span></code></pre></div>
<ul>
<li>예제: <code>airquality</code></li>
</ul>
<p>데이터 프레임 <code>airquality</code>는 1973년 5월부터 9월까지 미국 뉴욕시의 공기의 질과 관련된
조사 결과를 담은 데이터 세트이다. <code>airs</code>라는 이름의 tibble로 전환하고, 처음 5개 케이스
를 출력해 보자.</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="dplyr에-의한-데이터-다듬기.html#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> airs <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(airquality) <span class="sc">%&gt;%</span> </span>
<span id="cb172-2"><a href="dplyr에-의한-데이터-다듬기.html#cb172-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb172-3"><a href="dplyr에-의한-데이터-다듬기.html#cb172-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 153 x 6</span></span>
<span id="cb172-4"><a href="dplyr에-의한-데이터-다듬기.html#cb172-4" aria-hidden="true" tabindex="-1"></a>  Ozone Solar.R  Wind  Temp Month   Day</span>
<span id="cb172-5"><a href="dplyr에-의한-데이터-다듬기.html#cb172-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>int<span class="sc">&gt;</span>   <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb172-6"><a href="dplyr에-의한-데이터-다듬기.html#cb172-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>    <span class="dv">41</span>     <span class="dv">190</span>   <span class="fl">7.4</span>    <span class="dv">67</span>     <span class="dv">5</span>     <span class="dv">1</span></span>
<span id="cb172-7"><a href="dplyr에-의한-데이터-다듬기.html#cb172-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    <span class="dv">36</span>     <span class="dv">118</span>   <span class="dv">8</span>      <span class="dv">72</span>     <span class="dv">5</span>     <span class="dv">2</span></span>
<span id="cb172-8"><a href="dplyr에-의한-데이터-다듬기.html#cb172-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>    <span class="dv">12</span>     <span class="dv">149</span>  <span class="fl">12.6</span>    <span class="dv">74</span>     <span class="dv">5</span>     <span class="dv">3</span></span>
<span id="cb172-9"><a href="dplyr에-의한-데이터-다듬기.html#cb172-9" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 150 more rows</span></span></code></pre></div>
<p>변수 <code>Ozone</code> 또는 <code>Solar.R</code>이 결측값인 행을 선택해 보자. 결측값의 확인은 함수
<code>is.na()</code>로 할 수 있다.</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="dplyr에-의한-데이터-다듬기.html#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> airs <span class="sc">%&gt;%</span> </span>
<span id="cb173-2"><a href="dplyr에-의한-데이터-다듬기.html#cb173-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">filter</span>(<span class="fu">is.na</span>(Ozone) <span class="sc">|</span> <span class="fu">is.na</span>(Solar.R)) <span class="sc">%&gt;%</span> </span>
<span id="cb173-3"><a href="dplyr에-의한-데이터-다듬기.html#cb173-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb173-4"><a href="dplyr에-의한-데이터-다듬기.html#cb173-4" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 42 x 6</span></span>
<span id="cb173-5"><a href="dplyr에-의한-데이터-다듬기.html#cb173-5" aria-hidden="true" tabindex="-1"></a>  Ozone Solar.R  Wind  Temp Month   Day</span>
<span id="cb173-6"><a href="dplyr에-의한-데이터-다듬기.html#cb173-6" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>int<span class="sc">&gt;</span>   <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb173-7"><a href="dplyr에-의한-데이터-다듬기.html#cb173-7" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>    <span class="cn">NA</span>      <span class="cn">NA</span>  <span class="fl">14.3</span>    <span class="dv">56</span>     <span class="dv">5</span>     <span class="dv">5</span></span>
<span id="cb173-8"><a href="dplyr에-의한-데이터-다듬기.html#cb173-8" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    <span class="dv">28</span>      <span class="cn">NA</span>  <span class="fl">14.9</span>    <span class="dv">66</span>     <span class="dv">5</span>     <span class="dv">6</span></span>
<span id="cb173-9"><a href="dplyr에-의한-데이터-다듬기.html#cb173-9" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>    <span class="cn">NA</span>     <span class="dv">194</span>   <span class="fl">8.6</span>    <span class="dv">69</span>     <span class="dv">5</span>    <span class="dv">10</span></span>
<span id="cb173-10"><a href="dplyr에-의한-데이터-다듬기.html#cb173-10" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>     <span class="dv">7</span>      <span class="cn">NA</span>   <span class="fl">6.9</span>    <span class="dv">74</span>     <span class="dv">5</span>    <span class="dv">11</span></span>
<span id="cb173-11"><a href="dplyr에-의한-데이터-다듬기.html#cb173-11" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>    <span class="cn">NA</span>      <span class="dv">66</span>  <span class="fl">16.6</span>    <span class="dv">57</span>     <span class="dv">5</span>    <span class="dv">25</span></span>
<span id="cb173-12"><a href="dplyr에-의한-데이터-다듬기.html#cb173-12" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 37 more rows</span></span></code></pre></div>
</div>
<div id="위치에-의한-행-선택-slice-및-그와-관련된-함수" class="section level3" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> 위치에 의한 행 선택: <code>slice()</code> 및 그와 관련된 함수</h3>
<p>위치에 의한 행 선택이란 데이터 프레임에서 선택하고자 하는 행 번호를 지정해서 선택하는 것을 의미한다.</p>
<ul>
<li>함수 <code>slice()</code>에 의한 행 선택</li>
</ul>
<p>함수 <code>slice()</code>에는 행의 번호를 직접 지정해서 특정 행을 선택하거나 제거할 수 있다.
양의 정수를 입력하면 해당 위치의 행이 선택되고, 음의 정수를 입력하면 해당 위치의 행이
제거된다. 입력되는 정수는 모두 양수이거나 모두 음수이어야 한다. 데이터 프레임 <code>iris</code>를
tibble로 전환하고 5번째 행부터 10번째 행까지 선택해 보자.</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="dplyr에-의한-데이터-다듬기.html#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> iris_t <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(iris)</span>
<span id="cb174-2"><a href="dplyr에-의한-데이터-다듬기.html#cb174-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> iris_t <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">5</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb174-3"><a href="dplyr에-의한-데이터-다듬기.html#cb174-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 6 x 5</span></span>
<span id="cb174-4"><a href="dplyr에-의한-데이터-다듬기.html#cb174-4" aria-hidden="true" tabindex="-1"></a>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span>
<span id="cb174-5"><a href="dplyr에-의한-데이터-다듬기.html#cb174-5" aria-hidden="true" tabindex="-1"></a>         <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>        <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>fct<span class="sc">&gt;</span>  </span>
<span id="cb174-6"><a href="dplyr에-의한-데이터-다듬기.html#cb174-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>          <span class="dv">5</span>           <span class="fl">3.6</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span> setosa </span>
<span id="cb174-7"><a href="dplyr에-의한-데이터-다듬기.html#cb174-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>          <span class="fl">5.4</span>         <span class="fl">3.9</span>          <span class="fl">1.7</span>         <span class="fl">0.4</span> setosa </span>
<span id="cb174-8"><a href="dplyr에-의한-데이터-다듬기.html#cb174-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>          <span class="fl">4.6</span>         <span class="fl">3.4</span>          <span class="fl">1.4</span>         <span class="fl">0.3</span> setosa </span>
<span id="cb174-9"><a href="dplyr에-의한-데이터-다듬기.html#cb174-9" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>          <span class="dv">5</span>           <span class="fl">3.4</span>          <span class="fl">1.5</span>         <span class="fl">0.2</span> setosa </span>
<span id="cb174-10"><a href="dplyr에-의한-데이터-다듬기.html#cb174-10" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>          <span class="fl">4.4</span>         <span class="fl">2.9</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span> setosa </span>
<span id="cb174-11"><a href="dplyr에-의한-데이터-다듬기.html#cb174-11" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>          <span class="fl">4.9</span>         <span class="fl">3.1</span>          <span class="fl">1.5</span>         <span class="fl">0.1</span> setosa </span></code></pre></div>
<p>이번에는 5번째 행부터 10번째 행을 제거해 보자.</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="dplyr에-의한-데이터-다듬기.html#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> iris_t <span class="sc">%&gt;%</span> </span>
<span id="cb175-2"><a href="dplyr에-의한-데이터-다듬기.html#cb175-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">slice</span>(<span class="sc">-</span>(<span class="dv">5</span><span class="sc">:</span><span class="dv">10</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb175-3"><a href="dplyr에-의한-데이터-다듬기.html#cb175-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb175-4"><a href="dplyr에-의한-데이터-다듬기.html#cb175-4" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 144 x 5</span></span>
<span id="cb175-5"><a href="dplyr에-의한-데이터-다듬기.html#cb175-5" aria-hidden="true" tabindex="-1"></a>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span>
<span id="cb175-6"><a href="dplyr에-의한-데이터-다듬기.html#cb175-6" aria-hidden="true" tabindex="-1"></a>         <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>        <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>fct<span class="sc">&gt;</span>  </span>
<span id="cb175-7"><a href="dplyr에-의한-데이터-다듬기.html#cb175-7" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>          <span class="fl">5.1</span>         <span class="fl">3.5</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span> setosa </span>
<span id="cb175-8"><a href="dplyr에-의한-데이터-다듬기.html#cb175-8" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>          <span class="fl">4.9</span>         <span class="dv">3</span>            <span class="fl">1.4</span>         <span class="fl">0.2</span> setosa </span>
<span id="cb175-9"><a href="dplyr에-의한-데이터-다듬기.html#cb175-9" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>          <span class="fl">4.7</span>         <span class="fl">3.2</span>          <span class="fl">1.3</span>         <span class="fl">0.2</span> setosa </span>
<span id="cb175-10"><a href="dplyr에-의한-데이터-다듬기.html#cb175-10" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 141 more rows</span></span></code></pre></div>
<p>이번에는 <code>iris</code>의 마지막 행을 선택해 보자. 이 경우 유용하게 사용될 함수가 <code>n()</code>이다.
이 함수는 데이터 프레임의 행의 개수를 세는 함수로서 단독으로는 사용될 수 없고 <code>dplyr</code>
기본 함수들과 함께 사용되어야 한다.</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="dplyr에-의한-데이터-다듬기.html#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> iris_t <span class="sc">%&gt;%</span> </span>
<span id="cb176-2"><a href="dplyr에-의한-데이터-다듬기.html#cb176-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">slice</span>(<span class="fu">n</span>())</span>
<span id="cb176-3"><a href="dplyr에-의한-데이터-다듬기.html#cb176-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 1 x 5</span></span>
<span id="cb176-4"><a href="dplyr에-의한-데이터-다듬기.html#cb176-4" aria-hidden="true" tabindex="-1"></a>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species  </span>
<span id="cb176-5"><a href="dplyr에-의한-데이터-다듬기.html#cb176-5" aria-hidden="true" tabindex="-1"></a>         <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>        <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>fct<span class="sc">&gt;</span>    </span>
<span id="cb176-6"><a href="dplyr에-의한-데이터-다듬기.html#cb176-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>          <span class="fl">5.9</span>           <span class="dv">3</span>          <span class="fl">5.1</span>         <span class="fl">1.8</span> virginica</span></code></pre></div>
<ul>
<li>함수 <code>slice_head()</code>와 <code>slice_tail</code>()에 의한 행 선택</li>
</ul>
<p>데이터 프레임의 처음 몇 개 행을 선택하거나 마지막 몇 개 행을 선택하고자 할 때 사용되는 함수이다. 행의 개수를 지정하는 경우에는 <code>n</code>을 사용하고 행의 비율을 지정하는 경우에
는 <code>prop</code>를 사용하면 된다. 데이터 프레임 <code>iris</code>의 처음 3개 행과 마지막 3개 행을 각각 선택해 보자.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="dplyr에-의한-데이터-다듬기.html#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> iris_t <span class="sc">%&gt;%</span> </span>
<span id="cb177-2"><a href="dplyr에-의한-데이터-다듬기.html#cb177-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb177-3"><a href="dplyr에-의한-데이터-다듬기.html#cb177-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 x 5</span></span>
<span id="cb177-4"><a href="dplyr에-의한-데이터-다듬기.html#cb177-4" aria-hidden="true" tabindex="-1"></a>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span>
<span id="cb177-5"><a href="dplyr에-의한-데이터-다듬기.html#cb177-5" aria-hidden="true" tabindex="-1"></a>         <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>        <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>fct<span class="sc">&gt;</span>  </span>
<span id="cb177-6"><a href="dplyr에-의한-데이터-다듬기.html#cb177-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>          <span class="fl">5.1</span>         <span class="fl">3.5</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span> setosa </span>
<span id="cb177-7"><a href="dplyr에-의한-데이터-다듬기.html#cb177-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>          <span class="fl">4.9</span>         <span class="dv">3</span>            <span class="fl">1.4</span>         <span class="fl">0.2</span> setosa </span>
<span id="cb177-8"><a href="dplyr에-의한-데이터-다듬기.html#cb177-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>          <span class="fl">4.7</span>         <span class="fl">3.2</span>          <span class="fl">1.3</span>         <span class="fl">0.2</span> setosa </span></code></pre></div>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="dplyr에-의한-데이터-다듬기.html#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> iris_t <span class="sc">%&gt;%</span> </span>
<span id="cb178-2"><a href="dplyr에-의한-데이터-다듬기.html#cb178-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">slice_tail</span>(<span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb178-3"><a href="dplyr에-의한-데이터-다듬기.html#cb178-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 x 5</span></span>
<span id="cb178-4"><a href="dplyr에-의한-데이터-다듬기.html#cb178-4" aria-hidden="true" tabindex="-1"></a>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species  </span>
<span id="cb178-5"><a href="dplyr에-의한-데이터-다듬기.html#cb178-5" aria-hidden="true" tabindex="-1"></a>         <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>        <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>fct<span class="sc">&gt;</span>    </span>
<span id="cb178-6"><a href="dplyr에-의한-데이터-다듬기.html#cb178-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>          <span class="fl">6.5</span>         <span class="dv">3</span>            <span class="fl">5.2</span>         <span class="dv">2</span>   virginica</span>
<span id="cb178-7"><a href="dplyr에-의한-데이터-다듬기.html#cb178-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>          <span class="fl">6.2</span>         <span class="fl">3.4</span>          <span class="fl">5.4</span>         <span class="fl">2.3</span> virginica</span>
<span id="cb178-8"><a href="dplyr에-의한-데이터-다듬기.html#cb178-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>          <span class="fl">5.9</span>         <span class="dv">3</span>            <span class="fl">5.1</span>         <span class="fl">1.8</span> virginica</span></code></pre></div>
<ul>
<li>함수 <code>slice_sample()</code>에 의한 행 선택</li>
</ul>
<p>데이터 프레임의 일부 행을 단순임의추출방법으로 선택할 때 사용되는 함수이다.
행의 개수를 지정해서 추출하는 경우에는 <code>n</code>을 사용하고, 행의 비율을 지정해서 추출하는 경우에는 <code>prop</code>를 사용하면 된다.
두 함수 모두 비복원추출이 디폴트로 적용되며, 만일 복원추출을 원한다면, <code>replace=TRUE</code>를 입력하면 된다.
데이터 프레임 <code>iris</code>에서 3개 행을 임의추출해 보자. 또한 전체 행 중 2%의 행을 비복원추출과 복원추출로 각각 선택해 보자.</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="dplyr에-의한-데이터-다듬기.html#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> iris_t <span class="sc">%&gt;%</span> </span>
<span id="cb179-2"><a href="dplyr에-의한-데이터-다듬기.html#cb179-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb179-3"><a href="dplyr에-의한-데이터-다듬기.html#cb179-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 x 5</span></span>
<span id="cb179-4"><a href="dplyr에-의한-데이터-다듬기.html#cb179-4" aria-hidden="true" tabindex="-1"></a>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species   </span>
<span id="cb179-5"><a href="dplyr에-의한-데이터-다듬기.html#cb179-5" aria-hidden="true" tabindex="-1"></a>         <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>        <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>fct<span class="sc">&gt;</span>     </span>
<span id="cb179-6"><a href="dplyr에-의한-데이터-다듬기.html#cb179-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>          <span class="dv">6</span>           <span class="fl">3.4</span>          <span class="fl">4.5</span>         <span class="fl">1.6</span> versicolor</span>
<span id="cb179-7"><a href="dplyr에-의한-데이터-다듬기.html#cb179-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>          <span class="fl">4.9</span>         <span class="fl">3.1</span>          <span class="fl">1.5</span>         <span class="fl">0.2</span> setosa    </span>
<span id="cb179-8"><a href="dplyr에-의한-데이터-다듬기.html#cb179-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>          <span class="fl">6.3</span>         <span class="fl">2.9</span>          <span class="fl">5.6</span>         <span class="fl">1.8</span> virginica </span></code></pre></div>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="dplyr에-의한-데이터-다듬기.html#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> iris_t <span class="sc">%&gt;%</span> </span>
<span id="cb180-2"><a href="dplyr에-의한-데이터-다듬기.html#cb180-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">slice_sample</span>(<span class="at">prop =</span> <span class="fl">0.02</span>)</span>
<span id="cb180-3"><a href="dplyr에-의한-데이터-다듬기.html#cb180-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 x 5</span></span>
<span id="cb180-4"><a href="dplyr에-의한-데이터-다듬기.html#cb180-4" aria-hidden="true" tabindex="-1"></a>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species   </span>
<span id="cb180-5"><a href="dplyr에-의한-데이터-다듬기.html#cb180-5" aria-hidden="true" tabindex="-1"></a>         <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>        <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>fct<span class="sc">&gt;</span>     </span>
<span id="cb180-6"><a href="dplyr에-의한-데이터-다듬기.html#cb180-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>          <span class="fl">5.5</span>         <span class="fl">2.4</span>          <span class="fl">3.8</span>         <span class="fl">1.1</span> versicolor</span>
<span id="cb180-7"><a href="dplyr에-의한-데이터-다듬기.html#cb180-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>          <span class="fl">6.2</span>         <span class="fl">2.9</span>          <span class="fl">4.3</span>         <span class="fl">1.3</span> versicolor</span>
<span id="cb180-8"><a href="dplyr에-의한-데이터-다듬기.html#cb180-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>          <span class="fl">4.9</span>         <span class="fl">3.6</span>          <span class="fl">1.4</span>         <span class="fl">0.1</span> setosa    </span></code></pre></div>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="dplyr에-의한-데이터-다듬기.html#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> iris_t <span class="sc">%&gt;%</span> </span>
<span id="cb181-2"><a href="dplyr에-의한-데이터-다듬기.html#cb181-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">slice_sample</span>(<span class="at">prop =</span> <span class="fl">0.02</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb181-3"><a href="dplyr에-의한-데이터-다듬기.html#cb181-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 x 5</span></span>
<span id="cb181-4"><a href="dplyr에-의한-데이터-다듬기.html#cb181-4" aria-hidden="true" tabindex="-1"></a>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species  </span>
<span id="cb181-5"><a href="dplyr에-의한-데이터-다듬기.html#cb181-5" aria-hidden="true" tabindex="-1"></a>         <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>        <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>fct<span class="sc">&gt;</span>    </span>
<span id="cb181-6"><a href="dplyr에-의한-데이터-다듬기.html#cb181-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>          <span class="fl">6.5</span>         <span class="dv">3</span>            <span class="fl">5.2</span>         <span class="dv">2</span>   virginica</span>
<span id="cb181-7"><a href="dplyr에-의한-데이터-다듬기.html#cb181-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>          <span class="fl">4.8</span>         <span class="fl">3.4</span>          <span class="fl">1.9</span>         <span class="fl">0.2</span> setosa   </span>
<span id="cb181-8"><a href="dplyr에-의한-데이터-다듬기.html#cb181-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>          <span class="fl">4.6</span>         <span class="fl">3.2</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span> setosa   </span></code></pre></div>
<ul>
<li>함수 <code>slice_max()</code>와 <code>slice_min()</code>에 의한 행 선택</li>
</ul>
<p>특정 변수가 가장 큰 값을 갖거나 혹은 가장 작은 값을 갖는 행을 선택할 때 사용되는
함수이다. 기준으로 사용할 변수를 입력하고 이어서 행의 개수를 지정하는 경우에는 <code>n</code>을,
행의 비율을 지정하는 경우에는 <code>prop</code>를 입력하면 된다. 데이터 프레임 <code>iris</code>에서 변수
<code>Sepal.Width</code>의 값이 가장 큰 두 개 행을 선택해 보자.</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="dplyr에-의한-데이터-다듬기.html#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> iris_t <span class="sc">%&gt;%</span> </span>
<span id="cb182-2"><a href="dplyr에-의한-데이터-다듬기.html#cb182-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">slice_max</span>(Sepal.Width, <span class="at">n =</span> <span class="dv">2</span>)</span>
<span id="cb182-3"><a href="dplyr에-의한-데이터-다듬기.html#cb182-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 2 x 5</span></span>
<span id="cb182-4"><a href="dplyr에-의한-데이터-다듬기.html#cb182-4" aria-hidden="true" tabindex="-1"></a>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span>
<span id="cb182-5"><a href="dplyr에-의한-데이터-다듬기.html#cb182-5" aria-hidden="true" tabindex="-1"></a>         <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>        <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>fct<span class="sc">&gt;</span>  </span>
<span id="cb182-6"><a href="dplyr에-의한-데이터-다듬기.html#cb182-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>          <span class="fl">5.7</span>         <span class="fl">4.4</span>          <span class="fl">1.5</span>         <span class="fl">0.4</span> setosa </span>
<span id="cb182-7"><a href="dplyr에-의한-데이터-다듬기.html#cb182-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>          <span class="fl">5.5</span>         <span class="fl">4.2</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span> setosa </span></code></pre></div>
<p>이번에는 <code>Petal.Length</code>의 값이 가장 작은 두 개 행을 선택해 보자.</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="dplyr에-의한-데이터-다듬기.html#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> iris_t <span class="sc">%&gt;%</span> </span>
<span id="cb183-2"><a href="dplyr에-의한-데이터-다듬기.html#cb183-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">slice_min</span>(Petal.Length, <span class="at">n =</span> <span class="dv">2</span>)</span>
<span id="cb183-3"><a href="dplyr에-의한-데이터-다듬기.html#cb183-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 2 x 5</span></span>
<span id="cb183-4"><a href="dplyr에-의한-데이터-다듬기.html#cb183-4" aria-hidden="true" tabindex="-1"></a>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span>
<span id="cb183-5"><a href="dplyr에-의한-데이터-다듬기.html#cb183-5" aria-hidden="true" tabindex="-1"></a>         <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>        <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>fct<span class="sc">&gt;</span>  </span>
<span id="cb183-6"><a href="dplyr에-의한-데이터-다듬기.html#cb183-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>          <span class="fl">4.6</span>         <span class="fl">3.6</span>          <span class="dv">1</span>           <span class="fl">0.2</span> setosa </span>
<span id="cb183-7"><a href="dplyr에-의한-데이터-다듬기.html#cb183-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>          <span class="fl">4.3</span>         <span class="dv">3</span>            <span class="fl">1.1</span>         <span class="fl">0.1</span> setosa </span></code></pre></div>
</div>
<div id="행의-정렬-arrange" class="section level3" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> 행의 정렬: <code>arrange()</code></h3>
<p>함수 <code>arrange()</code>는 특정 변수를 기준으로 데이터 프레임의 행을 재배열할 때 사용된다.
함수에는 정렬의 기준이 되는 변수를 입력하면 되는데, 2개 이상의 정렬 기준 변수를 입력하게 되면 추가된 변수는 앞선 변수가 같은 값을 갖는 행들의 정렬 기준으로 사용된다.
정렬은 오름차순이 디폴트이며, 내림차순으로 배열하고자 할 때에는 기준 변수를
함수 <code>desc()</code>와 함께 사용해야 한다.</p>
<ul>
<li>예제: <code>mtcars</code></li>
</ul>
<p>데이터 프레임 <code>mtcars</code>를 tibble로 전환하고 변수 <code>mpg</code>의 값이 좋지 않은 자동차 순서로
다시 배열해 보자. 연비가 좋지 않다는 것은 연비가 낮다는 것을 의미하는 것이므로 변수
<code>mpg</code>를 오름차순 정렬 변수로 사용하면 된다.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="dplyr에-의한-데이터-다듬기.html#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(mtcars)</span>
<span id="cb184-2"><a href="dplyr에-의한-데이터-다듬기.html#cb184-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> </span>
<span id="cb184-3"><a href="dplyr에-의한-데이터-다듬기.html#cb184-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">arrange</span>(mpg)</span>
<span id="cb184-4"><a href="dplyr에-의한-데이터-다듬기.html#cb184-4" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 x 11</span></span>
<span id="cb184-5"><a href="dplyr에-의한-데이터-다듬기.html#cb184-5" aria-hidden="true" tabindex="-1"></a>     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span>
<span id="cb184-6"><a href="dplyr에-의한-데이터-다듬기.html#cb184-6" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb184-7"><a href="dplyr에-의한-데이터-다듬기.html#cb184-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span>  <span class="fl">10.4</span>     <span class="dv">8</span>  <span class="dv">472</span>    <span class="dv">205</span>  <span class="fl">2.93</span>  <span class="fl">5.25</span>  <span class="fl">18.0</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">4</span></span>
<span id="cb184-8"><a href="dplyr에-의한-데이터-다듬기.html#cb184-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span>  <span class="fl">10.4</span>     <span class="dv">8</span>  <span class="dv">460</span>    <span class="dv">215</span>  <span class="dv">3</span>     <span class="fl">5.42</span>  <span class="fl">17.8</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">4</span></span>
<span id="cb184-9"><a href="dplyr에-의한-데이터-다듬기.html#cb184-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span>  <span class="fl">13.3</span>     <span class="dv">8</span>  <span class="dv">350</span>    <span class="dv">245</span>  <span class="fl">3.73</span>  <span class="fl">3.84</span>  <span class="fl">15.4</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">4</span></span>
<span id="cb184-10"><a href="dplyr에-의한-데이터-다듬기.html#cb184-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span>  <span class="fl">14.3</span>     <span class="dv">8</span>  <span class="dv">360</span>    <span class="dv">245</span>  <span class="fl">3.21</span>  <span class="fl">3.57</span>  <span class="fl">15.8</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">4</span></span>
<span id="cb184-11"><a href="dplyr에-의한-데이터-다듬기.html#cb184-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span>  <span class="fl">14.7</span>     <span class="dv">8</span>  <span class="dv">440</span>    <span class="dv">230</span>  <span class="fl">3.23</span>  <span class="fl">5.34</span>  <span class="fl">17.4</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">4</span></span>
<span id="cb184-12"><a href="dplyr에-의한-데이터-다듬기.html#cb184-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span>  <span class="dv">15</span>       <span class="dv">8</span>  <span class="dv">301</span>    <span class="dv">335</span>  <span class="fl">3.54</span>  <span class="fl">3.57</span>  <span class="fl">14.6</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">5</span>     <span class="dv">8</span></span>
<span id="cb184-13"><a href="dplyr에-의한-데이터-다듬기.html#cb184-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span>  <span class="fl">15.2</span>     <span class="dv">8</span>  <span class="fl">276.</span>   <span class="dv">180</span>  <span class="fl">3.07</span>  <span class="fl">3.78</span>  <span class="dv">18</span>       <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">3</span></span>
<span id="cb184-14"><a href="dplyr에-의한-데이터-다듬기.html#cb184-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span>  <span class="fl">15.2</span>     <span class="dv">8</span>  <span class="dv">304</span>    <span class="dv">150</span>  <span class="fl">3.15</span>  <span class="fl">3.44</span>  <span class="fl">17.3</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">2</span></span>
<span id="cb184-15"><a href="dplyr에-의한-데이터-다듬기.html#cb184-15" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span>  <span class="fl">15.5</span>     <span class="dv">8</span>  <span class="dv">318</span>    <span class="dv">150</span>  <span class="fl">2.76</span>  <span class="fl">3.52</span>  <span class="fl">16.9</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">2</span></span>
<span id="cb184-16"><a href="dplyr에-의한-데이터-다듬기.html#cb184-16" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>  <span class="fl">15.8</span>     <span class="dv">8</span>  <span class="dv">351</span>    <span class="dv">264</span>  <span class="fl">4.22</span>  <span class="fl">3.17</span>  <span class="fl">14.5</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">5</span>     <span class="dv">4</span></span>
<span id="cb184-17"><a href="dplyr에-의한-데이터-다듬기.html#cb184-17" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 22 more rows</span></span></code></pre></div>
<p>데이터 프레임 <code>mtcars_t</code>를 변수 <code>mpg</code>의 값이 좋지 않은 자동차 순서로 다시 배열을
하되, <code>mpg</code> 값이 같은 자동차의 경우에는 변수 <code>wt</code>의 값이 높은 자동차부터 배열해 보자.
변수 <code>wt</code>를 두 번째 정렬 기준 변수로 입력하되, 내림차순 정렬이 필요하므로 함수 <code>desc()</code>를
이용한다.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="dplyr에-의한-데이터-다듬기.html#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> </span>
<span id="cb185-2"><a href="dplyr에-의한-데이터-다듬기.html#cb185-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">arrange</span>(mpg, <span class="fu">desc</span>(wt))</span>
<span id="cb185-3"><a href="dplyr에-의한-데이터-다듬기.html#cb185-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 x 11</span></span>
<span id="cb185-4"><a href="dplyr에-의한-데이터-다듬기.html#cb185-4" aria-hidden="true" tabindex="-1"></a>     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span>
<span id="cb185-5"><a href="dplyr에-의한-데이터-다듬기.html#cb185-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb185-6"><a href="dplyr에-의한-데이터-다듬기.html#cb185-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span>  <span class="fl">10.4</span>     <span class="dv">8</span>  <span class="dv">460</span>    <span class="dv">215</span>  <span class="dv">3</span>     <span class="fl">5.42</span>  <span class="fl">17.8</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">4</span></span>
<span id="cb185-7"><a href="dplyr에-의한-데이터-다듬기.html#cb185-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span>  <span class="fl">10.4</span>     <span class="dv">8</span>  <span class="dv">472</span>    <span class="dv">205</span>  <span class="fl">2.93</span>  <span class="fl">5.25</span>  <span class="fl">18.0</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">4</span></span>
<span id="cb185-8"><a href="dplyr에-의한-데이터-다듬기.html#cb185-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span>  <span class="fl">13.3</span>     <span class="dv">8</span>  <span class="dv">350</span>    <span class="dv">245</span>  <span class="fl">3.73</span>  <span class="fl">3.84</span>  <span class="fl">15.4</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">4</span></span>
<span id="cb185-9"><a href="dplyr에-의한-데이터-다듬기.html#cb185-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span>  <span class="fl">14.3</span>     <span class="dv">8</span>  <span class="dv">360</span>    <span class="dv">245</span>  <span class="fl">3.21</span>  <span class="fl">3.57</span>  <span class="fl">15.8</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">4</span></span>
<span id="cb185-10"><a href="dplyr에-의한-데이터-다듬기.html#cb185-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span>  <span class="fl">14.7</span>     <span class="dv">8</span>  <span class="dv">440</span>    <span class="dv">230</span>  <span class="fl">3.23</span>  <span class="fl">5.34</span>  <span class="fl">17.4</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">4</span></span>
<span id="cb185-11"><a href="dplyr에-의한-데이터-다듬기.html#cb185-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span>  <span class="dv">15</span>       <span class="dv">8</span>  <span class="dv">301</span>    <span class="dv">335</span>  <span class="fl">3.54</span>  <span class="fl">3.57</span>  <span class="fl">14.6</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">5</span>     <span class="dv">8</span></span>
<span id="cb185-12"><a href="dplyr에-의한-데이터-다듬기.html#cb185-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span>  <span class="fl">15.2</span>     <span class="dv">8</span>  <span class="fl">276.</span>   <span class="dv">180</span>  <span class="fl">3.07</span>  <span class="fl">3.78</span>  <span class="dv">18</span>       <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">3</span></span>
<span id="cb185-13"><a href="dplyr에-의한-데이터-다듬기.html#cb185-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span>  <span class="fl">15.2</span>     <span class="dv">8</span>  <span class="dv">304</span>    <span class="dv">150</span>  <span class="fl">3.15</span>  <span class="fl">3.44</span>  <span class="fl">17.3</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">2</span></span>
<span id="cb185-14"><a href="dplyr에-의한-데이터-다듬기.html#cb185-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span>  <span class="fl">15.5</span>     <span class="dv">8</span>  <span class="dv">318</span>    <span class="dv">150</span>  <span class="fl">2.76</span>  <span class="fl">3.52</span>  <span class="fl">16.9</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">2</span></span>
<span id="cb185-15"><a href="dplyr에-의한-데이터-다듬기.html#cb185-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>  <span class="fl">15.8</span>     <span class="dv">8</span>  <span class="dv">351</span>    <span class="dv">264</span>  <span class="fl">4.22</span>  <span class="fl">3.17</span>  <span class="fl">14.5</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">5</span>     <span class="dv">4</span></span>
<span id="cb185-16"><a href="dplyr에-의한-데이터-다듬기.html#cb185-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 22 more rows</span></span></code></pre></div>
<ul>
<li>예제: <code>airquality</code></li>
</ul>
<p>데이터 프레임 <code>airquality</code>를 tibble로 전환하고, 5월 1일부터 5월 10일까지의 자료만을
대상으로 변수 <code>Ozone</code>의 값이 가장 낮았던 날부터 다시 배열해 보자.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="dplyr에-의한-데이터-다듬기.html#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> airs_1 <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(airquality) <span class="sc">%&gt;%</span>  </span>
<span id="cb186-2"><a href="dplyr에-의한-데이터-다듬기.html#cb186-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">filter</span>(Month <span class="sc">==</span> <span class="dv">5</span>, Day <span class="sc">&lt;=</span> <span class="dv">10</span>) </span>
<span id="cb186-3"><a href="dplyr에-의한-데이터-다듬기.html#cb186-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> airs_1 <span class="sc">%&gt;%</span> </span>
<span id="cb186-4"><a href="dplyr에-의한-데이터-다듬기.html#cb186-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">arrange</span>(Ozone)</span>
<span id="cb186-5"><a href="dplyr에-의한-데이터-다듬기.html#cb186-5" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 10 x 6</span></span>
<span id="cb186-6"><a href="dplyr에-의한-데이터-다듬기.html#cb186-6" aria-hidden="true" tabindex="-1"></a>   Ozone Solar.R  Wind  Temp Month   Day</span>
<span id="cb186-7"><a href="dplyr에-의한-데이터-다듬기.html#cb186-7" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>int<span class="sc">&gt;</span>   <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb186-8"><a href="dplyr에-의한-데이터-다듬기.html#cb186-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span>     <span class="dv">8</span>      <span class="dv">19</span>  <span class="fl">20.1</span>    <span class="dv">61</span>     <span class="dv">5</span>     <span class="dv">9</span></span>
<span id="cb186-9"><a href="dplyr에-의한-데이터-다듬기.html#cb186-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span>    <span class="dv">12</span>     <span class="dv">149</span>  <span class="fl">12.6</span>    <span class="dv">74</span>     <span class="dv">5</span>     <span class="dv">3</span></span>
<span id="cb186-10"><a href="dplyr에-의한-데이터-다듬기.html#cb186-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span>    <span class="dv">18</span>     <span class="dv">313</span>  <span class="fl">11.5</span>    <span class="dv">62</span>     <span class="dv">5</span>     <span class="dv">4</span></span>
<span id="cb186-11"><a href="dplyr에-의한-데이터-다듬기.html#cb186-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span>    <span class="dv">19</span>      <span class="dv">99</span>  <span class="fl">13.8</span>    <span class="dv">59</span>     <span class="dv">5</span>     <span class="dv">8</span></span>
<span id="cb186-12"><a href="dplyr에-의한-데이터-다듬기.html#cb186-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span>    <span class="dv">23</span>     <span class="dv">299</span>   <span class="fl">8.6</span>    <span class="dv">65</span>     <span class="dv">5</span>     <span class="dv">7</span></span>
<span id="cb186-13"><a href="dplyr에-의한-데이터-다듬기.html#cb186-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span>    <span class="dv">28</span>      <span class="cn">NA</span>  <span class="fl">14.9</span>    <span class="dv">66</span>     <span class="dv">5</span>     <span class="dv">6</span></span>
<span id="cb186-14"><a href="dplyr에-의한-데이터-다듬기.html#cb186-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span>    <span class="dv">36</span>     <span class="dv">118</span>   <span class="dv">8</span>      <span class="dv">72</span>     <span class="dv">5</span>     <span class="dv">2</span></span>
<span id="cb186-15"><a href="dplyr에-의한-데이터-다듬기.html#cb186-15" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span>    <span class="dv">41</span>     <span class="dv">190</span>   <span class="fl">7.4</span>    <span class="dv">67</span>     <span class="dv">5</span>     <span class="dv">1</span></span>
<span id="cb186-16"><a href="dplyr에-의한-데이터-다듬기.html#cb186-16" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span>    <span class="cn">NA</span>      <span class="cn">NA</span>  <span class="fl">14.3</span>    <span class="dv">56</span>     <span class="dv">5</span>     <span class="dv">5</span></span>
<span id="cb186-17"><a href="dplyr에-의한-데이터-다듬기.html#cb186-17" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>    <span class="cn">NA</span>     <span class="dv">194</span>   <span class="fl">8.6</span>    <span class="dv">69</span>     <span class="dv">5</span>    <span class="dv">10</span></span></code></pre></div>
<p>위의 정렬 결과를 보면 변수 <code>Ozone</code>이 결측값인 행이 가장 뒤로 배열되어 있다. 이것이
문제는 아니지만, 어떤 경우에는 결측값인 행을 가장 앞으로 배열하는 것이 필요할 때도
있다. 데이터 프레임 <code>airs_1</code>을 변수 <code>Ozone</code>이 결측값인 행부터 다시 배열해 보자. 이것은
배열 기준으로 논리형 벡터를 사용해야 되는 문제인데, <code>TRUE</code>와 <code>FALSE</code>의 배열에서 <code>FALSE</code>가
우선 순위에 있기 때문에 <code>!is.na(Ozone)</code>을 배열 기준으로 사용하면 된다.</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="dplyr에-의한-데이터-다듬기.html#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> airs_1 <span class="sc">%&gt;%</span> </span>
<span id="cb187-2"><a href="dplyr에-의한-데이터-다듬기.html#cb187-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">arrange</span>(<span class="sc">!</span><span class="fu">is.na</span>(Ozone))</span>
<span id="cb187-3"><a href="dplyr에-의한-데이터-다듬기.html#cb187-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 10 x 6</span></span>
<span id="cb187-4"><a href="dplyr에-의한-데이터-다듬기.html#cb187-4" aria-hidden="true" tabindex="-1"></a>   Ozone Solar.R  Wind  Temp Month   Day</span>
<span id="cb187-5"><a href="dplyr에-의한-데이터-다듬기.html#cb187-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>int<span class="sc">&gt;</span>   <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb187-6"><a href="dplyr에-의한-데이터-다듬기.html#cb187-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span>    <span class="cn">NA</span>      <span class="cn">NA</span>  <span class="fl">14.3</span>    <span class="dv">56</span>     <span class="dv">5</span>     <span class="dv">5</span></span>
<span id="cb187-7"><a href="dplyr에-의한-데이터-다듬기.html#cb187-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span>    <span class="cn">NA</span>     <span class="dv">194</span>   <span class="fl">8.6</span>    <span class="dv">69</span>     <span class="dv">5</span>    <span class="dv">10</span></span>
<span id="cb187-8"><a href="dplyr에-의한-데이터-다듬기.html#cb187-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span>    <span class="dv">41</span>     <span class="dv">190</span>   <span class="fl">7.4</span>    <span class="dv">67</span>     <span class="dv">5</span>     <span class="dv">1</span></span>
<span id="cb187-9"><a href="dplyr에-의한-데이터-다듬기.html#cb187-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span>    <span class="dv">36</span>     <span class="dv">118</span>   <span class="dv">8</span>      <span class="dv">72</span>     <span class="dv">5</span>     <span class="dv">2</span></span>
<span id="cb187-10"><a href="dplyr에-의한-데이터-다듬기.html#cb187-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span>    <span class="dv">12</span>     <span class="dv">149</span>  <span class="fl">12.6</span>    <span class="dv">74</span>     <span class="dv">5</span>     <span class="dv">3</span></span>
<span id="cb187-11"><a href="dplyr에-의한-데이터-다듬기.html#cb187-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span>    <span class="dv">18</span>     <span class="dv">313</span>  <span class="fl">11.5</span>    <span class="dv">62</span>     <span class="dv">5</span>     <span class="dv">4</span></span>
<span id="cb187-12"><a href="dplyr에-의한-데이터-다듬기.html#cb187-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span>    <span class="dv">28</span>      <span class="cn">NA</span>  <span class="fl">14.9</span>    <span class="dv">66</span>     <span class="dv">5</span>     <span class="dv">6</span></span>
<span id="cb187-13"><a href="dplyr에-의한-데이터-다듬기.html#cb187-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span>    <span class="dv">23</span>     <span class="dv">299</span>   <span class="fl">8.6</span>    <span class="dv">65</span>     <span class="dv">5</span>     <span class="dv">7</span></span>
<span id="cb187-14"><a href="dplyr에-의한-데이터-다듬기.html#cb187-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span>    <span class="dv">19</span>      <span class="dv">99</span>  <span class="fl">13.8</span>    <span class="dv">59</span>     <span class="dv">5</span>     <span class="dv">8</span></span>
<span id="cb187-15"><a href="dplyr에-의한-데이터-다듬기.html#cb187-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>     <span class="dv">8</span>      <span class="dv">19</span>  <span class="fl">20.1</span>    <span class="dv">61</span>     <span class="dv">5</span>     <span class="dv">9</span></span></code></pre></div>
<p>이번에는 데이터 프레임 <code>airs_1</code>을 변수 <code>Ozone</code>의 값이 가장 높은 날부터 다시 배열하되
결측값이 있는 행을 가장 앞으로 배열해 보자.
이때는 <code>!is.na(Ozone)</code>을 첫 번째 배열 기준으로 하여 결측값이 있는 행을 가장 앞으로 배치하고, <code>desc(Ozone)</code>을 두 번째 배열 기준으로 입력해서 결측값이 아닌 행들을 변수 <code>Ozone</code>의 내림차순으로 다시 배열해야 된다.</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="dplyr에-의한-데이터-다듬기.html#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> airs_1 <span class="sc">%&gt;%</span> </span>
<span id="cb188-2"><a href="dplyr에-의한-데이터-다듬기.html#cb188-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">arrange</span>(<span class="sc">!</span><span class="fu">is.na</span>(Ozone), <span class="fu">desc</span>(Ozone))</span>
<span id="cb188-3"><a href="dplyr에-의한-데이터-다듬기.html#cb188-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 10 x 6</span></span>
<span id="cb188-4"><a href="dplyr에-의한-데이터-다듬기.html#cb188-4" aria-hidden="true" tabindex="-1"></a>   Ozone Solar.R  Wind  Temp Month   Day</span>
<span id="cb188-5"><a href="dplyr에-의한-데이터-다듬기.html#cb188-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>int<span class="sc">&gt;</span>   <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb188-6"><a href="dplyr에-의한-데이터-다듬기.html#cb188-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span>    <span class="cn">NA</span>      <span class="cn">NA</span>  <span class="fl">14.3</span>    <span class="dv">56</span>     <span class="dv">5</span>     <span class="dv">5</span></span>
<span id="cb188-7"><a href="dplyr에-의한-데이터-다듬기.html#cb188-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span>    <span class="cn">NA</span>     <span class="dv">194</span>   <span class="fl">8.6</span>    <span class="dv">69</span>     <span class="dv">5</span>    <span class="dv">10</span></span>
<span id="cb188-8"><a href="dplyr에-의한-데이터-다듬기.html#cb188-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span>    <span class="dv">41</span>     <span class="dv">190</span>   <span class="fl">7.4</span>    <span class="dv">67</span>     <span class="dv">5</span>     <span class="dv">1</span></span>
<span id="cb188-9"><a href="dplyr에-의한-데이터-다듬기.html#cb188-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span>    <span class="dv">36</span>     <span class="dv">118</span>   <span class="dv">8</span>      <span class="dv">72</span>     <span class="dv">5</span>     <span class="dv">2</span></span>
<span id="cb188-10"><a href="dplyr에-의한-데이터-다듬기.html#cb188-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span>    <span class="dv">28</span>      <span class="cn">NA</span>  <span class="fl">14.9</span>    <span class="dv">66</span>     <span class="dv">5</span>     <span class="dv">6</span></span>
<span id="cb188-11"><a href="dplyr에-의한-데이터-다듬기.html#cb188-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span>    <span class="dv">23</span>     <span class="dv">299</span>   <span class="fl">8.6</span>    <span class="dv">65</span>     <span class="dv">5</span>     <span class="dv">7</span></span>
<span id="cb188-12"><a href="dplyr에-의한-데이터-다듬기.html#cb188-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span>    <span class="dv">19</span>      <span class="dv">99</span>  <span class="fl">13.8</span>    <span class="dv">59</span>     <span class="dv">5</span>     <span class="dv">8</span></span>
<span id="cb188-13"><a href="dplyr에-의한-데이터-다듬기.html#cb188-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span>    <span class="dv">18</span>     <span class="dv">313</span>  <span class="fl">11.5</span>    <span class="dv">62</span>     <span class="dv">5</span>     <span class="dv">4</span></span>
<span id="cb188-14"><a href="dplyr에-의한-데이터-다듬기.html#cb188-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span>    <span class="dv">12</span>     <span class="dv">149</span>  <span class="fl">12.6</span>    <span class="dv">74</span>     <span class="dv">5</span>     <span class="dv">3</span></span>
<span id="cb188-15"><a href="dplyr에-의한-데이터-다듬기.html#cb188-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>     <span class="dv">8</span>      <span class="dv">19</span>  <span class="fl">20.1</span>    <span class="dv">61</span>     <span class="dv">5</span>     <span class="dv">9</span></span></code></pre></div>
</div>
<div id="중복된-행의-제거-distinct" class="section level3" number="4.1.4">
<h3><span class="header-section-number">4.1.4</span> 중복된 행의 제거: <code>distinct()</code></h3>
<p>함수 <code>distinct()</code>는 중복 입력된 행을 제거할 때 사용된다.
함수에는 중복 여부를 결정할 변수를 입력하면 되는데, 입력한 변수가 없다면 모든 변수들을 대상으로 중복 여부를 결정한다.
옵션 <code>.keep_all=TRUE</code>가 지정되면 데이터 프레임의 모든 변수가 유지되는데,
이 경우에는 중복된 행 중에 처음 나타난 행이 유지된다.
단순한 형태의 데이터 프레임으로 함수 <code>distinct()</code>의 작동 방식을 살펴보자.</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="dplyr에-의한-데이터-다듬기.html#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">id =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">times =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>), <span class="at">x1 =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>))</span>
<span id="cb189-2"><a href="dplyr에-의한-데이터-다듬기.html#cb189-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df1</span>
<span id="cb189-3"><a href="dplyr에-의한-데이터-다듬기.html#cb189-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 9 x 2</span></span>
<span id="cb189-4"><a href="dplyr에-의한-데이터-다듬기.html#cb189-4" aria-hidden="true" tabindex="-1"></a>     id    x1</span>
<span id="cb189-5"><a href="dplyr에-의한-데이터-다듬기.html#cb189-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb189-6"><a href="dplyr에-의한-데이터-다듬기.html#cb189-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span></span>
<span id="cb189-7"><a href="dplyr에-의한-데이터-다듬기.html#cb189-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>     <span class="dv">1</span>     <span class="dv">2</span></span>
<span id="cb189-8"><a href="dplyr에-의한-데이터-다듬기.html#cb189-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">2</span>     <span class="dv">1</span></span>
<span id="cb189-9"><a href="dplyr에-의한-데이터-다듬기.html#cb189-9" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>     <span class="dv">2</span>     <span class="dv">2</span></span>
<span id="cb189-10"><a href="dplyr에-의한-데이터-다듬기.html#cb189-10" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>     <span class="dv">2</span>     <span class="dv">3</span></span>
<span id="cb189-11"><a href="dplyr에-의한-데이터-다듬기.html#cb189-11" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>     <span class="dv">3</span>     <span class="dv">1</span></span>
<span id="cb189-12"><a href="dplyr에-의한-데이터-다듬기.html#cb189-12" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>     <span class="dv">3</span>     <span class="dv">2</span></span>
<span id="cb189-13"><a href="dplyr에-의한-데이터-다듬기.html#cb189-13" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>     <span class="dv">3</span>     <span class="dv">3</span></span>
<span id="cb189-14"><a href="dplyr에-의한-데이터-다듬기.html#cb189-14" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span>     <span class="dv">3</span>     <span class="dv">4</span></span></code></pre></div>
<p>변수 <code>id</code>가 중복되지 않은 행들을 선택해 보자. 중복된 행 중에 처음 나타난 행이 유지됨을 알 수 있다.</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="dplyr에-의한-데이터-다듬기.html#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df1 <span class="sc">%&gt;%</span> </span>
<span id="cb190-2"><a href="dplyr에-의한-데이터-다듬기.html#cb190-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">distinct</span>(id, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb190-3"><a href="dplyr에-의한-데이터-다듬기.html#cb190-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 x 2</span></span>
<span id="cb190-4"><a href="dplyr에-의한-데이터-다듬기.html#cb190-4" aria-hidden="true" tabindex="-1"></a>     id    x1</span>
<span id="cb190-5"><a href="dplyr에-의한-데이터-다듬기.html#cb190-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb190-6"><a href="dplyr에-의한-데이터-다듬기.html#cb190-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span></span>
<span id="cb190-7"><a href="dplyr에-의한-데이터-다듬기.html#cb190-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>     <span class="dv">2</span>     <span class="dv">1</span></span>
<span id="cb190-8"><a href="dplyr에-의한-데이터-다듬기.html#cb190-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">3</span>     <span class="dv">1</span></span></code></pre></div>
<p>변수 <code>id</code>가 중복된 행 중에 첫 번째 위치한 행이 아닌, 변수 x1이 가장 큰 값을 갖는 행을 선택해 보자.
이 문제는 변수 <code>id</code>가 중복된 행들을 변수 <code>x1</code>의 내림차순으로 정렬한 데이터 프레임을 대상으로 중복된 행을 제거하면 된다.</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="dplyr에-의한-데이터-다듬기.html#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df1 <span class="sc">%&gt;%</span> </span>
<span id="cb191-2"><a href="dplyr에-의한-데이터-다듬기.html#cb191-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">arrange</span>(id, <span class="fu">desc</span>(x1)) <span class="sc">%&gt;%</span> </span>
<span id="cb191-3"><a href="dplyr에-의한-데이터-다듬기.html#cb191-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">distinct</span>(id, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb191-4"><a href="dplyr에-의한-데이터-다듬기.html#cb191-4" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 x 2</span></span>
<span id="cb191-5"><a href="dplyr에-의한-데이터-다듬기.html#cb191-5" aria-hidden="true" tabindex="-1"></a>     id    x1</span>
<span id="cb191-6"><a href="dplyr에-의한-데이터-다듬기.html#cb191-6" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb191-7"><a href="dplyr에-의한-데이터-다듬기.html#cb191-7" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">2</span></span>
<span id="cb191-8"><a href="dplyr에-의한-데이터-다듬기.html#cb191-8" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>     <span class="dv">2</span>     <span class="dv">3</span></span>
<span id="cb191-9"><a href="dplyr에-의한-데이터-다듬기.html#cb191-9" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">3</span>     <span class="dv">4</span></span></code></pre></div>
<p>함수 <code>distinct()</code>로 모든 변수의 값이 중복된 행을 제거하는 예제를 살펴보자.</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="dplyr에-의한-데이터-다듬기.html#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">id =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">each =</span> <span class="dv">2</span>), <span class="at">x1 =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">4</span>))</span>
<span id="cb192-2"><a href="dplyr에-의한-데이터-다듬기.html#cb192-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df2</span>
<span id="cb192-3"><a href="dplyr에-의한-데이터-다듬기.html#cb192-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 6 x 2</span></span>
<span id="cb192-4"><a href="dplyr에-의한-데이터-다듬기.html#cb192-4" aria-hidden="true" tabindex="-1"></a>     id    x1</span>
<span id="cb192-5"><a href="dplyr에-의한-데이터-다듬기.html#cb192-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb192-6"><a href="dplyr에-의한-데이터-다듬기.html#cb192-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">2</span></span>
<span id="cb192-7"><a href="dplyr에-의한-데이터-다듬기.html#cb192-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>     <span class="dv">1</span>     <span class="dv">2</span></span>
<span id="cb192-8"><a href="dplyr에-의한-데이터-다듬기.html#cb192-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">2</span>     <span class="dv">3</span></span>
<span id="cb192-9"><a href="dplyr에-의한-데이터-다듬기.html#cb192-9" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>     <span class="dv">2</span>     <span class="dv">1</span></span>
<span id="cb192-10"><a href="dplyr에-의한-데이터-다듬기.html#cb192-10" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>     <span class="dv">3</span>     <span class="dv">4</span></span>
<span id="cb192-11"><a href="dplyr에-의한-데이터-다듬기.html#cb192-11" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>     <span class="dv">3</span>     <span class="dv">4</span></span>
<span id="cb192-12"><a href="dplyr에-의한-데이터-다듬기.html#cb192-12" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df2 <span class="sc">%&gt;%</span> </span>
<span id="cb192-13"><a href="dplyr에-의한-데이터-다듬기.html#cb192-13" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">distinct</span>()</span>
<span id="cb192-14"><a href="dplyr에-의한-데이터-다듬기.html#cb192-14" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 4 x 2</span></span>
<span id="cb192-15"><a href="dplyr에-의한-데이터-다듬기.html#cb192-15" aria-hidden="true" tabindex="-1"></a>     id    x1</span>
<span id="cb192-16"><a href="dplyr에-의한-데이터-다듬기.html#cb192-16" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb192-17"><a href="dplyr에-의한-데이터-다듬기.html#cb192-17" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">2</span></span>
<span id="cb192-18"><a href="dplyr에-의한-데이터-다듬기.html#cb192-18" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>     <span class="dv">2</span>     <span class="dv">3</span></span>
<span id="cb192-19"><a href="dplyr에-의한-데이터-다듬기.html#cb192-19" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">2</span>     <span class="dv">1</span></span>
<span id="cb192-20"><a href="dplyr에-의한-데이터-다듬기.html#cb192-20" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>     <span class="dv">3</span>     <span class="dv">4</span></span></code></pre></div>
</div>
</div>
<div id="열을-작업-대상으로-하는-함수" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> 열을 작업 대상으로 하는 함수</h2>
<div id="열의-선택-select" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> 열의 선택: <code>select()</code></h3>
<p>데이터 세트의 크기가 커짐에 따라 변수의 개수가 수백 또는 수천이 되는 경우를 접하는
것이 더 이상 드문 상황은 아니다.
이러한 경우, 분석에 필요한 변수를 선택하여 데이터 세트의 크기를 줄이는 것은 매우 중요한 작업이 된다.
함수 <code>select()</code>에서는 패키지 <code>tidyselect</code>에 의해 구현되는 효과적인 변수 선택 방법을 이용할 수 있다.
여기에서 작동되는 <code>&lt;tidy-select&gt;</code> 방식은 기본적으로 변수들의 집합을 구성하는 것으로 생각하면 된다.
구체적인 선택 방법은 열 번호 또는 열 이름에 의한 방법과 변수의 유형에 의한 방법, 그리고 변
수 선택과 관련된 몇몇 함수들을 이용하는 방법으로 구분할 수 있다.</p>
<ol style="list-style-type: decimal">
<li>열 번호(또는 열 이름)에 의한 선택</li>
</ol>
<p>가장 기본적인 방법은 열 번호를 콤마로 구분하여 나열하는 것이다. 이렇게 나열된 열들은 차례로 합집합을 구성하여 포함된 모든 열을 선택하게 된다.
연속된 열 변호는 콜론(:) 연산자를 이용해서 나타낼 수 있다.</p>
<p>예제로서 데이터 프레임 <code>mtcars</code>의 행 이름을 변수 <code>row.name</code>으로 추가하고 tibble로 전환해 보자.</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="dplyr에-의한-데이터-다듬기.html#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb193-2"><a href="dplyr에-의한-데이터-다듬기.html#cb193-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">rownames_to_column</span>(<span class="at">var =</span> <span class="st">&quot;row.name&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb193-3"><a href="dplyr에-의한-데이터-다듬기.html#cb193-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb193-4"><a href="dplyr에-의한-데이터-다듬기.html#cb193-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb193-5"><a href="dplyr에-의한-데이터-다듬기.html#cb193-5" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 x 12</span></span>
<span id="cb193-6"><a href="dplyr에-의한-데이터-다듬기.html#cb193-6" aria-hidden="true" tabindex="-1"></a>  row.name       mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span>
<span id="cb193-7"><a href="dplyr에-의한-데이터-다듬기.html#cb193-7" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>        <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb193-8"><a href="dplyr에-의한-데이터-다듬기.html#cb193-8" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> Mazda RX4     <span class="dv">21</span>       <span class="dv">6</span>   <span class="dv">160</span>   <span class="dv">110</span>  <span class="fl">3.9</span>   <span class="fl">2.62</span>  <span class="fl">16.5</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb193-9"><a href="dplyr에-의한-데이터-다듬기.html#cb193-9" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> Mazda RX4 W<span class="sc">~</span>  <span class="dv">21</span>       <span class="dv">6</span>   <span class="dv">160</span>   <span class="dv">110</span>  <span class="fl">3.9</span>   <span class="fl">2.88</span>  <span class="fl">17.0</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb193-10"><a href="dplyr에-의한-데이터-다듬기.html#cb193-10" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> Datsun <span class="dv">710</span>    <span class="fl">22.8</span>     <span class="dv">4</span>   <span class="dv">108</span>    <span class="dv">93</span>  <span class="fl">3.85</span>  <span class="fl">2.32</span>  <span class="fl">18.6</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">1</span></span>
<span id="cb193-11"><a href="dplyr에-의한-데이터-다듬기.html#cb193-11" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 29 more rows</span></span></code></pre></div>
<p>이어서 첫 번째에서 세 번째 변수, 그리고 일곱 번째 변수를 선택해 보자. 이 경우에는
열 번호를 함수 <code>c()</code> 없이 그냥 나열해도 결과는 동일하다.</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="dplyr에-의한-데이터-다듬기.html#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> </span>
<span id="cb194-2"><a href="dplyr에-의한-데이터-다듬기.html#cb194-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">7</span>)</span>
<span id="cb194-3"><a href="dplyr에-의한-데이터-다듬기.html#cb194-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 x 4</span></span>
<span id="cb194-4"><a href="dplyr에-의한-데이터-다듬기.html#cb194-4" aria-hidden="true" tabindex="-1"></a>   row.name            mpg   cyl    wt</span>
<span id="cb194-5"><a href="dplyr에-의한-데이터-다듬기.html#cb194-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>             <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb194-6"><a href="dplyr에-의한-데이터-다듬기.html#cb194-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span> Mazda RX4          <span class="dv">21</span>       <span class="dv">6</span>  <span class="fl">2.62</span></span>
<span id="cb194-7"><a href="dplyr에-의한-데이터-다듬기.html#cb194-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span> Mazda RX4 Wag      <span class="dv">21</span>       <span class="dv">6</span>  <span class="fl">2.88</span></span>
<span id="cb194-8"><a href="dplyr에-의한-데이터-다듬기.html#cb194-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span> Datsun <span class="dv">710</span>         <span class="fl">22.8</span>     <span class="dv">4</span>  <span class="fl">2.32</span></span>
<span id="cb194-9"><a href="dplyr에-의한-데이터-다듬기.html#cb194-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span> Hornet <span class="dv">4</span> Drive     <span class="fl">21.4</span>     <span class="dv">6</span>  <span class="fl">3.22</span></span>
<span id="cb194-10"><a href="dplyr에-의한-데이터-다듬기.html#cb194-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span> Hornet Sportabout  <span class="fl">18.7</span>     <span class="dv">8</span>  <span class="fl">3.44</span></span>
<span id="cb194-11"><a href="dplyr에-의한-데이터-다듬기.html#cb194-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span> Valiant            <span class="fl">18.1</span>     <span class="dv">6</span>  <span class="fl">3.46</span></span>
<span id="cb194-12"><a href="dplyr에-의한-데이터-다듬기.html#cb194-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span> Duster <span class="dv">360</span>         <span class="fl">14.3</span>     <span class="dv">8</span>  <span class="fl">3.57</span></span>
<span id="cb194-13"><a href="dplyr에-의한-데이터-다듬기.html#cb194-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span> Merc 240D          <span class="fl">24.4</span>     <span class="dv">4</span>  <span class="fl">3.19</span></span>
<span id="cb194-14"><a href="dplyr에-의한-데이터-다듬기.html#cb194-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span> Merc <span class="dv">230</span>           <span class="fl">22.8</span>     <span class="dv">4</span>  <span class="fl">3.15</span></span>
<span id="cb194-15"><a href="dplyr에-의한-데이터-다듬기.html#cb194-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> Merc <span class="dv">280</span>           <span class="fl">19.2</span>     <span class="dv">6</span>  <span class="fl">3.44</span></span>
<span id="cb194-16"><a href="dplyr에-의한-데이터-다듬기.html#cb194-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 22 more rows</span></span></code></pre></div>
<p>열(변수) 이름은 열 번호와 같은 취급을 받는다. 따라서 다음 방법도 같은 결과를 생성한다.</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="dplyr에-의한-데이터-다듬기.html#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> </span>
<span id="cb195-2"><a href="dplyr에-의한-데이터-다듬기.html#cb195-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">select</span>(row.name<span class="sc">:</span>cyl, wt)</span>
<span id="cb195-3"><a href="dplyr에-의한-데이터-다듬기.html#cb195-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 x 4</span></span>
<span id="cb195-4"><a href="dplyr에-의한-데이터-다듬기.html#cb195-4" aria-hidden="true" tabindex="-1"></a>   row.name            mpg   cyl    wt</span>
<span id="cb195-5"><a href="dplyr에-의한-데이터-다듬기.html#cb195-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>             <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb195-6"><a href="dplyr에-의한-데이터-다듬기.html#cb195-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span> Mazda RX4          <span class="dv">21</span>       <span class="dv">6</span>  <span class="fl">2.62</span></span>
<span id="cb195-7"><a href="dplyr에-의한-데이터-다듬기.html#cb195-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span> Mazda RX4 Wag      <span class="dv">21</span>       <span class="dv">6</span>  <span class="fl">2.88</span></span>
<span id="cb195-8"><a href="dplyr에-의한-데이터-다듬기.html#cb195-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span> Datsun <span class="dv">710</span>         <span class="fl">22.8</span>     <span class="dv">4</span>  <span class="fl">2.32</span></span>
<span id="cb195-9"><a href="dplyr에-의한-데이터-다듬기.html#cb195-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span> Hornet <span class="dv">4</span> Drive     <span class="fl">21.4</span>     <span class="dv">6</span>  <span class="fl">3.22</span></span>
<span id="cb195-10"><a href="dplyr에-의한-데이터-다듬기.html#cb195-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span> Hornet Sportabout  <span class="fl">18.7</span>     <span class="dv">8</span>  <span class="fl">3.44</span></span>
<span id="cb195-11"><a href="dplyr에-의한-데이터-다듬기.html#cb195-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span> Valiant            <span class="fl">18.1</span>     <span class="dv">6</span>  <span class="fl">3.46</span></span>
<span id="cb195-12"><a href="dplyr에-의한-데이터-다듬기.html#cb195-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span> Duster <span class="dv">360</span>         <span class="fl">14.3</span>     <span class="dv">8</span>  <span class="fl">3.57</span></span>
<span id="cb195-13"><a href="dplyr에-의한-데이터-다듬기.html#cb195-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span> Merc 240D          <span class="fl">24.4</span>     <span class="dv">4</span>  <span class="fl">3.19</span></span>
<span id="cb195-14"><a href="dplyr에-의한-데이터-다듬기.html#cb195-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span> Merc <span class="dv">230</span>           <span class="fl">22.8</span>     <span class="dv">4</span>  <span class="fl">3.15</span></span>
<span id="cb195-15"><a href="dplyr에-의한-데이터-다듬기.html#cb195-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> Merc <span class="dv">280</span>           <span class="fl">19.2</span>     <span class="dv">6</span>  <span class="fl">3.44</span></span>
<span id="cb195-16"><a href="dplyr에-의한-데이터-다듬기.html#cb195-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 22 more rows</span></span></code></pre></div>
<p>열을 제거하고자 하는 경우에는 논리 부정 연산자(!) 또는 마이너스(-) 연산자를 사용해야
한다. 함수 <code>c()</code> 안에 제거하고자 하는 열 번호를 나열하고 논리 부정 연산자를 그 앞에 붙이면 나열된 열로 이루어진 집합의 여집합을 구성하는 것이므로 결과적으로 해당되는 열들이 제거되는 것이다. 첫 번째에서 세 번째 변수, 그리고 일곱 번째 변수를 제거해 보자.</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="dplyr에-의한-데이터-다듬기.html#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> </span>
<span id="cb196-2"><a href="dplyr에-의한-데이터-다듬기.html#cb196-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">7</span>))</span>
<span id="cb196-3"><a href="dplyr에-의한-데이터-다듬기.html#cb196-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 x 8</span></span>
<span id="cb196-4"><a href="dplyr에-의한-데이터-다듬기.html#cb196-4" aria-hidden="true" tabindex="-1"></a>    disp    hp  drat  qsec    vs    am  gear  carb</span>
<span id="cb196-5"><a href="dplyr에-의한-데이터-다듬기.html#cb196-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb196-6"><a href="dplyr에-의한-데이터-다듬기.html#cb196-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span>  <span class="dv">160</span>    <span class="dv">110</span>  <span class="fl">3.9</span>   <span class="fl">16.5</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb196-7"><a href="dplyr에-의한-데이터-다듬기.html#cb196-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span>  <span class="dv">160</span>    <span class="dv">110</span>  <span class="fl">3.9</span>   <span class="fl">17.0</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb196-8"><a href="dplyr에-의한-데이터-다듬기.html#cb196-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span>  <span class="dv">108</span>     <span class="dv">93</span>  <span class="fl">3.85</span>  <span class="fl">18.6</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">1</span></span>
<span id="cb196-9"><a href="dplyr에-의한-데이터-다듬기.html#cb196-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span>  <span class="dv">258</span>    <span class="dv">110</span>  <span class="fl">3.08</span>  <span class="fl">19.4</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">1</span></span>
<span id="cb196-10"><a href="dplyr에-의한-데이터-다듬기.html#cb196-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span>  <span class="dv">360</span>    <span class="dv">175</span>  <span class="fl">3.15</span>  <span class="fl">17.0</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">2</span></span>
<span id="cb196-11"><a href="dplyr에-의한-데이터-다듬기.html#cb196-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span>  <span class="dv">225</span>    <span class="dv">105</span>  <span class="fl">2.76</span>  <span class="fl">20.2</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">1</span></span>
<span id="cb196-12"><a href="dplyr에-의한-데이터-다듬기.html#cb196-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span>  <span class="dv">360</span>    <span class="dv">245</span>  <span class="fl">3.21</span>  <span class="fl">15.8</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">4</span></span>
<span id="cb196-13"><a href="dplyr에-의한-데이터-다듬기.html#cb196-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span>  <span class="fl">147.</span>    <span class="dv">62</span>  <span class="fl">3.69</span>  <span class="dv">20</span>       <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">4</span>     <span class="dv">2</span></span>
<span id="cb196-14"><a href="dplyr에-의한-데이터-다듬기.html#cb196-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span>  <span class="fl">141.</span>    <span class="dv">95</span>  <span class="fl">3.92</span>  <span class="fl">22.9</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">4</span>     <span class="dv">2</span></span>
<span id="cb196-15"><a href="dplyr에-의한-데이터-다듬기.html#cb196-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>  <span class="fl">168.</span>   <span class="dv">123</span>  <span class="fl">3.92</span>  <span class="fl">18.3</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb196-16"><a href="dplyr에-의한-데이터-다듬기.html#cb196-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 22 more rows</span></span></code></pre></div>
<p>마이너스 연산자는 차집합을 구성하게 된다. 예컨대 <code>select(1:4, -1)</code>은 처음 네 변수
중 첫 번째 변수를 제거하라는 의미가 된다. 그러나 만일 <code>select(1:4, !1)</code>과 같이 논리
부정 연산자를 대신 사용하면 처음 네 변수와 첫 번째 변수를 제외한 나머지 변수와의 합
집합을 구성하는 것이 되어서 결국 모든 변수를 다 선택하게 된다.</p>
<p>비록 두 연산자의 의미는 다르지만, 마이너스 연산자가 첫 번째로 입력되면 같은 효과를
볼 수 있다. 따라서 첫 번째에서 세 번째 변수, 그리고 일곱 번째 변수의 제거는 다음과 같이 할 수도 있다.</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="dplyr에-의한-데이터-다듬기.html#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> </span>
<span id="cb197-2"><a href="dplyr에-의한-데이터-다듬기.html#cb197-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">7</span>))</span>
<span id="cb197-3"><a href="dplyr에-의한-데이터-다듬기.html#cb197-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 x 8</span></span>
<span id="cb197-4"><a href="dplyr에-의한-데이터-다듬기.html#cb197-4" aria-hidden="true" tabindex="-1"></a>    disp    hp  drat  qsec    vs    am  gear  carb</span>
<span id="cb197-5"><a href="dplyr에-의한-데이터-다듬기.html#cb197-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb197-6"><a href="dplyr에-의한-데이터-다듬기.html#cb197-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span>  <span class="dv">160</span>    <span class="dv">110</span>  <span class="fl">3.9</span>   <span class="fl">16.5</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb197-7"><a href="dplyr에-의한-데이터-다듬기.html#cb197-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span>  <span class="dv">160</span>    <span class="dv">110</span>  <span class="fl">3.9</span>   <span class="fl">17.0</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb197-8"><a href="dplyr에-의한-데이터-다듬기.html#cb197-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span>  <span class="dv">108</span>     <span class="dv">93</span>  <span class="fl">3.85</span>  <span class="fl">18.6</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">1</span></span>
<span id="cb197-9"><a href="dplyr에-의한-데이터-다듬기.html#cb197-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span>  <span class="dv">258</span>    <span class="dv">110</span>  <span class="fl">3.08</span>  <span class="fl">19.4</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">1</span></span>
<span id="cb197-10"><a href="dplyr에-의한-데이터-다듬기.html#cb197-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span>  <span class="dv">360</span>    <span class="dv">175</span>  <span class="fl">3.15</span>  <span class="fl">17.0</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">2</span></span>
<span id="cb197-11"><a href="dplyr에-의한-데이터-다듬기.html#cb197-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span>  <span class="dv">225</span>    <span class="dv">105</span>  <span class="fl">2.76</span>  <span class="fl">20.2</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">1</span></span>
<span id="cb197-12"><a href="dplyr에-의한-데이터-다듬기.html#cb197-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span>  <span class="dv">360</span>    <span class="dv">245</span>  <span class="fl">3.21</span>  <span class="fl">15.8</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">4</span></span>
<span id="cb197-13"><a href="dplyr에-의한-데이터-다듬기.html#cb197-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span>  <span class="fl">147.</span>    <span class="dv">62</span>  <span class="fl">3.69</span>  <span class="dv">20</span>       <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">4</span>     <span class="dv">2</span></span>
<span id="cb197-14"><a href="dplyr에-의한-데이터-다듬기.html#cb197-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span>  <span class="fl">141.</span>    <span class="dv">95</span>  <span class="fl">3.92</span>  <span class="fl">22.9</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">4</span>     <span class="dv">2</span></span>
<span id="cb197-15"><a href="dplyr에-의한-데이터-다듬기.html#cb197-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>  <span class="fl">168.</span>   <span class="dv">123</span>  <span class="fl">3.92</span>  <span class="fl">18.3</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb197-16"><a href="dplyr에-의한-데이터-다듬기.html#cb197-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 22 more rows</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>변수 유형에 의한 선택</li>
</ol>
<p>특정 유형의 변수를 선택해야 하는 경우 유용하게 사용할 수 있는 방법이다.
변수의 유형 파악은 함수 <code>is.numeric()</code> 또는 <code>is.character()</code> 등 <code>is.*()</code> 형태의 함수로 할 수 있다.
이러한 함수들은 결과가 <code>TRUE</code> 또는 <code>FALSE</code> 중 하나가 되는데, 이런 함수를 <code>predicate</code> 함수라고 한다. 변수 유형에 의한 선택이란 함수 <code>where()</code> 안에 특정 <code>predicate</code> 함수를 입력해서 그 결과가 <code>TRUE</code>가 되는 변수를 선택하는 방법이다.</p>
<p>패키지 <code>ggplot2</code>의 데이터 프레임 <code>mpg</code>를 살펴보자.</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="dplyr에-의한-데이터-다듬기.html#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mpg <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb198-2"><a href="dplyr에-의한-데이터-다듬기.html#cb198-2" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 234 x 11</span></span>
<span id="cb198-3"><a href="dplyr에-의한-데이터-다듬기.html#cb198-3" aria-hidden="true" tabindex="-1"></a>  manufacturer model displ  year   cyl trans      drv     cty   hwy fl    class </span>
<span id="cb198-4"><a href="dplyr에-의한-데이터-다듬기.html#cb198-4" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>        <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>      <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> </span>
<span id="cb198-5"><a href="dplyr에-의한-데이터-다듬기.html#cb198-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> audi         a4      <span class="fl">1.8</span>  <span class="dv">1999</span>     <span class="dv">4</span> <span class="fu">auto</span>(l5)   f        <span class="dv">18</span>    <span class="dv">29</span> p     compa<span class="sc">~</span></span>
<span id="cb198-6"><a href="dplyr에-의한-데이터-다듬기.html#cb198-6" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> audi         a4      <span class="fl">1.8</span>  <span class="dv">1999</span>     <span class="dv">4</span> <span class="fu">manual</span>(m5) f        <span class="dv">21</span>    <span class="dv">29</span> p     compa<span class="sc">~</span></span>
<span id="cb198-7"><a href="dplyr에-의한-데이터-다듬기.html#cb198-7" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> audi         a4      <span class="dv">2</span>    <span class="dv">2008</span>     <span class="dv">4</span> <span class="fu">manual</span>(m6) f        <span class="dv">20</span>    <span class="dv">31</span> p     compa<span class="sc">~</span></span>
<span id="cb198-8"><a href="dplyr에-의한-데이터-다듬기.html#cb198-8" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 231 more rows</span></span></code></pre></div>
<p>데이터 프레임 <code>mpg</code>에서 숫자형 변수만 선택해 보자.</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="dplyr에-의한-데이터-다듬기.html#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mpg <span class="sc">%&gt;%</span> </span>
<span id="cb199-2"><a href="dplyr에-의한-데이터-다듬기.html#cb199-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">select</span>(<span class="fu">where</span>(is.numeric))</span>
<span id="cb199-3"><a href="dplyr에-의한-데이터-다듬기.html#cb199-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 234 x 5</span></span>
<span id="cb199-4"><a href="dplyr에-의한-데이터-다듬기.html#cb199-4" aria-hidden="true" tabindex="-1"></a>   displ  year   cyl   cty   hwy</span>
<span id="cb199-5"><a href="dplyr에-의한-데이터-다듬기.html#cb199-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb199-6"><a href="dplyr에-의한-데이터-다듬기.html#cb199-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span>   <span class="fl">1.8</span>  <span class="dv">1999</span>     <span class="dv">4</span>    <span class="dv">18</span>    <span class="dv">29</span></span>
<span id="cb199-7"><a href="dplyr에-의한-데이터-다듬기.html#cb199-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span>   <span class="fl">1.8</span>  <span class="dv">1999</span>     <span class="dv">4</span>    <span class="dv">21</span>    <span class="dv">29</span></span>
<span id="cb199-8"><a href="dplyr에-의한-데이터-다듬기.html#cb199-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span>   <span class="dv">2</span>    <span class="dv">2008</span>     <span class="dv">4</span>    <span class="dv">20</span>    <span class="dv">31</span></span>
<span id="cb199-9"><a href="dplyr에-의한-데이터-다듬기.html#cb199-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span>   <span class="dv">2</span>    <span class="dv">2008</span>     <span class="dv">4</span>    <span class="dv">21</span>    <span class="dv">30</span></span>
<span id="cb199-10"><a href="dplyr에-의한-데이터-다듬기.html#cb199-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span>   <span class="fl">2.8</span>  <span class="dv">1999</span>     <span class="dv">6</span>    <span class="dv">16</span>    <span class="dv">26</span></span>
<span id="cb199-11"><a href="dplyr에-의한-데이터-다듬기.html#cb199-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span>   <span class="fl">2.8</span>  <span class="dv">1999</span>     <span class="dv">6</span>    <span class="dv">18</span>    <span class="dv">26</span></span>
<span id="cb199-12"><a href="dplyr에-의한-데이터-다듬기.html#cb199-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span>   <span class="fl">3.1</span>  <span class="dv">2008</span>     <span class="dv">6</span>    <span class="dv">18</span>    <span class="dv">27</span></span>
<span id="cb199-13"><a href="dplyr에-의한-데이터-다듬기.html#cb199-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span>   <span class="fl">1.8</span>  <span class="dv">1999</span>     <span class="dv">4</span>    <span class="dv">18</span>    <span class="dv">26</span></span>
<span id="cb199-14"><a href="dplyr에-의한-데이터-다듬기.html#cb199-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span>   <span class="fl">1.8</span>  <span class="dv">1999</span>     <span class="dv">4</span>    <span class="dv">16</span>    <span class="dv">25</span></span>
<span id="cb199-15"><a href="dplyr에-의한-데이터-다듬기.html#cb199-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>   <span class="dv">2</span>    <span class="dv">2008</span>     <span class="dv">4</span>    <span class="dv">20</span>    <span class="dv">28</span></span>
<span id="cb199-16"><a href="dplyr에-의한-데이터-다듬기.html#cb199-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 224 more rows</span></span></code></pre></div>
<p>몇 가지 변수 유형을 함께 고려해야 하는 경우에는 논리 연산자 <code>&amp;</code>와 <code>|</code>을 사용하게 된다.</p>
<p>예를 들어 숫자형 변수이거나 문자형 변수의 선택은 다음과 같다.</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="dplyr에-의한-데이터-다듬기.html#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mpg <span class="sc">%&gt;%</span> </span>
<span id="cb200-2"><a href="dplyr에-의한-데이터-다듬기.html#cb200-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">select</span>(<span class="fu">where</span>(is.numeric) <span class="sc">|</span> <span class="fu">where</span>(is.character))</span>
<span id="cb200-3"><a href="dplyr에-의한-데이터-다듬기.html#cb200-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 234 x 11</span></span>
<span id="cb200-4"><a href="dplyr에-의한-데이터-다듬기.html#cb200-4" aria-hidden="true" tabindex="-1"></a>   displ  year   cyl   cty   hwy manufacturer model      trans drv   fl    class</span>
<span id="cb200-5"><a href="dplyr에-의한-데이터-다듬기.html#cb200-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>        <span class="er">&lt;</span>chr<span class="sc">&gt;</span>      <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span></span>
<span id="cb200-6"><a href="dplyr에-의한-데이터-다듬기.html#cb200-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span>   <span class="fl">1.8</span>  <span class="dv">1999</span>     <span class="dv">4</span>    <span class="dv">18</span>    <span class="dv">29</span> audi         a4         auto<span class="sc">~</span> f     p     comp<span class="sc">~</span></span>
<span id="cb200-7"><a href="dplyr에-의한-데이터-다듬기.html#cb200-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span>   <span class="fl">1.8</span>  <span class="dv">1999</span>     <span class="dv">4</span>    <span class="dv">21</span>    <span class="dv">29</span> audi         a4         manu<span class="sc">~</span> f     p     comp<span class="sc">~</span></span>
<span id="cb200-8"><a href="dplyr에-의한-데이터-다듬기.html#cb200-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span>   <span class="dv">2</span>    <span class="dv">2008</span>     <span class="dv">4</span>    <span class="dv">20</span>    <span class="dv">31</span> audi         a4         manu<span class="sc">~</span> f     p     comp<span class="sc">~</span></span>
<span id="cb200-9"><a href="dplyr에-의한-데이터-다듬기.html#cb200-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span>   <span class="dv">2</span>    <span class="dv">2008</span>     <span class="dv">4</span>    <span class="dv">21</span>    <span class="dv">30</span> audi         a4         auto<span class="sc">~</span> f     p     comp<span class="sc">~</span></span>
<span id="cb200-10"><a href="dplyr에-의한-데이터-다듬기.html#cb200-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span>   <span class="fl">2.8</span>  <span class="dv">1999</span>     <span class="dv">6</span>    <span class="dv">16</span>    <span class="dv">26</span> audi         a4         auto<span class="sc">~</span> f     p     comp<span class="sc">~</span></span>
<span id="cb200-11"><a href="dplyr에-의한-데이터-다듬기.html#cb200-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span>   <span class="fl">2.8</span>  <span class="dv">1999</span>     <span class="dv">6</span>    <span class="dv">18</span>    <span class="dv">26</span> audi         a4         manu<span class="sc">~</span> f     p     comp<span class="sc">~</span></span>
<span id="cb200-12"><a href="dplyr에-의한-데이터-다듬기.html#cb200-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span>   <span class="fl">3.1</span>  <span class="dv">2008</span>     <span class="dv">6</span>    <span class="dv">18</span>    <span class="dv">27</span> audi         a4         auto<span class="sc">~</span> f     p     comp<span class="sc">~</span></span>
<span id="cb200-13"><a href="dplyr에-의한-데이터-다듬기.html#cb200-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span>   <span class="fl">1.8</span>  <span class="dv">1999</span>     <span class="dv">4</span>    <span class="dv">18</span>    <span class="dv">26</span> audi         a4 quattro manu<span class="sc">~</span> <span class="dv">4</span>     p     comp<span class="sc">~</span></span>
<span id="cb200-14"><a href="dplyr에-의한-데이터-다듬기.html#cb200-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span>   <span class="fl">1.8</span>  <span class="dv">1999</span>     <span class="dv">4</span>    <span class="dv">16</span>    <span class="dv">25</span> audi         a4 quattro auto<span class="sc">~</span> <span class="dv">4</span>     p     comp<span class="sc">~</span></span>
<span id="cb200-15"><a href="dplyr에-의한-데이터-다듬기.html#cb200-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>   <span class="dv">2</span>    <span class="dv">2008</span>     <span class="dv">4</span>    <span class="dv">20</span>    <span class="dv">28</span> audi         a4 quattro manu<span class="sc">~</span> <span class="dv">4</span>     p     comp<span class="sc">~</span></span>
<span id="cb200-16"><a href="dplyr에-의한-데이터-다듬기.html#cb200-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 224 more rows</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>변수 선택과 관련된 함수의 이용</li>
</ol>
<p>변수 선택에 매우 유용하게 사용되는 함수들이 있다. 먼저 특정 위치의 열을 선택할 때
사용할 수 있는 함수들이다.</p>
<ul>
<li><p><code>everything()</code> : 모든 변수 선택</p></li>
<li><p><code>last_col()</code> : 마지막 변수 선택</p></li>
</ul>
<p>변수 이름을 구성하고 있는 문자열에 대한 매칭 작업으로 변수를 선택할 때 사용할 수
있는 함수들이다.</p>
<ul>
<li><p><code>starts_with("x")</code>: 이름이 <code>x</code>로 시작하는 변수 선택</p></li>
<li><p><code>ends_with("x")</code>: 이름이 <code>x</code>로 끝나는 변수 선택</p></li>
<li><p><code>contains("x")</code>: 이름에 <code>x</code>가 있는 변수 선택</p></li>
<li><p><code>num_range("x", 1:10)</code>: <code>x1</code>, <code>x2</code>, … , <code>x10</code>과 동일</p></li>
</ul>
<p>변수 이름이 입력된 문자형 벡터를 이용하여 변수를 선택할 때 사용할 수 있는 함수들
이다.</p>
<ul>
<li><p><code>all_of(vec)</code>: 문자형 벡터 <code>vec</code>에 이름이 입력된 변수 선택. 해당 데이터 프레임에 없는 변수 이름이 <code>vec</code>에 입력되어 있으면 오류 발생.</p></li>
<li><p><code>any_of(vec)</code>: 함수 <code>all_of()</code>와 동일함. 단, 데이터 프레임에 없는 변수 이름이 입력
되어도 오류가 발생하지 않음.</p></li>
</ul>
<p>예제로 데이터 프레임 <code>mtcars_t</code>에서 첫 번째 변수와 마지막 변수를 선택해 보자.</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="dplyr에-의한-데이터-다듬기.html#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> </span>
<span id="cb201-2"><a href="dplyr에-의한-데이터-다듬기.html#cb201-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">select</span>(<span class="dv">1</span>, <span class="fu">last_col</span>())</span>
<span id="cb201-3"><a href="dplyr에-의한-데이터-다듬기.html#cb201-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 x 2</span></span>
<span id="cb201-4"><a href="dplyr에-의한-데이터-다듬기.html#cb201-4" aria-hidden="true" tabindex="-1"></a>   row.name           carb</span>
<span id="cb201-5"><a href="dplyr에-의한-데이터-다듬기.html#cb201-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>             <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb201-6"><a href="dplyr에-의한-데이터-다듬기.html#cb201-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span> Mazda RX4             <span class="dv">4</span></span>
<span id="cb201-7"><a href="dplyr에-의한-데이터-다듬기.html#cb201-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span> Mazda RX4 Wag         <span class="dv">4</span></span>
<span id="cb201-8"><a href="dplyr에-의한-데이터-다듬기.html#cb201-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span> Datsun <span class="dv">710</span>            <span class="dv">1</span></span>
<span id="cb201-9"><a href="dplyr에-의한-데이터-다듬기.html#cb201-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span> Hornet <span class="dv">4</span> Drive        <span class="dv">1</span></span>
<span id="cb201-10"><a href="dplyr에-의한-데이터-다듬기.html#cb201-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span> Hornet Sportabout     <span class="dv">2</span></span>
<span id="cb201-11"><a href="dplyr에-의한-데이터-다듬기.html#cb201-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span> Valiant               <span class="dv">1</span></span>
<span id="cb201-12"><a href="dplyr에-의한-데이터-다듬기.html#cb201-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span> Duster <span class="dv">360</span>            <span class="dv">4</span></span>
<span id="cb201-13"><a href="dplyr에-의한-데이터-다듬기.html#cb201-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span> Merc 240D             <span class="dv">2</span></span>
<span id="cb201-14"><a href="dplyr에-의한-데이터-다듬기.html#cb201-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span> Merc <span class="dv">230</span>              <span class="dv">2</span></span>
<span id="cb201-15"><a href="dplyr에-의한-데이터-다듬기.html#cb201-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> Merc <span class="dv">280</span>              <span class="dv">4</span></span>
<span id="cb201-16"><a href="dplyr에-의한-데이터-다듬기.html#cb201-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 22 more rows</span></span></code></pre></div>
<p>이번에는 <code>mtcars_t</code>에서 이름이 <code>m</code>으로 시작하는 변수를 선택해 보자.</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="dplyr에-의한-데이터-다듬기.html#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> </span>
<span id="cb202-2"><a href="dplyr에-의한-데이터-다듬기.html#cb202-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">&quot;m&quot;</span>))</span>
<span id="cb202-3"><a href="dplyr에-의한-데이터-다듬기.html#cb202-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 x 1</span></span>
<span id="cb202-4"><a href="dplyr에-의한-데이터-다듬기.html#cb202-4" aria-hidden="true" tabindex="-1"></a>     mpg</span>
<span id="cb202-5"><a href="dplyr에-의한-데이터-다듬기.html#cb202-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb202-6"><a href="dplyr에-의한-데이터-다듬기.html#cb202-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span>  <span class="dv">21</span>  </span>
<span id="cb202-7"><a href="dplyr에-의한-데이터-다듬기.html#cb202-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span>  <span class="dv">21</span>  </span>
<span id="cb202-8"><a href="dplyr에-의한-데이터-다듬기.html#cb202-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span>  <span class="fl">22.8</span></span>
<span id="cb202-9"><a href="dplyr에-의한-데이터-다듬기.html#cb202-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span>  <span class="fl">21.4</span></span>
<span id="cb202-10"><a href="dplyr에-의한-데이터-다듬기.html#cb202-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span>  <span class="fl">18.7</span></span>
<span id="cb202-11"><a href="dplyr에-의한-데이터-다듬기.html#cb202-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span>  <span class="fl">18.1</span></span>
<span id="cb202-12"><a href="dplyr에-의한-데이터-다듬기.html#cb202-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span>  <span class="fl">14.3</span></span>
<span id="cb202-13"><a href="dplyr에-의한-데이터-다듬기.html#cb202-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span>  <span class="fl">24.4</span></span>
<span id="cb202-14"><a href="dplyr에-의한-데이터-다듬기.html#cb202-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span>  <span class="fl">22.8</span></span>
<span id="cb202-15"><a href="dplyr에-의한-데이터-다듬기.html#cb202-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>  <span class="fl">19.2</span></span>
<span id="cb202-16"><a href="dplyr에-의한-데이터-다듬기.html#cb202-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 22 more rows</span></span></code></pre></div>
<p>이름이 <code>p</code>로 끝나는 변수도 선택해 보자.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="dplyr에-의한-데이터-다듬기.html#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> </span>
<span id="cb203-2"><a href="dplyr에-의한-데이터-다듬기.html#cb203-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">&quot;p&quot;</span>))</span>
<span id="cb203-3"><a href="dplyr에-의한-데이터-다듬기.html#cb203-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 x 2</span></span>
<span id="cb203-4"><a href="dplyr에-의한-데이터-다듬기.html#cb203-4" aria-hidden="true" tabindex="-1"></a>    disp    hp</span>
<span id="cb203-5"><a href="dplyr에-의한-데이터-다듬기.html#cb203-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb203-6"><a href="dplyr에-의한-데이터-다듬기.html#cb203-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span>  <span class="dv">160</span>    <span class="dv">110</span></span>
<span id="cb203-7"><a href="dplyr에-의한-데이터-다듬기.html#cb203-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span>  <span class="dv">160</span>    <span class="dv">110</span></span>
<span id="cb203-8"><a href="dplyr에-의한-데이터-다듬기.html#cb203-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span>  <span class="dv">108</span>     <span class="dv">93</span></span>
<span id="cb203-9"><a href="dplyr에-의한-데이터-다듬기.html#cb203-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span>  <span class="dv">258</span>    <span class="dv">110</span></span>
<span id="cb203-10"><a href="dplyr에-의한-데이터-다듬기.html#cb203-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span>  <span class="dv">360</span>    <span class="dv">175</span></span>
<span id="cb203-11"><a href="dplyr에-의한-데이터-다듬기.html#cb203-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span>  <span class="dv">225</span>    <span class="dv">105</span></span>
<span id="cb203-12"><a href="dplyr에-의한-데이터-다듬기.html#cb203-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span>  <span class="dv">360</span>    <span class="dv">245</span></span>
<span id="cb203-13"><a href="dplyr에-의한-데이터-다듬기.html#cb203-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span>  <span class="fl">147.</span>    <span class="dv">62</span></span>
<span id="cb203-14"><a href="dplyr에-의한-데이터-다듬기.html#cb203-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span>  <span class="fl">141.</span>    <span class="dv">95</span></span>
<span id="cb203-15"><a href="dplyr에-의한-데이터-다듬기.html#cb203-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>  <span class="fl">168.</span>   <span class="dv">123</span></span>
<span id="cb203-16"><a href="dplyr에-의한-데이터-다듬기.html#cb203-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 22 more rows</span></span></code></pre></div>
<p>이름에 <code>A</code>가 있는 변수를 선택해 보자.</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="dplyr에-의한-데이터-다듬기.html#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> </span>
<span id="cb204-2"><a href="dplyr에-의한-데이터-다듬기.html#cb204-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">&quot;A&quot;</span>))</span>
<span id="cb204-3"><a href="dplyr에-의한-데이터-다듬기.html#cb204-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 x 5</span></span>
<span id="cb204-4"><a href="dplyr에-의한-데이터-다듬기.html#cb204-4" aria-hidden="true" tabindex="-1"></a>   row.name           drat    am  gear  carb</span>
<span id="cb204-5"><a href="dplyr에-의한-데이터-다듬기.html#cb204-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>             <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb204-6"><a href="dplyr에-의한-데이터-다듬기.html#cb204-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span> Mazda RX4          <span class="fl">3.9</span>      <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb204-7"><a href="dplyr에-의한-데이터-다듬기.html#cb204-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span> Mazda RX4 Wag      <span class="fl">3.9</span>      <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb204-8"><a href="dplyr에-의한-데이터-다듬기.html#cb204-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span> Datsun <span class="dv">710</span>         <span class="fl">3.85</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">1</span></span>
<span id="cb204-9"><a href="dplyr에-의한-데이터-다듬기.html#cb204-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span> Hornet <span class="dv">4</span> Drive     <span class="fl">3.08</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">1</span></span>
<span id="cb204-10"><a href="dplyr에-의한-데이터-다듬기.html#cb204-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span> Hornet Sportabout  <span class="fl">3.15</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">2</span></span>
<span id="cb204-11"><a href="dplyr에-의한-데이터-다듬기.html#cb204-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span> Valiant            <span class="fl">2.76</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">1</span></span>
<span id="cb204-12"><a href="dplyr에-의한-데이터-다듬기.html#cb204-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span> Duster <span class="dv">360</span>         <span class="fl">3.21</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">4</span></span>
<span id="cb204-13"><a href="dplyr에-의한-데이터-다듬기.html#cb204-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span> Merc 240D          <span class="fl">3.69</span>     <span class="dv">0</span>     <span class="dv">4</span>     <span class="dv">2</span></span>
<span id="cb204-14"><a href="dplyr에-의한-데이터-다듬기.html#cb204-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span> Merc <span class="dv">230</span>           <span class="fl">3.92</span>     <span class="dv">0</span>     <span class="dv">4</span>     <span class="dv">2</span></span>
<span id="cb204-15"><a href="dplyr에-의한-데이터-다듬기.html#cb204-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> Merc <span class="dv">280</span>           <span class="fl">3.92</span>     <span class="dv">0</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb204-16"><a href="dplyr에-의한-데이터-다듬기.html#cb204-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 22 more rows</span></span></code></pre></div>
<p>대문자 <code>A</code>가 이름에 있는 변수 선택을 요구했지만, 결과는 모두 소문자 <code>a</code>가 이름에
있는 변수가 선택되었다. 이런 결과가 나온 이유는 옵션 <code>ignore.case = TRUE</code>가 디폴트로
설정되어서 대문자와 소문자를 구분하지 않기 때문이다. 이 옵션은 함수 <code>starts_with()</code>와
<code>ends_with()</code>에도 동일하게 <code>TRUE</code>가 디폴트이다.
만일 대문자를 구분해서 문자열 매칭 작업을 하면 다음과 같이 해당되는 변수가 없다는 결과가 나온다.</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="dplyr에-의한-데이터-다듬기.html#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> </span>
<span id="cb205-2"><a href="dplyr에-의한-데이터-다듬기.html#cb205-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">&quot;A&quot;</span>, <span class="at">ignore.case =</span> <span class="cn">FALSE</span>))</span>
<span id="cb205-3"><a href="dplyr에-의한-데이터-다듬기.html#cb205-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 x 0</span></span></code></pre></div>
<p>문자형 벡터 <code>vars</code>에 다음과 같이 변수 이름을 입력해 보자. 앞에서 생성된 데이터 프레임 <code>mtcars_t</code>에는 변수 <code>mpg</code>와 <code>wt</code>는 있지만, 변수 <code>model</code>은 없는 상태이다.</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="dplyr에-의한-데이터-다듬기.html#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;model&quot;</span>, <span class="st">&quot;mpg&quot;</span>, <span class="st">&quot;wt&quot;</span>)</span></code></pre></div>
<p>함수 <code>any_of()</code>를 사용하면 <code>mtcars_t</code>에 있는 두 변수가 선택된다.</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="dplyr에-의한-데이터-다듬기.html#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> </span>
<span id="cb207-2"><a href="dplyr에-의한-데이터-다듬기.html#cb207-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">select</span>(<span class="fu">any_of</span>(vars))</span>
<span id="cb207-3"><a href="dplyr에-의한-데이터-다듬기.html#cb207-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 x 2</span></span>
<span id="cb207-4"><a href="dplyr에-의한-데이터-다듬기.html#cb207-4" aria-hidden="true" tabindex="-1"></a>     mpg    wt</span>
<span id="cb207-5"><a href="dplyr에-의한-데이터-다듬기.html#cb207-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb207-6"><a href="dplyr에-의한-데이터-다듬기.html#cb207-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span>  <span class="dv">21</span>    <span class="fl">2.62</span></span>
<span id="cb207-7"><a href="dplyr에-의한-데이터-다듬기.html#cb207-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span>  <span class="dv">21</span>    <span class="fl">2.88</span></span>
<span id="cb207-8"><a href="dplyr에-의한-데이터-다듬기.html#cb207-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span>  <span class="fl">22.8</span>  <span class="fl">2.32</span></span>
<span id="cb207-9"><a href="dplyr에-의한-데이터-다듬기.html#cb207-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span>  <span class="fl">21.4</span>  <span class="fl">3.22</span></span>
<span id="cb207-10"><a href="dplyr에-의한-데이터-다듬기.html#cb207-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span>  <span class="fl">18.7</span>  <span class="fl">3.44</span></span>
<span id="cb207-11"><a href="dplyr에-의한-데이터-다듬기.html#cb207-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span>  <span class="fl">18.1</span>  <span class="fl">3.46</span></span>
<span id="cb207-12"><a href="dplyr에-의한-데이터-다듬기.html#cb207-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span>  <span class="fl">14.3</span>  <span class="fl">3.57</span></span>
<span id="cb207-13"><a href="dplyr에-의한-데이터-다듬기.html#cb207-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span>  <span class="fl">24.4</span>  <span class="fl">3.19</span></span>
<span id="cb207-14"><a href="dplyr에-의한-데이터-다듬기.html#cb207-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span>  <span class="fl">22.8</span>  <span class="fl">3.15</span></span>
<span id="cb207-15"><a href="dplyr에-의한-데이터-다듬기.html#cb207-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>  <span class="fl">19.2</span>  <span class="fl">3.44</span></span>
<span id="cb207-16"><a href="dplyr에-의한-데이터-다듬기.html#cb207-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 22 more rows</span></span></code></pre></div>
<p>함수 <code>all_of()</code>를 사용하게 되면 <code>model</code>이 <code>mtcars_t</code>에 없는 변수이기 때문에 오류가 발생하게 된다.</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="dplyr에-의한-데이터-다듬기.html#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> </span>
<span id="cb208-2"><a href="dplyr에-의한-데이터-다듬기.html#cb208-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">select</span>(<span class="fu">all_of</span>(vars))</span>
<span id="cb208-3"><a href="dplyr에-의한-데이터-다듬기.html#cb208-3" aria-hidden="true" tabindex="-1"></a>Error<span class="sc">:</span> Can<span class="st">&#39;t subset columns that don&#39;</span>t exist.</span>
<span id="cb208-4"><a href="dplyr에-의한-데이터-다듬기.html#cb208-4" aria-hidden="true" tabindex="-1"></a>x Column <span class="st">`</span><span class="at">model</span><span class="st">`</span> doesn<span class="st">&#39;t exist.</span></span></code></pre></div>
<p>당연한 것이지만, 지금까지 살펴본 세 가지 변수 선택 방법은 서로 혼합해서 사용할 수
있다. 예를 들어 숫자형 변수 중에 이름에 <code>a</code>가 변수는 다음과 같이 선택할 수 있다.</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="dplyr에-의한-데이터-다듬기.html#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> </span>
<span id="cb209-2"><a href="dplyr에-의한-데이터-다듬기.html#cb209-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">select</span>(<span class="fu">where</span>(is.numeric) <span class="sc">&amp;</span> <span class="fu">contains</span>(<span class="st">&quot;c&quot;</span>))</span>
<span id="cb209-3"><a href="dplyr에-의한-데이터-다듬기.html#cb209-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 x 3</span></span>
<span id="cb209-4"><a href="dplyr에-의한-데이터-다듬기.html#cb209-4" aria-hidden="true" tabindex="-1"></a>     cyl  qsec  carb</span>
<span id="cb209-5"><a href="dplyr에-의한-데이터-다듬기.html#cb209-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb209-6"><a href="dplyr에-의한-데이터-다듬기.html#cb209-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span>     <span class="dv">6</span>  <span class="fl">16.5</span>     <span class="dv">4</span></span>
<span id="cb209-7"><a href="dplyr에-의한-데이터-다듬기.html#cb209-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span>     <span class="dv">6</span>  <span class="fl">17.0</span>     <span class="dv">4</span></span>
<span id="cb209-8"><a href="dplyr에-의한-데이터-다듬기.html#cb209-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span>     <span class="dv">4</span>  <span class="fl">18.6</span>     <span class="dv">1</span></span>
<span id="cb209-9"><a href="dplyr에-의한-데이터-다듬기.html#cb209-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span>     <span class="dv">6</span>  <span class="fl">19.4</span>     <span class="dv">1</span></span>
<span id="cb209-10"><a href="dplyr에-의한-데이터-다듬기.html#cb209-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span>     <span class="dv">8</span>  <span class="fl">17.0</span>     <span class="dv">2</span></span>
<span id="cb209-11"><a href="dplyr에-의한-데이터-다듬기.html#cb209-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span>     <span class="dv">6</span>  <span class="fl">20.2</span>     <span class="dv">1</span></span>
<span id="cb209-12"><a href="dplyr에-의한-데이터-다듬기.html#cb209-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span>     <span class="dv">8</span>  <span class="fl">15.8</span>     <span class="dv">4</span></span>
<span id="cb209-13"><a href="dplyr에-의한-데이터-다듬기.html#cb209-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span>     <span class="dv">4</span>  <span class="dv">20</span>       <span class="dv">2</span></span>
<span id="cb209-14"><a href="dplyr에-의한-데이터-다듬기.html#cb209-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span>     <span class="dv">4</span>  <span class="fl">22.9</span>     <span class="dv">2</span></span>
<span id="cb209-15"><a href="dplyr에-의한-데이터-다듬기.html#cb209-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>     <span class="dv">6</span>  <span class="fl">18.3</span>     <span class="dv">4</span></span>
<span id="cb209-16"><a href="dplyr에-의한-데이터-다듬기.html#cb209-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 22 more rows</span></span></code></pre></div>
<ul>
<li>벡터 형태로 변수 선택: 함수 <code>pull()</code></li>
</ul>
<p>데이터 프레임의 한 변수를 선택하여 벡터로 추출하고자 한다면 함수 <code>pull()</code>을 사용하면
된다. 변수 선택 방법은 옵션 <code>var</code>에 변수 이름을 지정하거나, 위치를 나타내는 정수를 지정하는
것이다. 양의 정수는 첫 번째 변수를 시작점으로 하는 위치이고, 음의 정수는 마지막 변수
를 시작점으로 하는 위치이다. 디폴트는 <code>var = -1</code>로 설정되어 있어서, 마지막 변수가 선택된다. 데이터 프레임 <code>mtcars</code>를 대상으로 마지막 변수와 세 번째 변수, 그리고 변수 <code>am</code>을 벡터 형태로 선택해 보자.</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="dplyr에-의한-데이터-다듬기.html#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> <span class="fu">pull</span>()</span>
<span id="cb210-2"><a href="dplyr에-의한-데이터-다듬기.html#cb210-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="dv">4</span> <span class="dv">4</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">1</span> <span class="dv">4</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">4</span> <span class="dv">2</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">4</span> <span class="dv">6</span> <span class="dv">8</span> <span class="dv">2</span></span></code></pre></div>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="dplyr에-의한-데이터-다듬기.html#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> <span class="fu">pull</span>(<span class="at">var =</span> <span class="dv">3</span>)</span>
<span id="cb211-2"><a href="dplyr에-의한-데이터-다듬기.html#cb211-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="dv">6</span> <span class="dv">6</span> <span class="dv">4</span> <span class="dv">6</span> <span class="dv">8</span> <span class="dv">6</span> <span class="dv">8</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">6</span> <span class="dv">6</span> <span class="dv">8</span> <span class="dv">8</span> <span class="dv">8</span> <span class="dv">8</span> <span class="dv">8</span> <span class="dv">8</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">8</span> <span class="dv">8</span> <span class="dv">8</span> <span class="dv">8</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">8</span> <span class="dv">6</span> <span class="dv">8</span> <span class="dv">4</span></span></code></pre></div>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="dplyr에-의한-데이터-다듬기.html#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> <span class="fu">pull</span>(<span class="at">var =</span> am)</span>
<span id="cb212-2"><a href="dplyr에-의한-데이터-다듬기.html#cb212-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span></span></code></pre></div>
</div>
<div id="열-이름-변경-rename과-rename_with" class="section level3" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> 열 이름 변경: <code>rename()</code>과 <code>rename_with()</code></h3>
<p>변수 이름이 매우 복잡하거나 사용하기 불편해서 이름을 변경해야 하는 경우가 많다. 함수
<code>select()</code>로도 변수 이름을 변경할 수 있으나, 함수 내에서 이름이 명시되지 않은 변수는
선택되지 않은 변수가 되어 제거되고, 이름이 변경된 변수만 남게 된다.
변수에 새로운 이름을 주는 방식은 <code>new_name = old_name</code>이 되는데, <code>old_name</code> 자리에는 변수 이름 또는 변수의 열 번호가 올 수 있다.</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="dplyr에-의한-데이터-다듬기.html#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> </span>
<span id="cb213-2"><a href="dplyr에-의한-데이터-다듬기.html#cb213-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">select</span>(<span class="at">model =</span> row.name)</span>
<span id="cb213-3"><a href="dplyr에-의한-데이터-다듬기.html#cb213-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 x 1</span></span>
<span id="cb213-4"><a href="dplyr에-의한-데이터-다듬기.html#cb213-4" aria-hidden="true" tabindex="-1"></a>   model            </span>
<span id="cb213-5"><a href="dplyr에-의한-데이터-다듬기.html#cb213-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>            </span>
<span id="cb213-6"><a href="dplyr에-의한-데이터-다듬기.html#cb213-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span> Mazda RX4        </span>
<span id="cb213-7"><a href="dplyr에-의한-데이터-다듬기.html#cb213-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span> Mazda RX4 Wag    </span>
<span id="cb213-8"><a href="dplyr에-의한-데이터-다듬기.html#cb213-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span> Datsun <span class="dv">710</span>       </span>
<span id="cb213-9"><a href="dplyr에-의한-데이터-다듬기.html#cb213-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span> Hornet <span class="dv">4</span> Drive   </span>
<span id="cb213-10"><a href="dplyr에-의한-데이터-다듬기.html#cb213-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span> Hornet Sportabout</span>
<span id="cb213-11"><a href="dplyr에-의한-데이터-다듬기.html#cb213-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span> Valiant          </span>
<span id="cb213-12"><a href="dplyr에-의한-데이터-다듬기.html#cb213-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span> Duster <span class="dv">360</span>       </span>
<span id="cb213-13"><a href="dplyr에-의한-데이터-다듬기.html#cb213-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span> Merc 240D        </span>
<span id="cb213-14"><a href="dplyr에-의한-데이터-다듬기.html#cb213-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span> Merc <span class="dv">230</span>         </span>
<span id="cb213-15"><a href="dplyr에-의한-데이터-다듬기.html#cb213-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> Merc <span class="dv">280</span>         </span>
<span id="cb213-16"><a href="dplyr에-의한-데이터-다듬기.html#cb213-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 22 more rows</span></span></code></pre></div>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="dplyr에-의한-데이터-다듬기.html#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> </span>
<span id="cb214-2"><a href="dplyr에-의한-데이터-다듬기.html#cb214-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">select</span>(<span class="at">model =</span> <span class="dv">1</span>)</span>
<span id="cb214-3"><a href="dplyr에-의한-데이터-다듬기.html#cb214-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 x 1</span></span>
<span id="cb214-4"><a href="dplyr에-의한-데이터-다듬기.html#cb214-4" aria-hidden="true" tabindex="-1"></a>   model            </span>
<span id="cb214-5"><a href="dplyr에-의한-데이터-다듬기.html#cb214-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>            </span>
<span id="cb214-6"><a href="dplyr에-의한-데이터-다듬기.html#cb214-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span> Mazda RX4        </span>
<span id="cb214-7"><a href="dplyr에-의한-데이터-다듬기.html#cb214-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span> Mazda RX4 Wag    </span>
<span id="cb214-8"><a href="dplyr에-의한-데이터-다듬기.html#cb214-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span> Datsun <span class="dv">710</span>       </span>
<span id="cb214-9"><a href="dplyr에-의한-데이터-다듬기.html#cb214-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span> Hornet <span class="dv">4</span> Drive   </span>
<span id="cb214-10"><a href="dplyr에-의한-데이터-다듬기.html#cb214-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span> Hornet Sportabout</span>
<span id="cb214-11"><a href="dplyr에-의한-데이터-다듬기.html#cb214-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span> Valiant          </span>
<span id="cb214-12"><a href="dplyr에-의한-데이터-다듬기.html#cb214-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span> Duster <span class="dv">360</span>       </span>
<span id="cb214-13"><a href="dplyr에-의한-데이터-다듬기.html#cb214-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span> Merc 240D        </span>
<span id="cb214-14"><a href="dplyr에-의한-데이터-다듬기.html#cb214-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span> Merc <span class="dv">230</span>         </span>
<span id="cb214-15"><a href="dplyr에-의한-데이터-다듬기.html#cb214-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> Merc <span class="dv">280</span>         </span>
<span id="cb214-16"><a href="dplyr에-의한-데이터-다듬기.html#cb214-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 22 more rows</span></span></code></pre></div>
<p>함수 <code>select()</code>에서 이름이 변경되지 않은 변수도 모두 그대로 유지하려면 함수 <code>everything()</code>을 함께 사용하면 된다.</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="dplyr에-의한-데이터-다듬기.html#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> </span>
<span id="cb215-2"><a href="dplyr에-의한-데이터-다듬기.html#cb215-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">select</span>(<span class="at">model =</span> row.name, <span class="fu">everything</span>())</span>
<span id="cb215-3"><a href="dplyr에-의한-데이터-다듬기.html#cb215-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 x 12</span></span>
<span id="cb215-4"><a href="dplyr에-의한-데이터-다듬기.html#cb215-4" aria-hidden="true" tabindex="-1"></a>   model         mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span>
<span id="cb215-5"><a href="dplyr에-의한-데이터-다듬기.html#cb215-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb215-6"><a href="dplyr에-의한-데이터-다듬기.html#cb215-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span> Mazda RX4    <span class="dv">21</span>       <span class="dv">6</span>  <span class="dv">160</span>    <span class="dv">110</span>  <span class="fl">3.9</span>   <span class="fl">2.62</span>  <span class="fl">16.5</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb215-7"><a href="dplyr에-의한-데이터-다듬기.html#cb215-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span> Mazda RX4 <span class="sc">~</span>  <span class="dv">21</span>       <span class="dv">6</span>  <span class="dv">160</span>    <span class="dv">110</span>  <span class="fl">3.9</span>   <span class="fl">2.88</span>  <span class="fl">17.0</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb215-8"><a href="dplyr에-의한-데이터-다듬기.html#cb215-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span> Datsun <span class="dv">710</span>   <span class="fl">22.8</span>     <span class="dv">4</span>  <span class="dv">108</span>     <span class="dv">93</span>  <span class="fl">3.85</span>  <span class="fl">2.32</span>  <span class="fl">18.6</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">1</span></span>
<span id="cb215-9"><a href="dplyr에-의한-데이터-다듬기.html#cb215-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span> Hornet <span class="dv">4</span> D<span class="sc">~</span>  <span class="fl">21.4</span>     <span class="dv">6</span>  <span class="dv">258</span>    <span class="dv">110</span>  <span class="fl">3.08</span>  <span class="fl">3.22</span>  <span class="fl">19.4</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">1</span></span>
<span id="cb215-10"><a href="dplyr에-의한-데이터-다듬기.html#cb215-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span> Hornet Spo<span class="sc">~</span>  <span class="fl">18.7</span>     <span class="dv">8</span>  <span class="dv">360</span>    <span class="dv">175</span>  <span class="fl">3.15</span>  <span class="fl">3.44</span>  <span class="fl">17.0</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">2</span></span>
<span id="cb215-11"><a href="dplyr에-의한-데이터-다듬기.html#cb215-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span> Valiant      <span class="fl">18.1</span>     <span class="dv">6</span>  <span class="dv">225</span>    <span class="dv">105</span>  <span class="fl">2.76</span>  <span class="fl">3.46</span>  <span class="fl">20.2</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">1</span></span>
<span id="cb215-12"><a href="dplyr에-의한-데이터-다듬기.html#cb215-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span> Duster <span class="dv">360</span>   <span class="fl">14.3</span>     <span class="dv">8</span>  <span class="dv">360</span>    <span class="dv">245</span>  <span class="fl">3.21</span>  <span class="fl">3.57</span>  <span class="fl">15.8</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">4</span></span>
<span id="cb215-13"><a href="dplyr에-의한-데이터-다듬기.html#cb215-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span> Merc 240D    <span class="fl">24.4</span>     <span class="dv">4</span>  <span class="fl">147.</span>    <span class="dv">62</span>  <span class="fl">3.69</span>  <span class="fl">3.19</span>  <span class="dv">20</span>       <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">4</span>     <span class="dv">2</span></span>
<span id="cb215-14"><a href="dplyr에-의한-데이터-다듬기.html#cb215-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span> Merc <span class="dv">230</span>     <span class="fl">22.8</span>     <span class="dv">4</span>  <span class="fl">141.</span>    <span class="dv">95</span>  <span class="fl">3.92</span>  <span class="fl">3.15</span>  <span class="fl">22.9</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">4</span>     <span class="dv">2</span></span>
<span id="cb215-15"><a href="dplyr에-의한-데이터-다듬기.html#cb215-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> Merc <span class="dv">280</span>     <span class="fl">19.2</span>     <span class="dv">6</span>  <span class="fl">168.</span>   <span class="dv">123</span>  <span class="fl">3.92</span>  <span class="fl">3.44</span>  <span class="fl">18.3</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb215-16"><a href="dplyr에-의한-데이터-다듬기.html#cb215-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 22 more rows</span></span></code></pre></div>
<p>함수 <code>rename()</code>을 사용하면 이름이 변경되지 않은 변수도 모두 그대로 유지가 된다.
변수에 새로운 이름을 주는 방식은 함수 <code>select()</code>와 동일하게 <code>new_name = old_name</code>이다.</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="dplyr에-의한-데이터-다듬기.html#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> </span>
<span id="cb216-2"><a href="dplyr에-의한-데이터-다듬기.html#cb216-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">rename</span>(<span class="at">model =</span> row.name)</span>
<span id="cb216-3"><a href="dplyr에-의한-데이터-다듬기.html#cb216-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 x 12</span></span>
<span id="cb216-4"><a href="dplyr에-의한-데이터-다듬기.html#cb216-4" aria-hidden="true" tabindex="-1"></a>   model         mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span>
<span id="cb216-5"><a href="dplyr에-의한-데이터-다듬기.html#cb216-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb216-6"><a href="dplyr에-의한-데이터-다듬기.html#cb216-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span> Mazda RX4    <span class="dv">21</span>       <span class="dv">6</span>  <span class="dv">160</span>    <span class="dv">110</span>  <span class="fl">3.9</span>   <span class="fl">2.62</span>  <span class="fl">16.5</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb216-7"><a href="dplyr에-의한-데이터-다듬기.html#cb216-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span> Mazda RX4 <span class="sc">~</span>  <span class="dv">21</span>       <span class="dv">6</span>  <span class="dv">160</span>    <span class="dv">110</span>  <span class="fl">3.9</span>   <span class="fl">2.88</span>  <span class="fl">17.0</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb216-8"><a href="dplyr에-의한-데이터-다듬기.html#cb216-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span> Datsun <span class="dv">710</span>   <span class="fl">22.8</span>     <span class="dv">4</span>  <span class="dv">108</span>     <span class="dv">93</span>  <span class="fl">3.85</span>  <span class="fl">2.32</span>  <span class="fl">18.6</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">1</span></span>
<span id="cb216-9"><a href="dplyr에-의한-데이터-다듬기.html#cb216-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span> Hornet <span class="dv">4</span> D<span class="sc">~</span>  <span class="fl">21.4</span>     <span class="dv">6</span>  <span class="dv">258</span>    <span class="dv">110</span>  <span class="fl">3.08</span>  <span class="fl">3.22</span>  <span class="fl">19.4</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">1</span></span>
<span id="cb216-10"><a href="dplyr에-의한-데이터-다듬기.html#cb216-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span> Hornet Spo<span class="sc">~</span>  <span class="fl">18.7</span>     <span class="dv">8</span>  <span class="dv">360</span>    <span class="dv">175</span>  <span class="fl">3.15</span>  <span class="fl">3.44</span>  <span class="fl">17.0</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">2</span></span>
<span id="cb216-11"><a href="dplyr에-의한-데이터-다듬기.html#cb216-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span> Valiant      <span class="fl">18.1</span>     <span class="dv">6</span>  <span class="dv">225</span>    <span class="dv">105</span>  <span class="fl">2.76</span>  <span class="fl">3.46</span>  <span class="fl">20.2</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">1</span></span>
<span id="cb216-12"><a href="dplyr에-의한-데이터-다듬기.html#cb216-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span> Duster <span class="dv">360</span>   <span class="fl">14.3</span>     <span class="dv">8</span>  <span class="dv">360</span>    <span class="dv">245</span>  <span class="fl">3.21</span>  <span class="fl">3.57</span>  <span class="fl">15.8</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">4</span></span>
<span id="cb216-13"><a href="dplyr에-의한-데이터-다듬기.html#cb216-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span> Merc 240D    <span class="fl">24.4</span>     <span class="dv">4</span>  <span class="fl">147.</span>    <span class="dv">62</span>  <span class="fl">3.69</span>  <span class="fl">3.19</span>  <span class="dv">20</span>       <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">4</span>     <span class="dv">2</span></span>
<span id="cb216-14"><a href="dplyr에-의한-데이터-다듬기.html#cb216-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span> Merc <span class="dv">230</span>     <span class="fl">22.8</span>     <span class="dv">4</span>  <span class="fl">141.</span>    <span class="dv">95</span>  <span class="fl">3.92</span>  <span class="fl">3.15</span>  <span class="fl">22.9</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">4</span>     <span class="dv">2</span></span>
<span id="cb216-15"><a href="dplyr에-의한-데이터-다듬기.html#cb216-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> Merc <span class="dv">280</span>     <span class="fl">19.2</span>     <span class="dv">6</span>  <span class="fl">168.</span>   <span class="dv">123</span>  <span class="fl">3.92</span>  <span class="fl">3.44</span>  <span class="fl">18.3</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb216-16"><a href="dplyr에-의한-데이터-다듬기.html#cb216-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 22 more rows</span></span></code></pre></div>
<p>많은 변수의 이름을 어떤 공통된 양식에 따라 모두 바꿔야 하는 경우, 하나씩 <code>new_name = old_name</code>으로 변경하는 방식은 매우 비효율적이 될 수 있다. 예컨대 대문자로 입력된
변수 이름을 모두 소문자로 변경하거나, 이름 중간에 들어간 점(.)을 밑줄(_)로 변경해야
하는 경우에 하나씩 변경하는 방식이 아닌 해당되는 변수의 이름을 한꺼번에 모두 바꿀 수
있는 방식이 필요한 것이다. 이러한 작업은 함수 <code>rename_with()</code>로 할 수 있다.</p>
<p>데이터 프레임 <code>mtcars_t</code>의 모든 변수 이름을 대문자로 변경해 보자.
함수 <code>rename_with()</code>에는 기존의 변수 이름을 새로운 이름으로 바꿀 수 있는 함수를
지정해야 한다. 모든 변수를 대문자로 변경하는 작업이므로 함수 <code>toupper()</code>를 사용하면 된다.</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="dplyr에-의한-데이터-다듬기.html#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> </span>
<span id="cb217-2"><a href="dplyr에-의한-데이터-다듬기.html#cb217-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">rename_with</span>(toupper)</span>
<span id="cb217-3"><a href="dplyr에-의한-데이터-다듬기.html#cb217-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 x 12</span></span>
<span id="cb217-4"><a href="dplyr에-의한-데이터-다듬기.html#cb217-4" aria-hidden="true" tabindex="-1"></a>   ROW.NAME      MPG   CYL  DISP    HP  DRAT    WT  QSEC    VS    AM  GEAR  CARB</span>
<span id="cb217-5"><a href="dplyr에-의한-데이터-다듬기.html#cb217-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb217-6"><a href="dplyr에-의한-데이터-다듬기.html#cb217-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span> Mazda RX4    <span class="dv">21</span>       <span class="dv">6</span>  <span class="dv">160</span>    <span class="dv">110</span>  <span class="fl">3.9</span>   <span class="fl">2.62</span>  <span class="fl">16.5</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb217-7"><a href="dplyr에-의한-데이터-다듬기.html#cb217-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span> Mazda RX4 <span class="sc">~</span>  <span class="dv">21</span>       <span class="dv">6</span>  <span class="dv">160</span>    <span class="dv">110</span>  <span class="fl">3.9</span>   <span class="fl">2.88</span>  <span class="fl">17.0</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb217-8"><a href="dplyr에-의한-데이터-다듬기.html#cb217-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span> Datsun <span class="dv">710</span>   <span class="fl">22.8</span>     <span class="dv">4</span>  <span class="dv">108</span>     <span class="dv">93</span>  <span class="fl">3.85</span>  <span class="fl">2.32</span>  <span class="fl">18.6</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">1</span></span>
<span id="cb217-9"><a href="dplyr에-의한-데이터-다듬기.html#cb217-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span> Hornet <span class="dv">4</span> D<span class="sc">~</span>  <span class="fl">21.4</span>     <span class="dv">6</span>  <span class="dv">258</span>    <span class="dv">110</span>  <span class="fl">3.08</span>  <span class="fl">3.22</span>  <span class="fl">19.4</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">1</span></span>
<span id="cb217-10"><a href="dplyr에-의한-데이터-다듬기.html#cb217-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span> Hornet Spo<span class="sc">~</span>  <span class="fl">18.7</span>     <span class="dv">8</span>  <span class="dv">360</span>    <span class="dv">175</span>  <span class="fl">3.15</span>  <span class="fl">3.44</span>  <span class="fl">17.0</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">2</span></span>
<span id="cb217-11"><a href="dplyr에-의한-데이터-다듬기.html#cb217-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span> Valiant      <span class="fl">18.1</span>     <span class="dv">6</span>  <span class="dv">225</span>    <span class="dv">105</span>  <span class="fl">2.76</span>  <span class="fl">3.46</span>  <span class="fl">20.2</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">1</span></span>
<span id="cb217-12"><a href="dplyr에-의한-데이터-다듬기.html#cb217-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span> Duster <span class="dv">360</span>   <span class="fl">14.3</span>     <span class="dv">8</span>  <span class="dv">360</span>    <span class="dv">245</span>  <span class="fl">3.21</span>  <span class="fl">3.57</span>  <span class="fl">15.8</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">4</span></span>
<span id="cb217-13"><a href="dplyr에-의한-데이터-다듬기.html#cb217-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span> Merc 240D    <span class="fl">24.4</span>     <span class="dv">4</span>  <span class="fl">147.</span>    <span class="dv">62</span>  <span class="fl">3.69</span>  <span class="fl">3.19</span>  <span class="dv">20</span>       <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">4</span>     <span class="dv">2</span></span>
<span id="cb217-14"><a href="dplyr에-의한-데이터-다듬기.html#cb217-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span> Merc <span class="dv">230</span>     <span class="fl">22.8</span>     <span class="dv">4</span>  <span class="fl">141.</span>    <span class="dv">95</span>  <span class="fl">3.92</span>  <span class="fl">3.15</span>  <span class="fl">22.9</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">4</span>     <span class="dv">2</span></span>
<span id="cb217-15"><a href="dplyr에-의한-데이터-다듬기.html#cb217-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> Merc <span class="dv">280</span>     <span class="fl">19.2</span>     <span class="dv">6</span>  <span class="fl">168.</span>   <span class="dv">123</span>  <span class="fl">3.92</span>  <span class="fl">3.44</span>  <span class="fl">18.3</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb217-16"><a href="dplyr에-의한-데이터-다듬기.html#cb217-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 22 more rows</span></span></code></pre></div>
<p>모든 변수가 이름 변경 대상이 되는 것이 디폴트이다.
변경 대상 변수를 선택을 해야 하는 경우에는 함수 <code>select()</code>에서 사용했던 <code>&lt;tidy-select&gt;</code>의 방식으로 선택하여 함수 <code>rename_with()</code>의 세 번째 입력요소로 지정하면 된다. 이름에 <code>a</code>가 포함되어 있는 변수의 이름을 대문자로 바꾸어 보자.</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="dplyr에-의한-데이터-다듬기.html#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars_t <span class="sc">%&gt;%</span> </span>
<span id="cb218-2"><a href="dplyr에-의한-데이터-다듬기.html#cb218-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">rename_with</span>(toupper, <span class="fu">contains</span>(<span class="st">&quot;a&quot;</span>))</span>
<span id="cb218-3"><a href="dplyr에-의한-데이터-다듬기.html#cb218-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 x 12</span></span>
<span id="cb218-4"><a href="dplyr에-의한-데이터-다듬기.html#cb218-4" aria-hidden="true" tabindex="-1"></a>   ROW.NAME      mpg   cyl  disp    hp  DRAT    wt  qsec    vs    AM  GEAR  CARB</span>
<span id="cb218-5"><a href="dplyr에-의한-데이터-다듬기.html#cb218-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb218-6"><a href="dplyr에-의한-데이터-다듬기.html#cb218-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span> Mazda RX4    <span class="dv">21</span>       <span class="dv">6</span>  <span class="dv">160</span>    <span class="dv">110</span>  <span class="fl">3.9</span>   <span class="fl">2.62</span>  <span class="fl">16.5</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb218-7"><a href="dplyr에-의한-데이터-다듬기.html#cb218-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span> Mazda RX4 <span class="sc">~</span>  <span class="dv">21</span>       <span class="dv">6</span>  <span class="dv">160</span>    <span class="dv">110</span>  <span class="fl">3.9</span>   <span class="fl">2.88</span>  <span class="fl">17.0</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb218-8"><a href="dplyr에-의한-데이터-다듬기.html#cb218-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span> Datsun <span class="dv">710</span>   <span class="fl">22.8</span>     <span class="dv">4</span>  <span class="dv">108</span>     <span class="dv">93</span>  <span class="fl">3.85</span>  <span class="fl">2.32</span>  <span class="fl">18.6</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">1</span></span>
<span id="cb218-9"><a href="dplyr에-의한-데이터-다듬기.html#cb218-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span> Hornet <span class="dv">4</span> D<span class="sc">~</span>  <span class="fl">21.4</span>     <span class="dv">6</span>  <span class="dv">258</span>    <span class="dv">110</span>  <span class="fl">3.08</span>  <span class="fl">3.22</span>  <span class="fl">19.4</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">1</span></span>
<span id="cb218-10"><a href="dplyr에-의한-데이터-다듬기.html#cb218-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span> Hornet Spo<span class="sc">~</span>  <span class="fl">18.7</span>     <span class="dv">8</span>  <span class="dv">360</span>    <span class="dv">175</span>  <span class="fl">3.15</span>  <span class="fl">3.44</span>  <span class="fl">17.0</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">2</span></span>
<span id="cb218-11"><a href="dplyr에-의한-데이터-다듬기.html#cb218-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span> Valiant      <span class="fl">18.1</span>     <span class="dv">6</span>  <span class="dv">225</span>    <span class="dv">105</span>  <span class="fl">2.76</span>  <span class="fl">3.46</span>  <span class="fl">20.2</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">1</span></span>
<span id="cb218-12"><a href="dplyr에-의한-데이터-다듬기.html#cb218-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span> Duster <span class="dv">360</span>   <span class="fl">14.3</span>     <span class="dv">8</span>  <span class="dv">360</span>    <span class="dv">245</span>  <span class="fl">3.21</span>  <span class="fl">3.57</span>  <span class="fl">15.8</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>     <span class="dv">4</span></span>
<span id="cb218-13"><a href="dplyr에-의한-데이터-다듬기.html#cb218-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span> Merc 240D    <span class="fl">24.4</span>     <span class="dv">4</span>  <span class="fl">147.</span>    <span class="dv">62</span>  <span class="fl">3.69</span>  <span class="fl">3.19</span>  <span class="dv">20</span>       <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">4</span>     <span class="dv">2</span></span>
<span id="cb218-14"><a href="dplyr에-의한-데이터-다듬기.html#cb218-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span> Merc <span class="dv">230</span>     <span class="fl">22.8</span>     <span class="dv">4</span>  <span class="fl">141.</span>    <span class="dv">95</span>  <span class="fl">3.92</span>  <span class="fl">3.15</span>  <span class="fl">22.9</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">4</span>     <span class="dv">2</span></span>
<span id="cb218-15"><a href="dplyr에-의한-데이터-다듬기.html#cb218-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> Merc <span class="dv">280</span>     <span class="fl">19.2</span>     <span class="dv">6</span>  <span class="fl">168.</span>   <span class="dv">123</span>  <span class="fl">3.92</span>  <span class="fl">3.44</span>  <span class="fl">18.3</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb218-16"><a href="dplyr에-의한-데이터-다듬기.html#cb218-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 22 more rows</span></span></code></pre></div>
</div>
<div id="열의-위치-변경-relocate" class="section level3" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> 열의 위치 변경: <code>relocate()</code></h3>
<p>열의 위치를 변경해야 하는 경우에 사용할 수 있는 함수이다. 위치를 바꿀 열은 <code>&lt;tidy-select&gt;</code>
방식을 사용하여 선택할 수 있어서, 여러 열의 위치를 한꺼번에 옮길 수 있다.
제일 앞으로 이동되는 것이 디폴트 위치이며 옵션 <code>.after</code> 혹은 <code>.before</code>에서 위치를 지정할 수
있다.</p>
<p>데이터 프레임 <code>iris</code>의 마지막 변수 <code>Species</code>를 첫 번째 위치로 이동해 보자.</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="dplyr에-의한-데이터-다듬기.html#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> iris_t <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(iris)</span></code></pre></div>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="dplyr에-의한-데이터-다듬기.html#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> iris_t <span class="sc">%&gt;%</span> </span>
<span id="cb220-2"><a href="dplyr에-의한-데이터-다듬기.html#cb220-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">relocate</span>(Species)</span>
<span id="cb220-3"><a href="dplyr에-의한-데이터-다듬기.html#cb220-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 150 x 5</span></span>
<span id="cb220-4"><a href="dplyr에-의한-데이터-다듬기.html#cb220-4" aria-hidden="true" tabindex="-1"></a>   Species Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span id="cb220-5"><a href="dplyr에-의한-데이터-다듬기.html#cb220-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>fct<span class="sc">&gt;</span>          <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>        <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb220-6"><a href="dplyr에-의한-데이터-다듬기.html#cb220-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span> setosa           <span class="fl">5.1</span>         <span class="fl">3.5</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span></span>
<span id="cb220-7"><a href="dplyr에-의한-데이터-다듬기.html#cb220-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span> setosa           <span class="fl">4.9</span>         <span class="dv">3</span>            <span class="fl">1.4</span>         <span class="fl">0.2</span></span>
<span id="cb220-8"><a href="dplyr에-의한-데이터-다듬기.html#cb220-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span> setosa           <span class="fl">4.7</span>         <span class="fl">3.2</span>          <span class="fl">1.3</span>         <span class="fl">0.2</span></span>
<span id="cb220-9"><a href="dplyr에-의한-데이터-다듬기.html#cb220-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span> setosa           <span class="fl">4.6</span>         <span class="fl">3.1</span>          <span class="fl">1.5</span>         <span class="fl">0.2</span></span>
<span id="cb220-10"><a href="dplyr에-의한-데이터-다듬기.html#cb220-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span> setosa           <span class="dv">5</span>           <span class="fl">3.6</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span></span>
<span id="cb220-11"><a href="dplyr에-의한-데이터-다듬기.html#cb220-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span> setosa           <span class="fl">5.4</span>         <span class="fl">3.9</span>          <span class="fl">1.7</span>         <span class="fl">0.4</span></span>
<span id="cb220-12"><a href="dplyr에-의한-데이터-다듬기.html#cb220-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span> setosa           <span class="fl">4.6</span>         <span class="fl">3.4</span>          <span class="fl">1.4</span>         <span class="fl">0.3</span></span>
<span id="cb220-13"><a href="dplyr에-의한-데이터-다듬기.html#cb220-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span> setosa           <span class="dv">5</span>           <span class="fl">3.4</span>          <span class="fl">1.5</span>         <span class="fl">0.2</span></span>
<span id="cb220-14"><a href="dplyr에-의한-데이터-다듬기.html#cb220-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span> setosa           <span class="fl">4.4</span>         <span class="fl">2.9</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span></span>
<span id="cb220-15"><a href="dplyr에-의한-데이터-다듬기.html#cb220-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> setosa           <span class="fl">4.9</span>         <span class="fl">3.1</span>          <span class="fl">1.5</span>         <span class="fl">0.1</span></span>
<span id="cb220-16"><a href="dplyr에-의한-데이터-다듬기.html#cb220-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 140 more rows</span></span></code></pre></div>
<p>이름이 <code>th</code>로 끝나는 변수를 모두 <code>Species</code> 다음으로 이동하면 변수 <code>Species</code>를 첫 번째 위치로 이동하는 것이 된다.</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="dplyr에-의한-데이터-다듬기.html#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> iris_t <span class="sc">%&gt;%</span> </span>
<span id="cb221-2"><a href="dplyr에-의한-데이터-다듬기.html#cb221-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">relocate</span>(<span class="fu">ends_with</span>(<span class="st">&quot;th&quot;</span>), <span class="at">.after =</span> Species)</span>
<span id="cb221-3"><a href="dplyr에-의한-데이터-다듬기.html#cb221-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 150 x 5</span></span>
<span id="cb221-4"><a href="dplyr에-의한-데이터-다듬기.html#cb221-4" aria-hidden="true" tabindex="-1"></a>   Species Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span id="cb221-5"><a href="dplyr에-의한-데이터-다듬기.html#cb221-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>fct<span class="sc">&gt;</span>          <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>        <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb221-6"><a href="dplyr에-의한-데이터-다듬기.html#cb221-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span> setosa           <span class="fl">5.1</span>         <span class="fl">3.5</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span></span>
<span id="cb221-7"><a href="dplyr에-의한-데이터-다듬기.html#cb221-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span> setosa           <span class="fl">4.9</span>         <span class="dv">3</span>            <span class="fl">1.4</span>         <span class="fl">0.2</span></span>
<span id="cb221-8"><a href="dplyr에-의한-데이터-다듬기.html#cb221-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span> setosa           <span class="fl">4.7</span>         <span class="fl">3.2</span>          <span class="fl">1.3</span>         <span class="fl">0.2</span></span>
<span id="cb221-9"><a href="dplyr에-의한-데이터-다듬기.html#cb221-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span> setosa           <span class="fl">4.6</span>         <span class="fl">3.1</span>          <span class="fl">1.5</span>         <span class="fl">0.2</span></span>
<span id="cb221-10"><a href="dplyr에-의한-데이터-다듬기.html#cb221-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span> setosa           <span class="dv">5</span>           <span class="fl">3.6</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span></span>
<span id="cb221-11"><a href="dplyr에-의한-데이터-다듬기.html#cb221-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span> setosa           <span class="fl">5.4</span>         <span class="fl">3.9</span>          <span class="fl">1.7</span>         <span class="fl">0.4</span></span>
<span id="cb221-12"><a href="dplyr에-의한-데이터-다듬기.html#cb221-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span> setosa           <span class="fl">4.6</span>         <span class="fl">3.4</span>          <span class="fl">1.4</span>         <span class="fl">0.3</span></span>
<span id="cb221-13"><a href="dplyr에-의한-데이터-다듬기.html#cb221-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span> setosa           <span class="dv">5</span>           <span class="fl">3.4</span>          <span class="fl">1.5</span>         <span class="fl">0.2</span></span>
<span id="cb221-14"><a href="dplyr에-의한-데이터-다듬기.html#cb221-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span> setosa           <span class="fl">4.4</span>         <span class="fl">2.9</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span></span>
<span id="cb221-15"><a href="dplyr에-의한-데이터-다듬기.html#cb221-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> setosa           <span class="fl">4.9</span>         <span class="fl">3.1</span>          <span class="fl">1.5</span>         <span class="fl">0.1</span></span>
<span id="cb221-16"><a href="dplyr에-의한-데이터-다듬기.html#cb221-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 140 more rows</span></span></code></pre></div>
<p>특정 변수를 제일 앞으로 이동하는 작업은 함수 <code>select()</code>에 <code>everything()</code>을 함께 사용해서 할 수도 있다.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="dplyr에-의한-데이터-다듬기.html#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> iris_t <span class="sc">%&gt;%</span> </span>
<span id="cb222-2"><a href="dplyr에-의한-데이터-다듬기.html#cb222-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">select</span>(Species, <span class="fu">everything</span>())</span>
<span id="cb222-3"><a href="dplyr에-의한-데이터-다듬기.html#cb222-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 150 x 5</span></span>
<span id="cb222-4"><a href="dplyr에-의한-데이터-다듬기.html#cb222-4" aria-hidden="true" tabindex="-1"></a>   Species Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span id="cb222-5"><a href="dplyr에-의한-데이터-다듬기.html#cb222-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>fct<span class="sc">&gt;</span>          <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>        <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb222-6"><a href="dplyr에-의한-데이터-다듬기.html#cb222-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span> setosa           <span class="fl">5.1</span>         <span class="fl">3.5</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span></span>
<span id="cb222-7"><a href="dplyr에-의한-데이터-다듬기.html#cb222-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span> setosa           <span class="fl">4.9</span>         <span class="dv">3</span>            <span class="fl">1.4</span>         <span class="fl">0.2</span></span>
<span id="cb222-8"><a href="dplyr에-의한-데이터-다듬기.html#cb222-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span> setosa           <span class="fl">4.7</span>         <span class="fl">3.2</span>          <span class="fl">1.3</span>         <span class="fl">0.2</span></span>
<span id="cb222-9"><a href="dplyr에-의한-데이터-다듬기.html#cb222-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span> setosa           <span class="fl">4.6</span>         <span class="fl">3.1</span>          <span class="fl">1.5</span>         <span class="fl">0.2</span></span>
<span id="cb222-10"><a href="dplyr에-의한-데이터-다듬기.html#cb222-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span> setosa           <span class="dv">5</span>           <span class="fl">3.6</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span></span>
<span id="cb222-11"><a href="dplyr에-의한-데이터-다듬기.html#cb222-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span> setosa           <span class="fl">5.4</span>         <span class="fl">3.9</span>          <span class="fl">1.7</span>         <span class="fl">0.4</span></span>
<span id="cb222-12"><a href="dplyr에-의한-데이터-다듬기.html#cb222-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span> setosa           <span class="fl">4.6</span>         <span class="fl">3.4</span>          <span class="fl">1.4</span>         <span class="fl">0.3</span></span>
<span id="cb222-13"><a href="dplyr에-의한-데이터-다듬기.html#cb222-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span> setosa           <span class="dv">5</span>           <span class="fl">3.4</span>          <span class="fl">1.5</span>         <span class="fl">0.2</span></span>
<span id="cb222-14"><a href="dplyr에-의한-데이터-다듬기.html#cb222-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span> setosa           <span class="fl">4.4</span>         <span class="fl">2.9</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span></span>
<span id="cb222-15"><a href="dplyr에-의한-데이터-다듬기.html#cb222-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> setosa           <span class="fl">4.9</span>         <span class="fl">3.1</span>          <span class="fl">1.5</span>         <span class="fl">0.1</span></span>
<span id="cb222-16"><a href="dplyr에-의한-데이터-다듬기.html#cb222-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 140 more rows</span></span></code></pre></div>
</div>
<div id="새로운-열의-추가-mutate와-transmute" class="section level3" number="4.2.4">
<h3><span class="header-section-number">4.2.4</span> 새로운 열의 추가: <code>mutate()</code>와 <code>transmute()</code></h3>
<p>데이터 프레임을 구성하고 있는 기존의 변수들을 이용하여 새로운 변수를 만들어 데이터
프레임에 추가해야 할 경우가 종종 있다. 이러한 작업을 수행하는 함수가 <code>mutate()</code>이다.
데이터 프레임이 함수 <code>mutate()</code>의 첫 번째 입력 요소가 되고, 이어서 새로운 변수를 만드는 표현식이 차례로 입력된다.
새롭게 만들어진 변수는 데이터 프레임의 제일 마지막 변수로 추가된다. 만일 새롭게 만들어진 변수로만 데이터 프레임을 구성하고자 한다면 함수
<code>transmute()</code>를 사용하면 된다. 함수 <code>mutate()</code>와 <code>transmute()</code>에서 새로운 변수를 만들
때 유용하게 사용되는 함수들의 목록이 RStudio의 메뉴 <code>Help &gt; Cheatsheets &gt; Data Transformation with dplyr</code>에 잘 정리되어 있다.</p>
<ul>
<li>예제: <code>mtcars</code></li>
</ul>
<p>다음의 조건에 의하여 새로운 변수 <code>kml</code>과 <code>gp_kml</code>을 만들고 데이터 프레임에 첫 번째와
두번째 변수로 추가해 보자.</p>
<p>∙ 변수 <code>kml</code>: 1 mpg(mile per gallon)는 0.43 kml(kilometer per liter)</p>
<p>∙ 변수 <code>gp_kml</code>: <code>kml</code>이 10 이상이면 <code>good</code>, 10 미만이면 <code>bad</code></p>
<p>연속형 변수 <code>kml</code>을 기반으로 범주의 개수가 두 개인 범주형 변수 <code>gp_kml</code>를 생성하는
작업은 함수 <code>if_else()</code>를 사용하는 것이 효과적이다. 기본적인 사용법은 <code>if_else(condition, true, false)</code>이며 <code>condition</code>이 만족되면 <code>true</code>의 값을 갖고, 아니면 <code>false</code>의 값을 갖게 된다. 조건의 만족 여부에 따라 할당되는 두 가지 값의 유형은 같아야 한다.</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="dplyr에-의한-데이터-다듬기.html#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">as_tibble</span>(mtcars) <span class="sc">%&gt;%</span> </span>
<span id="cb223-2"><a href="dplyr에-의한-데이터-다듬기.html#cb223-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">mutate</span>(<span class="at">kml =</span> <span class="fl">0.43</span><span class="sc">*</span>mpg,</span>
<span id="cb223-3"><a href="dplyr에-의한-데이터-다듬기.html#cb223-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>          <span class="at">gp_kml =</span> <span class="fu">if_else</span>(kml <span class="sc">&gt;=</span> <span class="dv">10</span>, <span class="st">&quot;good&quot;</span>, <span class="st">&quot;bad&quot;</span>)</span>
<span id="cb223-4"><a href="dplyr에-의한-데이터-다듬기.html#cb223-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>          ) <span class="sc">%&gt;%</span> </span>
<span id="cb223-5"><a href="dplyr에-의한-데이터-다듬기.html#cb223-5" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">relocate</span>(kml, gp_kml) <span class="sc">%&gt;%</span> </span>
<span id="cb223-6"><a href="dplyr에-의한-데이터-다듬기.html#cb223-6" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">print</span>(<span class="at">n=</span><span class="dv">3</span>)</span>
<span id="cb223-7"><a href="dplyr에-의한-데이터-다듬기.html#cb223-7" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 x 13</span></span>
<span id="cb223-8"><a href="dplyr에-의한-데이터-다듬기.html#cb223-8" aria-hidden="true" tabindex="-1"></a>    kml gp_kml   mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span>
<span id="cb223-9"><a href="dplyr에-의한-데이터-다듬기.html#cb223-9" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb223-10"><a href="dplyr에-의한-데이터-다듬기.html#cb223-10" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="fl">9.03</span> bad     <span class="dv">21</span>       <span class="dv">6</span>   <span class="dv">160</span>   <span class="dv">110</span>  <span class="fl">3.9</span>   <span class="fl">2.62</span>  <span class="fl">16.5</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb223-11"><a href="dplyr에-의한-데이터-다듬기.html#cb223-11" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="fl">9.03</span> bad     <span class="dv">21</span>       <span class="dv">6</span>   <span class="dv">160</span>   <span class="dv">110</span>  <span class="fl">3.9</span>   <span class="fl">2.88</span>  <span class="fl">17.0</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb223-12"><a href="dplyr에-의한-데이터-다듬기.html#cb223-12" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  <span class="fl">9.80</span> bad     <span class="fl">22.8</span>     <span class="dv">4</span>   <span class="dv">108</span>    <span class="dv">93</span>  <span class="fl">3.85</span>  <span class="fl">2.32</span>  <span class="fl">18.6</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">1</span></span>
<span id="cb223-13"><a href="dplyr에-의한-데이터-다듬기.html#cb223-13" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 29 more rows</span></span></code></pre></div>
<p>연속형 변수를 기반으로 범주의 개수가 3개 이상이 되는 범주형 변수를 생성하려는 경우에 함수 <code>if_else()</code>를 사용하는 것은 적절하지 않을 수 있다. 이러한 경우에는 함수
<code>case_when()</code>이 효과적인 대안이 된다. 기본적인 형태는 <code>LHS ~ RHS</code>로서, <code>LHS</code>는 조건이고,
<code>RHS</code>에는 할당하려는 값이 된다. 다음 구조에서는 <code>condition_1</code>이 <code>TRUE</code>이면 <code>value_1</code>, <code>condition_1</code>은 <code>FALSE</code>이나 <code>condition_2</code>가 <code>TRUE</code>이면 <code>value_2</code>, 두 조건 모두 <code>FALSE</code>이면 <code>value_3</code>를 출력하게 된다.</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="dplyr에-의한-데이터-다듬기.html#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="fu">case_when</span>(</span>
<span id="cb224-2"><a href="dplyr에-의한-데이터-다듬기.html#cb224-2" aria-hidden="true" tabindex="-1"></a>  condition_1 <span class="sc">~</span> value_1,</span>
<span id="cb224-3"><a href="dplyr에-의한-데이터-다듬기.html#cb224-3" aria-hidden="true" tabindex="-1"></a>  condition_2 <span class="sc">~</span> value_2,</span>
<span id="cb224-4"><a href="dplyr에-의한-데이터-다듬기.html#cb224-4" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> value_3</span>
<span id="cb224-5"><a href="dplyr에-의한-데이터-다듬기.html#cb224-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><code>LHS</code>에 제시되는 조건들은 순서대로 평가가 된다. 따라서 가장 좁은 범위의 조건이 가장
먼저 제시되어야 하고, 범위를 넓혀가는 조건이 잇따라 제시되어야 한다. 제시되는 조건의
개수에는 제한이 없다. 또한 <code>RHS</code>에 제시된 값들은 모두 같은 유형이어야 한다.
이제 다음의 변경된 조건으로 변수 <code>gp_kml</code>을 생성해 보자.</p>
<p>∙ 변수 <code>gp_kml</code>: <code>kml</code>이 11 이상이면 <code>excellent</code>, 11 미만 8 이상이면 <code>good</code>, 8 미만이면 <code>bad</code></p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="dplyr에-의한-데이터-다듬기.html#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">as_tibble</span>(mtcars) <span class="sc">%&gt;%</span> </span>
<span id="cb225-2"><a href="dplyr에-의한-데이터-다듬기.html#cb225-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">mutate</span>(<span class="at">kml =</span> <span class="fl">0.43</span><span class="sc">*</span>mpg,</span>
<span id="cb225-3"><a href="dplyr에-의한-데이터-다듬기.html#cb225-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>          <span class="at">gp_kml =</span> <span class="fu">case_when</span>(</span>
<span id="cb225-4"><a href="dplyr에-의한-데이터-다듬기.html#cb225-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>            kml <span class="sc">&lt;</span> <span class="dv">8</span> <span class="sc">~</span> <span class="st">&quot;bad&quot;</span>,</span>
<span id="cb225-5"><a href="dplyr에-의한-데이터-다듬기.html#cb225-5" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>            kml <span class="sc">&lt;</span> <span class="dv">11</span> <span class="sc">~</span> <span class="st">&quot;good&quot;</span>,</span>
<span id="cb225-6"><a href="dplyr에-의한-데이터-다듬기.html#cb225-6" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>            <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;excellent&quot;</span></span>
<span id="cb225-7"><a href="dplyr에-의한-데이터-다듬기.html#cb225-7" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>            )</span>
<span id="cb225-8"><a href="dplyr에-의한-데이터-다듬기.html#cb225-8" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>          ) <span class="sc">%&gt;%</span> </span>
<span id="cb225-9"><a href="dplyr에-의한-데이터-다듬기.html#cb225-9" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">relocate</span>(kml, gp_kml) <span class="sc">%&gt;%</span> </span>
<span id="cb225-10"><a href="dplyr에-의한-데이터-다듬기.html#cb225-10" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">print</span>(<span class="at">n=</span><span class="dv">3</span>)</span>
<span id="cb225-11"><a href="dplyr에-의한-데이터-다듬기.html#cb225-11" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 x 13</span></span>
<span id="cb225-12"><a href="dplyr에-의한-데이터-다듬기.html#cb225-12" aria-hidden="true" tabindex="-1"></a>    kml gp_kml   mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span>
<span id="cb225-13"><a href="dplyr에-의한-데이터-다듬기.html#cb225-13" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb225-14"><a href="dplyr에-의한-데이터-다듬기.html#cb225-14" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="fl">9.03</span> good    <span class="dv">21</span>       <span class="dv">6</span>   <span class="dv">160</span>   <span class="dv">110</span>  <span class="fl">3.9</span>   <span class="fl">2.62</span>  <span class="fl">16.5</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb225-15"><a href="dplyr에-의한-데이터-다듬기.html#cb225-15" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="fl">9.03</span> good    <span class="dv">21</span>       <span class="dv">6</span>   <span class="dv">160</span>   <span class="dv">110</span>  <span class="fl">3.9</span>   <span class="fl">2.88</span>  <span class="fl">17.0</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb225-16"><a href="dplyr에-의한-데이터-다듬기.html#cb225-16" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  <span class="fl">9.80</span> good    <span class="fl">22.8</span>     <span class="dv">4</span>   <span class="dv">108</span>    <span class="dv">93</span>  <span class="fl">3.85</span>  <span class="fl">2.32</span>  <span class="fl">18.6</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">1</span></span>
<span id="cb225-17"><a href="dplyr에-의한-데이터-다듬기.html#cb225-17" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 29 more rows</span></span></code></pre></div>
<p>만일 새로운 변수만 유지하고 나머지 변수는 모두 삭제하려고 한다면, 함수 <code>transmute()</code>를 사용하면 된다.</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="dplyr에-의한-데이터-다듬기.html#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">as_tibble</span>(mtcars) <span class="sc">%&gt;%</span> </span>
<span id="cb226-2"><a href="dplyr에-의한-데이터-다듬기.html#cb226-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">transmute</span>(<span class="at">kml =</span> <span class="fl">0.43</span><span class="sc">*</span>mpg,</span>
<span id="cb226-3"><a href="dplyr에-의한-데이터-다듬기.html#cb226-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>          <span class="at">gp_kml =</span> <span class="fu">if_else</span>(kml <span class="sc">&gt;=</span> <span class="dv">10</span>, <span class="st">&quot;good&quot;</span>, <span class="st">&quot;bad&quot;</span>)</span>
<span id="cb226-4"><a href="dplyr에-의한-데이터-다듬기.html#cb226-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   ) <span class="sc">%&gt;%</span> </span>
<span id="cb226-5"><a href="dplyr에-의한-데이터-다듬기.html#cb226-5" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">print</span>(<span class="at">n=</span><span class="dv">3</span>)</span>
<span id="cb226-6"><a href="dplyr에-의한-데이터-다듬기.html#cb226-6" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 32 x 2</span></span>
<span id="cb226-7"><a href="dplyr에-의한-데이터-다듬기.html#cb226-7" aria-hidden="true" tabindex="-1"></a>    kml gp_kml</span>
<span id="cb226-8"><a href="dplyr에-의한-데이터-다듬기.html#cb226-8" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> </span>
<span id="cb226-9"><a href="dplyr에-의한-데이터-다듬기.html#cb226-9" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="fl">9.03</span> bad   </span>
<span id="cb226-10"><a href="dplyr에-의한-데이터-다듬기.html#cb226-10" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="fl">9.03</span> bad   </span>
<span id="cb226-11"><a href="dplyr에-의한-데이터-다듬기.html#cb226-11" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  <span class="fl">9.80</span> bad   </span>
<span id="cb226-12"><a href="dplyr에-의한-데이터-다듬기.html#cb226-12" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 29 more rows</span></span></code></pre></div>
</div>
</div>
<div id="여러-행-자료의-요약-summarise" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> 여러 행 자료의 요약: <code>summarise()</code></h2>
<p>변수들의 요약통계량을 계산할 때 유용하게 사용되는 함수가 <code>summarise()</code>이다. 첫 번째
입력 요소는 데이터 프레임이고, 이어서 <code>name=fun</code>의 형태로 원하는 요약통계량 값을 계산할 함수와 열의 이름을 입력한다. 예를 들어 데이터 프레임 <code>mpg</code>의 변수 <code>hwy</code>의 전체 케이스와 서로 다른 값을 갖고 있는 케이스의 개수, 그리고 평균값을 계산해 보자.
전체 케이스는 함수 <code>n()</code>으로, 서로 다른 값을 갖는 케이스의 개수는 <code>n_distinct()</code>로 계산한다.</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="dplyr에-의한-데이터-다듬기.html#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mpg <span class="sc">%&gt;%</span> </span>
<span id="cb227-2"><a href="dplyr에-의한-데이터-다듬기.html#cb227-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(), <span class="at">n_hwy =</span> <span class="fu">n_distinct</span>(), <span class="at">avg_hwy =</span> <span class="fu">mean</span>(hwy))</span>
<span id="cb227-3"><a href="dplyr에-의한-데이터-다듬기.html#cb227-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 1 x 3</span></span>
<span id="cb227-4"><a href="dplyr에-의한-데이터-다듬기.html#cb227-4" aria-hidden="true" tabindex="-1"></a>      n n_hwy avg_hwy</span>
<span id="cb227-5"><a href="dplyr에-의한-데이터-다듬기.html#cb227-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span>   <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb227-6"><a href="dplyr에-의한-데이터-다듬기.html#cb227-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>   <span class="dv">234</span>     <span class="dv">0</span>    <span class="fl">23.4</span></span></code></pre></div>
<p>dplyr 1.0.0 버전부터 길이가 2 이상이 되는 벡터를 결과로 출력하는 함수도 사용할 수
있게 됐다. 이 경우, 길이가 1인 요약통계량의 값이 함께 있다면 반복이 되어서 길이를 맞춘다.</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="dplyr에-의한-데이터-다듬기.html#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mpg <span class="sc">%&gt;%</span></span>
<span id="cb228-2"><a href="dplyr에-의한-데이터-다듬기.html#cb228-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">summarise</span>(<span class="at">avg_hwy =</span> <span class="fu">mean</span>(hwy), <span class="at">rng_hwy =</span> <span class="fu">range</span>(hwy))</span>
<span id="cb228-3"><a href="dplyr에-의한-데이터-다듬기.html#cb228-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 2 x 2</span></span>
<span id="cb228-4"><a href="dplyr에-의한-데이터-다듬기.html#cb228-4" aria-hidden="true" tabindex="-1"></a>  avg_hwy rng_hwy</span>
<span id="cb228-5"><a href="dplyr에-의한-데이터-다듬기.html#cb228-5" aria-hidden="true" tabindex="-1"></a>    <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span>   <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb228-6"><a href="dplyr에-의한-데이터-다듬기.html#cb228-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>    <span class="fl">23.4</span>      <span class="dv">12</span></span>
<span id="cb228-7"><a href="dplyr에-의한-데이터-다듬기.html#cb228-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    <span class="fl">23.4</span>      <span class="dv">44</span></span></code></pre></div>
<p>길이가 서로 다른 벡터로는 데이터 프레임을 구성할 수 없다. 다만 예외적으로 길이가
1인 벡터에게만 반복을 허용하는 것이다. 따라서 평균값과 범위(최소, 최대), 그리고
사분위수(0.25분위수, 0.5분위수, 0.75분위수)를 함께 나타내려는 다음 시도는 잘못된 것이다.</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="dplyr에-의한-데이터-다듬기.html#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mpg <span class="sc">%&gt;%</span></span>
<span id="cb229-2"><a href="dplyr에-의한-데이터-다듬기.html#cb229-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">summarise</span>(<span class="at">avg_hwy =</span> <span class="fu">mean</span>(hwy), <span class="at">rng_hwy =</span> <span class="fu">range</span>(hwy), </span>
<span id="cb229-3"><a href="dplyr에-의한-데이터-다듬기.html#cb229-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>             <span class="at">q_hwy =</span> <span class="fu">quantile</span>(hwy, <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.25</span>,<span class="fl">0.5</span>,<span class="fl">0.75</span>)))</span>
<span id="cb229-4"><a href="dplyr에-의한-데이터-다듬기.html#cb229-4" aria-hidden="true" tabindex="-1"></a>Error<span class="sc">:</span> Problem with <span class="st">`</span><span class="at">summarise()</span><span class="st">`</span> column <span class="st">`</span><span class="at">q_hwy</span><span class="st">`</span>.</span>
<span id="cb229-5"><a href="dplyr에-의한-데이터-다듬기.html#cb229-5" aria-hidden="true" tabindex="-1"></a>i <span class="st">`</span><span class="at">q_hwy = quantile(hwy, probs = c(0.25, 0.5, 0.75))</span><span class="st">`</span>.</span>
<span id="cb229-6"><a href="dplyr에-의한-데이터-다듬기.html#cb229-6" aria-hidden="true" tabindex="-1"></a>x <span class="st">`</span><span class="at">q_hwy</span><span class="st">`</span> must be size <span class="dv">2</span> or <span class="dv">1</span>, not <span class="fl">3.</span></span>
<span id="cb229-7"><a href="dplyr에-의한-데이터-다듬기.html#cb229-7" aria-hidden="true" tabindex="-1"></a>i An earlier column had size <span class="fl">2.</span></span></code></pre></div>
<p>함수 <code>summarise()</code>는 사실 그 자체만으로는 그렇게 특별히 유용한 함수라고 하기 어렵다.
그러나 전체 데이터를 몇 개의 그룹으로 구분하는 함수 <code>group_by()</code>와 함께 사용하면 매우 강력한 분석 도구가 된다.</p>
</div>
<div id="그룹-데이터-프레임" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> 그룹 데이터 프레임</h2>
<p><code>dplyr</code> 기본 함수들은 그룹으로 구분된 데이터 프레임을 대상으로 작업할 때 더욱 강력한
위력을 발휘할 수 있다. 이 절에서는 함수 <code>group_by()</code>를 사용하여 그룹 데이터 프레임을
생성하는 방법과 <code>dplyr</code> 기본 함수들이 그룹 데이터 프레임에서는 어떤 방식으로 작동되는지에 대해 살펴보도록 하자.</p>
<div id="그룹-데이터-프레임의-생성-group_by" class="section level3" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> 그룹 데이터 프레임의 생성: <code>group_by()</code></h3>
<p>함수 <code>group_by()</code>는 한 개 이상의 변수를 이용하여 전체 데이터를 그룹으로 구분하는 기능을 갖고 있다.
첫 번째 입력요소는 데이터 프레임이고, 이어서 그룹을 구분하는 데 사용될 변수를 나열하면 된다.
실행결과는 tibble이며, 실행 전의 tibble과 출력된 형태에서는 큰 차이를 볼 수 없으나 <code>grouped_df</code>라는 class 속성이 추가된 tibble이 된다.</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="dplyr에-의한-데이터-다듬기.html#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> by_cyl <span class="ot">&lt;-</span> mpg <span class="sc">%&gt;%</span> </span>
<span id="cb230-2"><a href="dplyr에-의한-데이터-다듬기.html#cb230-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span> </span>
<span id="cb230-3"><a href="dplyr에-의한-데이터-다듬기.html#cb230-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb230-4"><a href="dplyr에-의한-데이터-다듬기.html#cb230-4" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 234 x 11</span></span>
<span id="cb230-5"><a href="dplyr에-의한-데이터-다듬기.html#cb230-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Groups:   cyl [4]</span></span>
<span id="cb230-6"><a href="dplyr에-의한-데이터-다듬기.html#cb230-6" aria-hidden="true" tabindex="-1"></a>  manufacturer model displ  year   cyl trans      drv     cty   hwy fl    class </span>
<span id="cb230-7"><a href="dplyr에-의한-데이터-다듬기.html#cb230-7" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>        <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>      <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> </span>
<span id="cb230-8"><a href="dplyr에-의한-데이터-다듬기.html#cb230-8" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> audi         a4      <span class="fl">1.8</span>  <span class="dv">1999</span>     <span class="dv">4</span> <span class="fu">auto</span>(l5)   f        <span class="dv">18</span>    <span class="dv">29</span> p     compa<span class="sc">~</span></span>
<span id="cb230-9"><a href="dplyr에-의한-데이터-다듬기.html#cb230-9" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> audi         a4      <span class="fl">1.8</span>  <span class="dv">1999</span>     <span class="dv">4</span> <span class="fu">manual</span>(m5) f        <span class="dv">21</span>    <span class="dv">29</span> p     compa<span class="sc">~</span></span>
<span id="cb230-10"><a href="dplyr에-의한-데이터-다듬기.html#cb230-10" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> audi         a4      <span class="dv">2</span>    <span class="dv">2008</span>     <span class="dv">4</span> <span class="fu">manual</span>(m6) f        <span class="dv">20</span>    <span class="dv">31</span> p     compa<span class="sc">~</span></span>
<span id="cb230-11"><a href="dplyr에-의한-데이터-다듬기.html#cb230-11" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 231 more rows</span></span></code></pre></div>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="dplyr에-의한-데이터-다듬기.html#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> by_cyl_drv <span class="ot">&lt;-</span> mpg <span class="sc">%&gt;%</span> </span>
<span id="cb231-2"><a href="dplyr에-의한-데이터-다듬기.html#cb231-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">group_by</span>(cyl, drv) <span class="sc">%&gt;%</span> </span>
<span id="cb231-3"><a href="dplyr에-의한-데이터-다듬기.html#cb231-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb231-4"><a href="dplyr에-의한-데이터-다듬기.html#cb231-4" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 234 x 11</span></span>
<span id="cb231-5"><a href="dplyr에-의한-데이터-다듬기.html#cb231-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Groups:   cyl, drv [9]</span></span>
<span id="cb231-6"><a href="dplyr에-의한-데이터-다듬기.html#cb231-6" aria-hidden="true" tabindex="-1"></a>  manufacturer model displ  year   cyl trans      drv     cty   hwy fl    class </span>
<span id="cb231-7"><a href="dplyr에-의한-데이터-다듬기.html#cb231-7" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>        <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>      <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> </span>
<span id="cb231-8"><a href="dplyr에-의한-데이터-다듬기.html#cb231-8" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> audi         a4      <span class="fl">1.8</span>  <span class="dv">1999</span>     <span class="dv">4</span> <span class="fu">auto</span>(l5)   f        <span class="dv">18</span>    <span class="dv">29</span> p     compa<span class="sc">~</span></span>
<span id="cb231-9"><a href="dplyr에-의한-데이터-다듬기.html#cb231-9" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> audi         a4      <span class="fl">1.8</span>  <span class="dv">1999</span>     <span class="dv">4</span> <span class="fu">manual</span>(m5) f        <span class="dv">21</span>    <span class="dv">29</span> p     compa<span class="sc">~</span></span>
<span id="cb231-10"><a href="dplyr에-의한-데이터-다듬기.html#cb231-10" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> audi         a4      <span class="dv">2</span>    <span class="dv">2008</span>     <span class="dv">4</span> <span class="fu">manual</span>(m6) f        <span class="dv">20</span>    <span class="dv">31</span> p     compa<span class="sc">~</span></span>
<span id="cb231-11"><a href="dplyr에-의한-데이터-다듬기.html#cb231-11" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 231 more rows</span></span></code></pre></div>
<p>그룹 데이터 프레임 <code>by_cyl</code>를 출력해 보면 <code>Groups: cyl [4]</code>라는 결과가 나타나는데,
이것은 변수 <code>cyl</code>에 의해 4개 그룹이 구성되었다는 것을 의미한다.
또한 <code>by_cyl_drv</code>의 경우에는 <code>cyl</code>과 <code>drv</code>의 조합으로 9개 그룹이 생성되었다는 것을 알 수 있다.</p>
<ul>
<li>그룹별 자료 개수 확인</li>
</ul>
<p>각 그룹에 속한 자료의 개수는 함수 <code>tally()</code> 또는 <code>count()</code>를 사용하면 알 수 있다.
함수 <code>tally()</code>는 그룹 변수 지정 기능이 없는 함수이어서 그룹 데이터 프레임을 입력하면 각 그룹별 자료의 개수를 출력하지만, 일반 데이터 프레임을 입력하면 전체 자료 개수를 출력한다.</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="dplyr에-의한-데이터-다듬기.html#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> by_cyl <span class="sc">%&gt;%</span> <span class="fu">tally</span>()</span>
<span id="cb232-2"><a href="dplyr에-의한-데이터-다듬기.html#cb232-2" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 4 x 2</span></span>
<span id="cb232-3"><a href="dplyr에-의한-데이터-다듬기.html#cb232-3" aria-hidden="true" tabindex="-1"></a>    cyl     n</span>
<span id="cb232-4"><a href="dplyr에-의한-데이터-다듬기.html#cb232-4" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb232-5"><a href="dplyr에-의한-데이터-다듬기.html#cb232-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">4</span>    <span class="dv">81</span></span>
<span id="cb232-6"><a href="dplyr에-의한-데이터-다듬기.html#cb232-6" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>     <span class="dv">5</span>     <span class="dv">4</span></span>
<span id="cb232-7"><a href="dplyr에-의한-데이터-다듬기.html#cb232-7" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">6</span>    <span class="dv">79</span></span>
<span id="cb232-8"><a href="dplyr에-의한-데이터-다듬기.html#cb232-8" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>     <span class="dv">8</span>    <span class="dv">70</span></span>
<span id="cb232-9"><a href="dplyr에-의한-데이터-다듬기.html#cb232-9" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mpg <span class="sc">%&gt;%</span> <span class="fu">tally</span>()</span>
<span id="cb232-10"><a href="dplyr에-의한-데이터-다듬기.html#cb232-10" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 1 x 1</span></span>
<span id="cb232-11"><a href="dplyr에-의한-데이터-다듬기.html#cb232-11" aria-hidden="true" tabindex="-1"></a>      n</span>
<span id="cb232-12"><a href="dplyr에-의한-데이터-다듬기.html#cb232-12" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb232-13"><a href="dplyr에-의한-데이터-다듬기.html#cb232-13" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>   <span class="dv">234</span></span></code></pre></div>
<p>반면에 함수 <code>count()</code>는 그룹 변수를 지정해서, 각 그룹별 자료의 개수를 계산할 수 있다.</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="dplyr에-의한-데이터-다듬기.html#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> by_cyl <span class="sc">%&gt;%</span> <span class="fu">count</span>()</span>
<span id="cb233-2"><a href="dplyr에-의한-데이터-다듬기.html#cb233-2" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 4 x 2</span></span>
<span id="cb233-3"><a href="dplyr에-의한-데이터-다듬기.html#cb233-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Groups:   cyl [4]</span></span>
<span id="cb233-4"><a href="dplyr에-의한-데이터-다듬기.html#cb233-4" aria-hidden="true" tabindex="-1"></a>    cyl     n</span>
<span id="cb233-5"><a href="dplyr에-의한-데이터-다듬기.html#cb233-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb233-6"><a href="dplyr에-의한-데이터-다듬기.html#cb233-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">4</span>    <span class="dv">81</span></span>
<span id="cb233-7"><a href="dplyr에-의한-데이터-다듬기.html#cb233-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>     <span class="dv">5</span>     <span class="dv">4</span></span>
<span id="cb233-8"><a href="dplyr에-의한-데이터-다듬기.html#cb233-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">6</span>    <span class="dv">79</span></span>
<span id="cb233-9"><a href="dplyr에-의한-데이터-다듬기.html#cb233-9" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>     <span class="dv">8</span>    <span class="dv">70</span></span>
<span id="cb233-10"><a href="dplyr에-의한-데이터-다듬기.html#cb233-10" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mpg <span class="sc">%&gt;%</span> <span class="fu">count</span>(cyl)</span>
<span id="cb233-11"><a href="dplyr에-의한-데이터-다듬기.html#cb233-11" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 4 x 2</span></span>
<span id="cb233-12"><a href="dplyr에-의한-데이터-다듬기.html#cb233-12" aria-hidden="true" tabindex="-1"></a>    cyl     n</span>
<span id="cb233-13"><a href="dplyr에-의한-데이터-다듬기.html#cb233-13" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb233-14"><a href="dplyr에-의한-데이터-다듬기.html#cb233-14" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">4</span>    <span class="dv">81</span></span>
<span id="cb233-15"><a href="dplyr에-의한-데이터-다듬기.html#cb233-15" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>     <span class="dv">5</span>     <span class="dv">4</span></span>
<span id="cb233-16"><a href="dplyr에-의한-데이터-다듬기.html#cb233-16" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">6</span>    <span class="dv">79</span></span>
<span id="cb233-17"><a href="dplyr에-의한-데이터-다듬기.html#cb233-17" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>     <span class="dv">8</span>    <span class="dv">70</span></span></code></pre></div>
<ul>
<li>그룹 변수의 변경</li>
</ul>
<p>기존의 그룹 데이터 프레임에 그룹을 구성하는 변수를 추가해서 더 세분화된 그룹을 구성할 수 있다.
변수 <code>cyl</code>로 구성된 그룹 데이터 프레임에 <code>drv</code>로 생성되는 그룹을 추가하기 위해서는 옵션 <code>.add=TRUE</code>를 지정해야 한다.</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="dplyr에-의한-데이터-다듬기.html#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> by_cyl <span class="sc">%&gt;%</span> </span>
<span id="cb234-2"><a href="dplyr에-의한-데이터-다듬기.html#cb234-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">group_by</span>(drv, <span class="at">.add =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb234-3"><a href="dplyr에-의한-데이터-다듬기.html#cb234-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">tally</span>()</span>
<span id="cb234-4"><a href="dplyr에-의한-데이터-다듬기.html#cb234-4" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 9 x 3</span></span>
<span id="cb234-5"><a href="dplyr에-의한-데이터-다듬기.html#cb234-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Groups:   cyl [4]</span></span>
<span id="cb234-6"><a href="dplyr에-의한-데이터-다듬기.html#cb234-6" aria-hidden="true" tabindex="-1"></a>    cyl drv       n</span>
<span id="cb234-7"><a href="dplyr에-의한-데이터-다듬기.html#cb234-7" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb234-8"><a href="dplyr에-의한-데이터-다듬기.html#cb234-8" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">4</span> <span class="dv">4</span>        <span class="dv">23</span></span>
<span id="cb234-9"><a href="dplyr에-의한-데이터-다듬기.html#cb234-9" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>     <span class="dv">4</span> f        <span class="dv">58</span></span>
<span id="cb234-10"><a href="dplyr에-의한-데이터-다듬기.html#cb234-10" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">5</span> f         <span class="dv">4</span></span>
<span id="cb234-11"><a href="dplyr에-의한-데이터-다듬기.html#cb234-11" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>     <span class="dv">6</span> <span class="dv">4</span>        <span class="dv">32</span></span>
<span id="cb234-12"><a href="dplyr에-의한-데이터-다듬기.html#cb234-12" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>     <span class="dv">6</span> f        <span class="dv">43</span></span>
<span id="cb234-13"><a href="dplyr에-의한-데이터-다듬기.html#cb234-13" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>     <span class="dv">6</span> r         <span class="dv">4</span></span>
<span id="cb234-14"><a href="dplyr에-의한-데이터-다듬기.html#cb234-14" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>     <span class="dv">8</span> <span class="dv">4</span>        <span class="dv">48</span></span>
<span id="cb234-15"><a href="dplyr에-의한-데이터-다듬기.html#cb234-15" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>     <span class="dv">8</span> f         <span class="dv">1</span></span>
<span id="cb234-16"><a href="dplyr에-의한-데이터-다듬기.html#cb234-16" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span>     <span class="dv">8</span> r        <span class="dv">21</span></span></code></pre></div>
<p>옵션 <code>.add=TRUE</code>를 추가하지 않으면 기존의 그룹 변수가 새로운 그룹 변수로 대체된다.</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="dplyr에-의한-데이터-다듬기.html#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> by_cyl <span class="sc">%&gt;%</span> </span>
<span id="cb235-2"><a href="dplyr에-의한-데이터-다듬기.html#cb235-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">group_by</span>(drv) <span class="sc">%&gt;%</span> </span>
<span id="cb235-3"><a href="dplyr에-의한-데이터-다듬기.html#cb235-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">tally</span>()</span>
<span id="cb235-4"><a href="dplyr에-의한-데이터-다듬기.html#cb235-4" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 x 2</span></span>
<span id="cb235-5"><a href="dplyr에-의한-데이터-다듬기.html#cb235-5" aria-hidden="true" tabindex="-1"></a>  drv       n</span>
<span id="cb235-6"><a href="dplyr에-의한-데이터-다듬기.html#cb235-6" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb235-7"><a href="dplyr에-의한-데이터-다듬기.html#cb235-7" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">4</span>       <span class="dv">103</span></span>
<span id="cb235-8"><a href="dplyr에-의한-데이터-다듬기.html#cb235-8" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> f       <span class="dv">106</span></span>
<span id="cb235-9"><a href="dplyr에-의한-데이터-다듬기.html#cb235-9" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> r        <span class="dv">25</span></span></code></pre></div>
<p>함수 <code>group_by()</code>로 구성된 그룹은 함수 <code>ungroup()</code>으로 해체할 수 있다.</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="dplyr에-의한-데이터-다듬기.html#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> by_cyl <span class="sc">%&gt;%</span> </span>
<span id="cb236-2"><a href="dplyr에-의한-데이터-다듬기.html#cb236-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb236-3"><a href="dplyr에-의한-데이터-다듬기.html#cb236-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">tally</span>()</span>
<span id="cb236-4"><a href="dplyr에-의한-데이터-다듬기.html#cb236-4" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 1 x 1</span></span>
<span id="cb236-5"><a href="dplyr에-의한-데이터-다듬기.html#cb236-5" aria-hidden="true" tabindex="-1"></a>      n</span>
<span id="cb236-6"><a href="dplyr에-의한-데이터-다듬기.html#cb236-6" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb236-7"><a href="dplyr에-의한-데이터-다듬기.html#cb236-7" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>   <span class="dv">234</span></span></code></pre></div>
</div>
<div id="그룹-데이터-프레임에서-기본-함수들의-작동-방식" class="section level3" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> 그룹 데이터 프레임에서 기본 함수들의 작동 방식</h3>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="데이터-입력.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
